!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=42)}([function(t,e,n){n(26),n(8),n(27),n(29)},function(t,e,n){n(0);var r=Object.prototype.hasOwnProperty;function o(){throw new Error("This is an abstract interface. Mix it. Don't construct it")}function i(t,e,n,r){var o,i,a,u=t.active,s=t.current,l=s.length,c=l;for(u.length>l&&(u.length=l);l--;)u[l]=s[l];for(i=0;i<c;i++)if(a=u[i],!i||s.indexOf(a)>=0){if(!(o=a[t.specificHandlerMethodName]||a[t.genericHandlerMethodName]||a).call)throw new Error("No event listener for "+t.specificHandlerName+" or "+t.genericHandlerName+" or call on "+o);o.call(a,n,e,r)}}t.exports=o,o.debug=!0,o.prototype.getOwnPropertyChangeDescriptor=function(t){this.__propertyChangeListeners__||Object.defineProperty(this,"__propertyChangeListeners__",{value:{},enumerable:!1,configurable:!0,writable:!0});var e=this.__propertyChangeListeners__;if(!r.call(e,t)){var n=String(t);n=n&&n[0].toUpperCase()+n.slice(1),e[t]={willChangeListeners:{current:[],active:[],specificHandlerMethodName:"handle"+n+"WillChange",genericHandlerMethodName:"handlePropertyWillChange"},changeListeners:{current:[],active:[],specificHandlerMethodName:"handle"+n+"Change",genericHandlerMethodName:"handlePropertyChange"}}}return e[t]},o.prototype.hasOwnPropertyChangeDescriptor=function(t){if(!this.__propertyChangeListeners__)return!1;if(!t)return!0;var e=this.__propertyChangeListeners__;return!!r.call(e,t)},o.prototype.addOwnPropertyChangeListener=function(t,e,n){this.makeObservable&&!this.isObservable&&this.makeObservable();var r,i=o.getOwnPropertyChangeDescriptor(this,t);r=n?i.willChangeListeners:i.changeListeners,o.makePropertyObservable(this,t),r.current.push(e);var a=this;return function(){o.removeOwnPropertyChangeListener(a,t,e,n),a=null}},o.prototype.addBeforeOwnPropertyChangeListener=function(t,e){return o.addOwnPropertyChangeListener(this,t,e,!0)},o.prototype.removeOwnPropertyChangeListener=function(t,e,n){var r,i=o.getOwnPropertyChangeDescriptor(this,t),a=(r=n?i.willChangeListeners:i.changeListeners).current.lastIndexOf(e);if(-1===a)throw new Error("Can't remove property change listener: does not exist: property name"+JSON.stringify(t));r.current.splice(a,1)},o.prototype.removeBeforeOwnPropertyChangeListener=function(t,e){return o.removeOwnPropertyChangeListener(this,t,e,!0)},o.prototype.dispatchOwnPropertyChange=function(t,e,n){var r,a=o.getOwnPropertyChangeDescriptor(this,t);if(!a.isActive){a.isActive=!0,r=n?a.willChangeListeners:a.changeListeners;try{i(r,t,e,this)}finally{a.isActive=!1}}},o.prototype.dispatchBeforeOwnPropertyChange=function(t,e){return o.dispatchOwnPropertyChange(this,t,e,!0)},o.prototype.makePropertyObservable=function(t){var e,n,o=this.__overriddenPropertyDescriptors__;if(o){if(r.call(o,t))return}else{if(Array.isArray(this))return;if(!Object.isExtensible(this))throw new Error("Can't make property "+JSON.stringify(t)+" observable on "+this+" because object is not extensible");o={},Object.defineProperty(this,"__overriddenPropertyDescriptors__",{value:o,enumerable:!1,writable:!0,configurable:!0})}"object"==typeof this.__state__?e=this.__state__:(e={},Object.defineProperty(this,"__state__",{value:e,writable:!0,enumerable:!1})),e[t]=this[t];var a,u=this;do{if(n=Object.getOwnPropertyDescriptor(u,t))break;u=Object.getPrototypeOf(u)}while(u);if(n){if(!n.configurable)return;if(!n.writable&&!n.set)return}else n={value:void 0,enumerable:!0,writable:!0,configurable:!0};o[t]=n,a="value"in n?{get:function(){return n.value},set:function(r){var o,a;if(r!==n.value){if(!(a=(o=this.__propertyChangeListeners__[t]).isActive)){o.isActive=!0;try{i(o.willChangeListeners,t,n.value,this)}finally{}}if(n.value=r,e[t]=r,!a)try{i(o.changeListeners,t,r,this)}finally{o.isActive=!1}}},enumerable:n.enumerable,configurable:!0}:{get:n.get,set:function(r){var o,a,u=this[t];if(n.set.call(this,r),(r=this[t])!==u){if(!(a=(o=this.__propertyChangeListeners__[t]).isActive)){o.isActive=!0;try{i(o.willChangeListeners,t,u,this)}finally{}}if(e[t]=r,!a)try{i(o.changeListeners,t,r,this)}finally{o.isActive=!1}}},enumerable:n.enumerable,configurable:!0},Object.defineProperty(this,t,a)},o.getOwnPropertyChangeDescriptor=function(t,e){return t.getOwnPropertyChangeDescriptor?t.getOwnPropertyChangeDescriptor(e):o.prototype.getOwnPropertyChangeDescriptor.call(t,e)},o.hasOwnPropertyChangeDescriptor=function(t,e){return t.hasOwnPropertyChangeDescriptor?t.hasOwnPropertyChangeDescriptor(e):o.prototype.hasOwnPropertyChangeDescriptor.call(t,e)},o.addOwnPropertyChangeListener=function(t,e,n,r){if(Object.isObject(t))return t.addOwnPropertyChangeListener?t.addOwnPropertyChangeListener(e,n,r):o.prototype.addOwnPropertyChangeListener.call(t,e,n,r)},o.removeOwnPropertyChangeListener=function(t,e,n,r){if(Object.isObject(t))return t.removeOwnPropertyChangeListener?t.removeOwnPropertyChangeListener(e,n,r):o.prototype.removeOwnPropertyChangeListener.call(t,e,n,r)},o.dispatchOwnPropertyChange=function(t,e,n,r){if(Object.isObject(t))return t.dispatchOwnPropertyChange?t.dispatchOwnPropertyChange(e,n,r):o.prototype.dispatchOwnPropertyChange.call(t,e,n,r)},o.addBeforeOwnPropertyChangeListener=function(t,e,n){return o.addOwnPropertyChangeListener(t,e,n,!0)},o.removeBeforeOwnPropertyChangeListener=function(t,e,n){return o.removeOwnPropertyChangeListener(t,e,n,!0)},o.dispatchBeforeOwnPropertyChange=function(t,e,n){return o.dispatchOwnPropertyChange(t,e,n,!0)},o.makePropertyObservable=function(t,e){return t.makePropertyObservable?t.makePropertyObservable(e):o.prototype.makePropertyObservable.call(t,e)}},function(t,e,n){"use strict";function r(){throw new Error("Can't construct. GenericCollection is a mixin.")}t.exports=r,r.EmptyArray=Object.freeze([]),r.prototype.addEach=function(t){if(t&&Object(t)===t)if("function"==typeof t.forEach)t.forEach(this.add,this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else Object.keys(t).forEach(function(e){this.add(t[e],e)},this);else if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)this.add(t[e],e);return this},r.prototype.deleteEach=function(t,e){return t.forEach(function(t){this.delete(t,e)},this),this},r.prototype.forEach=function(t){var e=arguments[1];return this.reduce(function(n,r,o,i,a){t.call(e,r,o,i,a)},void 0)},r.prototype.map=function(t){var e=arguments[1],n=[];return this.reduce(function(r,o,i,a,u){n.push(t.call(e,o,i,a,u))},void 0),n},r.prototype.enumerate=function(t){null==t&&(t=0);var e=[];return this.reduce(function(n,r){e.push([t++,r])},void 0),e},r.prototype.group=function(t,e,n){n=n||Object.equals;var r=[],o=[];return this.forEach(function(i,a,u){a=t.call(e,i,a,u);var s,l=o.indexOf(a,n);-1===l?(s=[],r.push([a,s]),o.push(a)):s=r[l][1],s.push(i)}),r},r.prototype.toArray=function(){return this.map(Function.identity)},r.prototype.toObject=function(){var t={};return this.reduce(function(e,n,r){t[r]=n},void 0),t},r.prototype.filter=function(t){var e=arguments[1],n=this.constructClone();return this.reduce(function(r,o,i,a,u){t.call(e,o,i,a,u)&&n.add(o,i)},void 0),n},r.prototype.every=function(t){var e=arguments[1];return this.reduce(function(n,r,o,i,a){return n&&t.call(e,r,o,i,a)},!0)},r.prototype.some=function(t){var e=arguments[1];return this.reduce(function(n,r,o,i,a){return n||t.call(e,r,o,i,a)},!1)},r.prototype.all=function(){return this.every(Boolean)},r.prototype.any=function(){return this.some(Boolean)},r.prototype.min=function(t){t=t||this.contentCompare||Object.compare;var e=!0;return this.reduce(function(n,r){return e?(e=!1,r):t(r,n)<0?r:n},void 0)},r.prototype.max=function(t){t=t||this.contentCompare||Object.compare;var e=!0;return this.reduce(function(n,r){return e?(e=!1,r):t(r,n)>0?r:n},void 0)},r.prototype.sum=function(t){return t=void 0===t?0:t,this.reduce(function(t,e){return t+e},t)},r.prototype.average=function(t){var e=void 0===t?0:t,n=void 0===t?0:t;return this.reduce(function(t,r){e+=r,n+=1},void 0),e/n},r.prototype.concat=function(){for(var t=this.constructClone(this),e=0;e<arguments.length;e++)t.addEach(arguments[e]);return t},r.prototype.flatten=function(){var t=this;return this.reduce(function(e,n){return n.forEach(function(t){this.push(t)},e,t),e},[])},r.prototype.zip=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),Array.unzip(t)},r.prototype.join=function(t){return this.reduce(function(e,n){return void 0===e?n:e+t+n},void 0)},r.prototype.sorted=function(t,e,n){return(t=t||this.contentCompare||Object.compare).by?(e=t.by,t=t.compare||this.contentCompare||Object.compare):e=e||Function.identity,void 0===n&&(n=1),this.map(function(t){return{by:e(t),value:t}}).sort(function(e,r){return t(e.by,r.by)*n}).map(function(t){return t.value})},r.prototype.reversed=function(){return this.constructClone(this).reverse()},r.prototype.clone=function(t,e){if(void 0===t)t=1/0;else if(0===t)return this;var n=this.constructClone();return this.forEach(function(r,o){n.add(Object.clone(r,t-1,e),o)},this),n},r.prototype.only=function(){if(1===this.length)return this.one()},r.prototype.iterator=function(){return this.iterate.apply(this,arguments)},n(26)},function(t,e){function n(t){this.parent=null,this.value=t}t.exports=n,n.prototype.nest=function(t){var e=Object.create(this);return e.value=t,e.parent=this,e}},function(t,e,n){"use strict";var r=n(11),o=n(14),i=new r;function a(){throw new Error("Can't construct. RangeChanges is a mixin.")}t.exports=a,a.prototype.getAllRangeChangeDescriptors=function(){return i.has(this)||i.set(this,o()),i.get(this)},a.prototype.getRangeChangeDescriptor=function(t){var e=this.getAllRangeChangeDescriptors();return t=t||"",e.has(t)||e.set(t,{isActive:!1,changeListeners:[],willChangeListeners:[]}),e.get(t)},a.prototype.addRangeChangeListener=function(t,e,n){!this.isObservable&&this.makeObservable&&this.makeObservable();var r=this.getRangeChangeDescriptor(e);(n?r.willChangeListeners:r.changeListeners).push(t),Object.defineProperty(this,"dispatchesRangeChanges",{value:!0,writable:!0,configurable:!0,enumerable:!1});var o=this;return function(){o&&(o.removeRangeChangeListener(t,e,n),o=null)}},a.prototype.removeRangeChangeListener=function(t,e,n){var r,o=this.getRangeChangeDescriptor(e),i=(r=n?o.willChangeListeners:o.changeListeners).lastIndexOf(t);if(-1===i)throw new Error("Can't remove range change listener: does not exist: token "+JSON.stringify(e));r.splice(i,1)},a.prototype.dispatchRangeChange=function(t,e,n,r){var o=this.getAllRangeChangeDescriptors(),i="Range"+(r?"WillChange":"Change");o.forEach(function(o,a){if(!o.isActive){var u;o.isActive=!0,u=r?o.willChangeListeners:o.changeListeners;var s="handle"+(a.slice(0,1).toUpperCase()+a.slice(1))+i;try{u.slice().forEach(function(o){if(!(u.indexOf(o)<0))if(o[s])o[s](t,e,n,this,r);else{if(!o.call)throw new Error("Handler "+o+" has no method "+s+" and is not callable");o.call(this,t,e,n,this,r)}},this)}finally{o.isActive=!1}}},this)},a.prototype.addBeforeRangeChangeListener=function(t,e){return this.addRangeChangeListener(t,e,!0)},a.prototype.removeBeforeRangeChangeListener=function(t,e){return this.removeRangeChangeListener(t,e,!0)},a.prototype.dispatchBeforeRangeChange=function(t,e,n){return this.dispatchRangeChange(t,e,n,!0)}},function(t,e,n){n(0);var r=n(46),o={};t.exports=function t(e,n){if(Array.isArray(e))return{type:"tuple",args:e.map(function(e){return t(e,n)})};if(!n&&Object.prototype.hasOwnProperty.call(o,e))return o[e];try{var i=r.parse(e,n||Object.empty);return n||(o[e]=i),i}catch(t){throw t.message=t.message.replace(/[\s\.]+$/,"")+"  on line "+t.line+" column "+t.column,t}}},function(t,e,n){n(0);var r=n(1);n(33);var o=n(47),i=n(34),a=n(10),u=(n(12),n(48)),s=(n(3),n(20));function l(t){return function(e){return e(t)}}function c(t,e){return t(e.value)}e.makeLiteralObserver=l,e.observeValue=c,e.observeParameters=function(t,e){return t(e.parameters)},e.makeElementObserver=function(t){return function(e,n){return e(n.document.getElementById(t))}},e.makeComponentObserver=function(t,e){return function(e,n){var r=n.components;return e((r.getObjectByLabel||r.getComponentByLabel).call(r,t))}},e.observeProperty=f;var h=f;function f(t,e,n,o){if(null==t)return n();var i;function a(t,e,r){i&&i(),i=n(t,e,r)}return r.addOwnPropertyChangeListener(t,e,a,o.beforeChange),a(t[e],e,t),function(){i&&i(),r.removeOwnPropertyChangeListener(t,e,a,o.beforeChange)}}function p(t,e){return function(n,r){return e(function(e){return"string"!=typeof e&&"number"!=typeof e?n():t(function(t){return null==t?n():t.observeProperty?t.observeProperty(e,n,r):h(t,e,n,r)},r)},r)}}e.makePropertyObserver=p,e.observeKey=g,e.observeGet=g;var d=g;function g(t,e,n,r){var o,i=t.contentEquals||Object.equals;function a(t,r,a){i(e,r)&&(o&&o(),o=n(t,e,a))}return a(t.get(e),e,t),t.addMapChangeListener(a,r.beforeChange),function(){o&&o(),t.removeMapChangeListener(a)}}function v(t){return function(e,n){for(var r=[],o=[],i=0;i<t.length;i++)r[i]=void 0,o[i]=function(t,e){return t(function(t){r.set(e,t)},n)}(t[i],i);var a=e(r);return function(){a&&a();for(var t=0;t<o.length;t++)(a=o[t])&&a()}}}function m(t){return function(e,n){var r={},o={};for(var i in t)!function(t,e){o[t]=void 0,r[t]=e(function(e){o[t]=e},n)}(i,t[i]);var a=e(o);return function(){for(var t in a&&a(),r)(a=r[t])&&a()}}}function y(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return v(t)}e.makeGetObserver=function(t,e){return function(n,r){return t(function(t){return t?e(function(e){return null==e?n():t.observeGet?t.observeGet(e,n,r):d(t,e,n,r)},r):n()},r)}},e.makeHasObserver=function(t,e){return function(n,r){return n=Z(n),e(function(e){return t(function(t){return t?t.addRangeChangeListener?M(t,function(){return n((t.has||t.contains).call(t,e))},r):t.addMapChangeListener?U(t,function(){return n(t.has(e))},r):n():n()},r)},r)}},e.makeObserversObserver=v,e.makeRecordObserver=m,e.makeObjectObserver=m,e.makeTupleObserver=y,e.makeArrayObserver=y,e.makeOperatorObserverMaker=function(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=v(e),o=I(r);return function(e,n){return o(function(n){return n.every(s.defined)?e(t.apply(void 0,n)):e()},n)}}},e.makeMethodObserverMaker=function(t){var e=t.slice(0,1).toUpperCase()+t.slice(1),n="make"+e+"Observer",r="observe"+e;return function(){var e=arguments[0],o=Array.prototype.slice.call(arguments,1),i=v(o),a=I(i);return function(i,u){return e(function(e){return e?e[n]?e[n].apply(e,o)(i,u):e[r]?e[r](i,u):a(function(n){return n.every(s.defined)&&"function"==typeof e[t]?i(e[t].apply(e,n)):i()},u):i()},u)}}},e.makeNotObserver=function(t){return function(e,n){return t(function(t){return e(!t)},n)}},e.makeAndObserver=function(t,e){return function(n,r){return t(function(t){return t?e(n,r):n(t)},r)}},e.makeOrObserver=function(t,e){return function(n,r){return t(function(t){return t?n(t):e(n,r)},r)}},e.makeConditionalObserver=function(t,e,n){return function(r,o){return t(function(t){return null==t?r():t?e(r,o):n(r,o)},o)}},e.makeDefinedObserver=function(t){return function(e,n){return t(function(t){return e(null!=t)},n)}},e.makeDefaultObserver=function(t,e){return function(n,r){return t(function(t){return null==t?e(n,r):n(t)},r)}};var b=e.makeMapBlockObserver=K(w);function w(t,e){return function(n,r){return t(function(t){if(!t)return n();var o=[],i=[],a=[];var u=M(t,function(n,u,s){var l;X(i,s,u.length,n.map(function(t,e){return{index:s+e}})),function(e){for(;e<t.length;e++)i[e].index=e}(s+n.length);var c,h=[],f=s,p=u.length;for(f=s,p=s+u.length;f<p;f++)(c=a[f])&&c();X(a,s,u.length,n.map(function(t,n){var a=i[s+n];return e(function(t){l?o.set(a.index,t):h[n]=t},r.nest(t))})),l=!0,o.swap(s,u.length,h)},r),s=n(o,t);return function(){s&&s();for(var t=0,e=a.length;t<e;t++)(s=a[t])&&s();u()}},r)}}var O=e.makeFilterBlockObserver=K(function(t,e){var n=w(t,e);return function(t,e){return n(function(n,r){if(!r)return t();var o=[],i=[],a=[0];var u=M(n,function(t,e,i){var u=r.slice(i,i+t.length),s=e.map(Boolean).sum(),l=u.filter(function(e,n){return t[n]}),c=a[i],h=o.slice(c,c+s);(h.length!==l.length||h.some(function(t,e){return t!==l[e]}))&&o.swap(c,s,l),function(t){for(;t<n.length;t++)a[t+1]=a[t]+!!n[t]}(c)},e),s=t(o);return function(){s&&s();for(var t=0,e=i.length;t<e;t++)(s=i[t])&&s();u()}},e)}});function C(t,e){return Object.equals(t[1],e[1])}function A(t,e){return Object.compare(t[1],e[1])}function E(t){return function(e,n){return t(function(t){return e([n.value,t])},n)}}e.makeSortedBlockObserver=function(t,e){var n=E(e),r=w(t,n);return b(function(t,e){return r(function(n){if(!n)return t();var r=[],i=o(r,C,A);var a=M(n,function(t,e){i.deleteEach(e),i.addEach(t)},e),u=t(r);return function(){u&&u(),a()}},e)},G)},e.makeSortedSetBlockObserver=function(t,e){var n=E(e),r=w(t,n),o=w(x(r,z),L(z));return function(t,e){var n=new a;var r=new i(null,function(t,e){return t=n.get(t),e=n.get(e),Object.equals(t,e)},function(t,e){return t=n.get(t),e=n.get(e),Object.compare(t,e)}),u=t(r);function s(t,e){e.forEach(function(t){r.delete(t[0]),n.delete(t[0])}),t.forEach(function(t){n.set(t[0],t[1]),r.add(t[0])})}var l=o(function(t){return r.clear(),M(t,s,e)},e);return function(){u&&u(),l()}}},e.makeReversedObserver=K(function(t){return function(e,n){return t(function(t){if(!t)return e();var r=[];var o=M(t,function(t,e,n){var o=r.length-n-e.length;r.swap(o,e.length,t.reversed())},n),i=e(r);return function(){i&&i(),o()}},n)}});var k=e.makeFlattenObserver=K(function(t){return function(e,n){return t(function(t){if(!t)return e();var r=[],o=[],i=[0],a=[];function u(e){for(var n=e;n<t.length;n++)a[n].index=n,t[n]?i[n+1]=i[n]+t[n].length:i[n+1]=i[n]}var s=M(t,function(t,e,s){var l,c=i[s],h=(p=i[s+e.length])-c;r.swap(c,h,[]),X(a,s,e.length,t.map(function(){return{index:null}})),u(s);for(var f=s,p=s+e.length;f<p;f++)(l=o[f])&&l();X(o,s,e.length,t.map(function(t,e){var o=a[s+e];return M(t,function(t,e,n){u(o.index);var a=i[o.index]+n,s=i[o.index]+n+e.length-a;r.swap(a,s,t)},n)}))},n),l=e(r);return function(){l&&l();for(var t=0,e=o.length;t<e;t++)(l=o[t])&&l();s()}},n)}});function x(t,e){var n=B(t,e);return Y(n)}function B(t,e){var n=w(t,E(e));return function(t,e){return n(function(n,r){if(!n)return t();var o=a();var i=M(n,function(t,e,n){e.forEach(function(t){var e=o.get(t[1]);1===e.length?o.delete(t[1]):e.delete(t[0])}),t.forEach(function(t){var e,n=!o.has(t[1]);(e=n?r.constructClone():o.get(t[1])).add(t[0]),n&&o.set(t[1],e)})},e),u=t(o);return function(){i(),u&&u()}},e)}}function P(t,e,n){var r=w(t,E(e));function o(t,e){return Object.compare(t[1],e[1])*n}return function(t,e){return r(function(n){if(!n)return t();var r=new u(null,C,o);var i=M(n,function(t,e){r.addEach(t),r.deleteEach(e)},e),a=U(r,function(e,n){if(0===n)return e?t(e[0]):t()},e);return function(){i(),a()}},e)}}e.makeConcatObserver=function(){var t=[],e=arguments.length;for(;e--;)t[e]=arguments[e];return k(v(t))},e.makeSomeBlockObserver=function(t,e){return V(p(O(t,e),R),Boolean)},e.makeEveryBlockObserver=function(t,e){var n=V(e,s.not);return V(p(O(t,n),R),s.not)},e.makeGroupBlockObserver=x,e.makeGroupMapBlockObserver=B,e.makeMaxBlockObserver=function(t,e){return P(t,e,1)},e.makeMinBlockObserver=function(t,e){return P(t,e,-1)},e.makeMaxObserver=function(t){return P(t,c,1)},e.makeMinObserver=function(t){return P(t,c,-1)};var R=l("length");function j(t){return function(e){return function(n,r){return n=Z(n),e(function(e){if(!e)return n();var o=t(e,n);return M(e,function(t,e,r){return n(o(t,e,r))},r)},r)}}}function _(t){return"number"==typeof t&&!isNaN(t)}e.makeSumObserver=j(function(){var t=0;return function(e,n,r){return e=e.filter(_),n=n.filter(_),t+=e.sum()-n.sum()}}),e.makeAverageObserver=j(function(){var t=0,e=0;return function(n,r,o){return n=n.filter(_),r=r.filter(_),t+=n.sum()-r.sum(),e+=n.length-r.length,t/e}}),e.makeViewObserver=K(function(t,e,n){n||(n=e,e=T);return function(r,o){return t(function(t){if(!t)return r();var i,a,u,s,l=[],c=!1,h=M(t,function(e,n,r){if(!c)return;var o=e.length-n.length;r<=a?o>0?(l.swap(0,0,t.slice(a,a+o)),l.splice(i,l.length-i)):(l.splice(0,-o),l.swap(l.length,0,t.slice(a+l.length,a+i))):r<a+i&&(l.swap(r-a,n.length,e),o>0?l.splice(i,l.length-i):l.swap(l.length,0,t.slice(a+l.length,a+i)))},o),f=n(function(e){e=+e,isNaN(e)&&(e=void 0);var n="number"==typeof e&&"number"==typeof a,r=Math.max(0,e);"number"==typeof s&&(r=Math.min(r,t.length-s)),c!==n?(n?l.swap(0,0,t.slice(s,s+r)):l.clear(),c=n):c&&u!==r&&(r<u?l.splice(e,u-r):l.swap(u,0,t.slice(s+u,s+r))),i=e,u=r},o),p=e(function(e){e=+e,isNaN(e)&&(e=void 0);var n="number"==typeof i&&"number"==typeof e,r=Math.max(0,e);"number"==typeof i&&(r=Math.min(r,t.length));var o=Math.max(0,i);if("number"==typeof r&&(o=Math.min(o,t.length-r)),c!==n)n?l.swap(0,l.length,t.slice(r,r+o)):l.clear(),c=n;else if(c&&s!==r){var h=Math.abs(r-s);h<u&&r<s?(l.swap(0,0,t.slice(r,s)),l.splice(o,l.length-o)):h<u&&r>s?(l.swap(l.length,0,t.slice(s+u,r+o)),l.splice(0,l.length-o)):l.swap(0,l.length,t.slice(r,r+o))}a=e,s=r,u=o},o);var d=r(l);return function(){d&&d(),f(),p(),h()}},o)}});var T=l(0);e.makeEnumerateObserver=K(function(t){return function(e,n){return t(function(t){if(!t)return e();var r=[];var o=M(t,function(t,e,n){r.swap(n,e.length,t.map(function(t,e){return[n+e,t]})),function(t){for(;t<r.length;t++)r[t].set(0,t)}(n+t.length)},n),i=e(r);return function(){i&&i(),o()}},n)}}),e.makeEnumerationObserver=e.makeEnumerateObserver,e.makeRangeObserver=function(t){return function(e,n){var r=[],o=e(r),i=t(function(t){if(null==(t>>>=0))r.clear();else if(t>r.length){for(var e=[],n=r.length;n<t;n++)e.push(n);r.swap(r.length,0,e)}else t<r.length&&r.splice(t,r.length)},n);return function(){o&&o(),i&&i()}}},e.makeStartsWithObserver=function(t,e){return function(n,r){return e(function(e){if("string"!=typeof e)return n();var o=new RegExp("^"+RegExp.escape(e));return t(function(t){return"string"!=typeof t?n():n(o.test(t))},r)},r)}},e.makeEndsWithObserver=function(t,e){return function(n,r){return e(function(e){if("string"!=typeof e)return n();var o=new RegExp(RegExp.escape(e)+"$");return t(function(t){return"string"!=typeof t?n():n(o.test(t))},r)},r)}},e.makeContainsObserver=function(t,e){return function(n,r){return e(function(e){if("string"!=typeof e)return n();var o=new RegExp(RegExp.escape(e));return t(function(t){return"string"!=typeof t?n():n(o.test(t))},r)},r)}},e.makeJoinObserver=function(t,e){return e=e||S,function(n,r){return t(function(t){return t?e(function(e){if("string"!=typeof e)return n();var o;var i=M(t,function(){o&&o(),o=n(t.join(e))},r);return function(){i(),o&&o()}},r):n()},r)}};var S=l("");function M(t,e,n){if(!t)return Function.noop;var r;if(!t.toArray)return Function.noop;if(!t.addRangeChangeListener)return Function.noop;function o(t,n,o){r&&r(),r=e(t,n,o)}o(t.toArray(),[],0);var i=t.addRangeChangeListener(o,null,n.beforeChange);return function(){r&&r(),i()}}function L(t){return function(e,n){return t(function(t){return q(t,e,n)},n)}}e.observeRangeChange=M,e.makeLastObserver=L,e.observeLast=N;var q=N;function N(t,e,n){var r,o=-1;var i=M(t,function(n,i,a){if(o+=n.length-i.length,!(a+i.length<o&&a+n.length<o)){var u=o<0?null:t.get(o);r&&r(),r=e(u),u}},n);return function(){r&&r(),i&&i()}}function F(t,e,n){var r=0;return M(t,function(n,o,i){return 1!==(r+=n.length-o.length)?e():e(t.only())},n)}function D(t,e,n){var r=0;return M(t,function(n,o,i){return 0===(r+=n.length-o.length)?e():e(t.one())},n)}function I(t){return function(e,n){return t(function(t){return t&&t.addRangeChangeListener?M(t,function(){return e(t)},n):e(t)},n)}}function U(t,e,n){if(t.addMapChangeListener){var r=new a;t.forEach(i);var o=t.addMapChangeListener(i,n.beforeChange);return function(){r.forEach(function(t){t&&t()}),o()}}function i(t,n,o){var i=r.get(n);r.delete(n),i&&i(),i=e(t,n,o),void 0===t?i&&i():r.set(n,i)}}e.makeOnlyObserver=function(t){return function(e,n){return t(Z(function(t){return F(t,e,n)}),n)}},e.observeOnly=F,e.makeOneObserver=function(t){return function(e,n){return t(Z(function(t){return D(t,e,n)}),n)}},e.observeOne=D,e.makeRangeContentObserver=I,e.makeMapContentObserver=function(t){return function(e,n){return t(function(t){return t&&t.addMapChangeListener?U(t,function(){return e(t)},n):e(t)},n)}},e.observeMapChange=U;var Y=e.makeEntriesObserver=K(function(t){return function(e,n){return t(function(t){return t?H(t,e,n):e()},n)}});function H(t,e,n){var r=[],o=a(),i=e(r);var u=U(t,function(t,e,n){var i,a;o.has(e)?null==t?(i=o.get(e),o.delete(e),a=r.indexOf(i),r.splice(a,1)):(i=o.get(e)).set(1,t):(i=[e,t],o.set(e,i),r.push(i))},n);return function(){i&&i(),u&&u()}}function G(t,e){return e.value?t(e.value[0]):t()}function z(t,e){return e.value?t(e.value[1]):t()}e.observeEntries=H,e.makeKeysObserver=function(t){var e=Y(t);return b(e,G)},e.observeEntryKey=G,e.makeValuesObserver=function(t){var e=Y(t);return b(e,z)},e.observeEntryValue=z,e.makeToMapObserver=function(t){return function(e,n){var r=new a,o=e(r),i=t(function(t){if(r.clear(),t&&"object"==typeof t){if(t.addRangeChangeListener)return W(function(t){return M(t,function(t,e){e.forEach(function(t){r.delete(t[0])}),t.forEach(function(t){r.set(t[0],t[1])})},n)},n.nest(t));if(t.addMapChangeListener)return U(t,function(t,e){void 0===t?r.delete(e):r.set(e,t)},n);var e=[],o=0;for(var i in t)e[o++]=h(t,i,function(t){void 0===t?r.delete(i):r.set(i,t)},n);return function(){for(var t=0,n=e.length;t<n;t++)e[t]()}}},n)||Function.noop;return function(){o&&o(),i()}}};var W=b(x(c,G),L(z));function V(t,e,n){return function(r,o){return r=Z(r),t(function(t){return r(e.call(n,t))},o)}}function J(t,e){var r=n(5),o=n(9);return function(n,i){return n=Z(n),e(function(e){if(null==e)return n();var a,u;try{a=r(e),u=o(a)}catch(t){return n()}return t(function(t){return u(n,i.nest(t))},i)},i)}}e.makeParentObserver=function(t){return function(e,n){return n.parent?t(e,n.parent):e()}},e.makeConverterObserver=V,e.makeComputerObserver=function(t,e,n){return function(r,o){return r=Z(r),t(function(t){if(t&&t.every(s.defined))return r(e.apply(n,t))},o)}},e.makePathObserver=J,e.makeExpressionObserver=J,e.makeWithObserver=function(t,e){return function(n,r){return t(function(t){return null==t?n():e(function(t){return null==t?n():n(t)},r.nest(t))},r)}},e.makeToArrayObserver=K(Function.identity),e.makeAsArrayObserver=e.makeToArrayObserver;var $=n(49).merge;function K(t){return function(){var e=t.apply(this,arguments);return function(t,n){var r=[],o=e(function(t){function e(t,e,n){r.swap(n,e.length,t)}if(t&&t.addRangeChangeListener)return $(r,t),t.addRangeChangeListener(e,null,n.beforeChange),function(){t.removeRangeChangeListener(e,null,n.beforeChange)};r.clear()},n),i=t(r);return function(){o&&o(),i&&i()}}}}function Z(t){var e;return function(n){if(n!==e){var r=t.apply(this,arguments);return e=n,r}}}function X(t,e,n,r){e<0?e=t.length+e:e>t.length&&(t.length=e),e+n>t.length?n=t.length-e:n<0&&(n=0);var o=r.length-n,i=t.length,a=t.length+o;if(o>0)for(var u=i-1;u>=e+n;u--){var s=u+o;u in t?t[s]=t[u]:(t[s]=void 0,delete t[s])}for(u=0;u<r.length;u++)u in r?t[e+u]=r[u]:(t[e+u]=void 0,delete t[e+u]);if(o<0)for(u=e+r.length;u<i-o;u++){(s=u-o)in t?t[u]=t[s]:(t[u]=void 0,delete t[u])}t.length=a}e.makeUniq=Z,e.cancelEach=function(t){t.forEach(function(t){t&&t()})},e.autoCancelPrevious=function(t){var e;return function(n){return e&&e(),e=t.apply(this,arguments),function(){e&&e(),e=void 0}}}},function(t,e,n){var r=n(15);function o(t){return function(e){return""!==e&&t("Unexpected "+JSON.stringify(e)),function t(){return t}}}function i(t){return function e(n,r){return r=r||[],t(function(t){return null!=t?e(n,r.concat([t])):n(r)})}}function a(t){return" "===t||"\n"===t||""===t}e.makeParser=function(t,e){e=e||function(t,e){throw new Error(t+" while parsing "+JSON.stringify(e))};return function(n){var r;n=n.trim();var i=t.apply(null,[function(t){return r=t,o(function(t){return e(t,n)})}].concat(Array.prototype.slice.call(arguments,1)));for(Array.prototype.forEach.call(n,function(t,e){i=i(t)});!r;)i=i("");return r}},e.makeExpect=function(t){return function(e){return function(n){return n===t?e(n):e()(n)}}},e.makeParseSome=function(t){var e=i(t);return function(n){return t(function(t){return null!=t?e(n,[t]):n([])})}},e.makeParseAny=i,e.makeDelimitedParser=function(t,e){return function n(r,o,i){return i=i||[],t(function(t){return t.length?(i=i.concat([t]),e(function(t){return t?n(r,o,i):r(i)})):r(i)},o)}},e.isBreak=a,e.isFinal=function(t){return a(t)||r[t]},e.countPrimes=function t(e,n,r){n=n||0;r=r||function(t){return t};return function(o){return"'"===o?t(e,n+1,function(t){return r(t)("'")}):e(n,r)(o)}}},function(t,e,n){"use strict";var r=n(11);t.exports=Object,Object.empty=Object.freeze(Object.create(null)),Object.isObject=function(t){return Object(t)===t},Object.getValueOf=function(t){return t&&"function"==typeof t.valueOf&&(t=t.valueOf()),t};var o=new r;Object.hash=function(t){return t&&"function"==typeof t.hash?""+t.hash():Object(t)===t?(o.has(t)||o.set(t,Math.random().toString(36).slice(2)),o.get(t)):""+t};var i=Object.prototype.hasOwnProperty;Object.owns=function(t,e){return i.call(t,e)},Object.has=function(t,e){if("object"!=typeof t)throw new Error("Object.has can't accept non-object: "+typeof t);if(t&&"function"==typeof t.has)return t.has(e);if("string"==typeof e)return e in t&&t[e]!==Object.prototype[e];throw new Error("Key must be a string for Object.has on plain objects")},Object.get=function(t,e,n){if("object"!=typeof t)throw new Error("Object.get can't accept non-object: "+typeof t);return t&&"function"==typeof t.get?t.get(e,n):Object.has(t,e)?t[e]:n},Object.set=function(t,e,n){t&&"function"==typeof t.set?t.set(e,n):t[e]=n},Object.addEach=function(t,e){if(e)if("function"!=typeof e.forEach||e.hasOwnProperty("forEach"))if("number"==typeof e.length)for(var n=0;n<e.length;n++)t[n]=e[n];else Object.keys(e).forEach(function(n){t[n]=e[n]});else!0===e.isMap?e.forEach(function(e,n){t[n]=e}):e.forEach(function(e){t[e[0]]=e[1]});else;return t},Object.forEach=function(t,e,n){Object.keys(t).forEach(function(r){e.call(n,t[r],r,t)})},Object.map=function(t,e,n){return Object.keys(t).map(function(r){return e.call(n,t[r],r,t)})},Object.values=function(t){return Object.map(t,Function.identity)},Object.concat=function(){for(var t={},e=0;e<arguments.length;e++)Object.addEach(t,arguments[e]);return t},Object.from=Object.concat,Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},Object.equals=function(t,e,n,o){if(n=n||Object.equals,(t=Object.getValueOf(t))===(e=Object.getValueOf(e)))return!0;if(Object.isObject(t)){if((o=o||new r).has(t))return!0;o.set(t,!0)}if(Object.isObject(t)&&"function"==typeof t.equals)return t.equals(e,n,o);if(Object.isObject(e)&&"function"==typeof e.equals)return e.equals(t,n,o);if(Object.isObject(t)&&Object.isObject(e)&&Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){for(var i in t)if(!n(t[i],e[i],n,o))return!1;for(var i in e)if(!(i in t&&n(e[i],t[i],n,o)))return!1;return!0}return t!=t&&e!=e||(!t||!e)&&t===e},Object.compare=function(t,e){if((t=Object.getValueOf(t))===(e=Object.getValueOf(e)))return 0;var n=typeof t,r=typeof e;return"number"===n&&"number"===r?t-e:"string"===n&&"string"===r?t<e?-1/0:1/0:t&&"function"==typeof t.compare?t.compare(e):e&&"function"==typeof e.compare?-e.compare(t):0},Object.clone=function(t,e,n){if(t=Object.getValueOf(t),n=n||new r,void 0===e)e=1/0;else if(0===e)return t;if(Object.isObject(t)){if(!n.has(t))if(t&&"function"==typeof t.clone)n.set(t,t.clone(e,n));else{var o=Object.getPrototypeOf(t);if(null!==o&&o!==Object.prototype)throw new Error("Can't clone "+t);var i=Object.create(o);for(var a in n.set(t,i),t)i[a]=Object.clone(t[a],e-1,n)}return n.get(t)}return t},Object.clear=function(t){if(t&&"function"==typeof t.clear)t.clear();else for(var e=Object.keys(t),n=e.length;n;)delete t[e[--n]];return t}},function(t,e,n){var r=n(6),o=n(20);function i(t){return a.compile(t)}t.exports=i;var a=i.semantics={compilers:{property:r.makePropertyObserver,get:r.makeGetObserver,path:r.makePathObserver,with:r.makeWithObserver,if:r.makeConditionalObserver,parent:r.makeParentObserver,not:r.makeNotObserver,and:r.makeAndObserver,or:r.makeOrObserver,default:r.makeDefaultObserver,defined:r.makeDefinedObserver,rangeContent:Function.identity,mapContent:Function.identity,keys:r.makeKeysObserver,values:r.makeValuesObserver,items:r.makeEntriesObserver,entries:r.makeEntriesObserver,toMap:r.makeToMapObserver,mapBlock:r.makeMapBlockObserver,filterBlock:r.makeFilterBlockObserver,everyBlock:r.makeEveryBlockObserver,someBlock:r.makeSomeBlockObserver,sortedBlock:r.makeSortedBlockObserver,sortedSetBlock:r.makeSortedSetBlockObserver,groupBlock:r.makeGroupBlockObserver,groupMapBlock:r.makeGroupMapBlockObserver,minBlock:r.makeMinBlockObserver,maxBlock:r.makeMaxBlockObserver,min:r.makeMinObserver,max:r.makeMaxObserver,enumerate:r.makeEnumerationObserver,reversed:r.makeReversedObserver,flatten:r.makeFlattenObserver,concat:r.makeConcatObserver,view:r.makeViewObserver,sum:r.makeSumObserver,average:r.makeAverageObserver,last:r.makeLastObserver,only:r.makeOnlyObserver,one:r.makeOneObserver,has:r.makeHasObserver,tuple:r.makeArrayObserver,range:r.makeRangeObserver,startsWith:r.makeStartsWithObserver,endsWith:r.makeEndsWithObserver,contains:r.makeContainsObserver,join:r.makeJoinObserver,toArray:r.makeToArrayObserver,asArray:r.makeToArrayObserver},compile:function(t){var e=this.compilers;if("literal"===t.type)return r.makeLiteralObserver(t.value);if("value"===t.type)return r.observeValue;if("parameters"===t.type)return r.observeParameters;if("element"===t.type)return r.makeElementObserver(t.id);if("component"===t.type)return r.makeComponentObserver(t.label,t);if("record"===t.type){var n={},o=t.args;for(var i in o)n[i]=this.compile(o[i]);return r.makeObjectObserver(n)}e.hasOwnProperty(t.type)||(e[t.type]=r.makeMethodObserverMaker(t.type));var a=t.args.map(this.compile,this);return e[t.type].apply(null,a)}},u=a.compilers;Object.keys(o).forEach(function(t){u[t]||(u[t]=r.makeOperatorObserverMaker(o[t]))}),u.toString=r.makeOperatorObserverMaker(o.toString)},function(t,e,n){"use strict";n(0);var r=n(12),o=n(2),i=n(30),a=n(1);function u(t,e,n,o){if(!(this instanceof u))return new u(t,e,n,o);e=e||Object.equals,n=n||Object.hash,o=o||Function.noop,this.contentEquals=e,this.contentHash=n,this.getDefault=o,this.store=new r(void 0,function(t,n){return e(t.key,n.key)},function(t){return n(t.key)}),this.length=0,this.addEach(t)}t.exports=u,u.Map=u,Object.addEach(u.prototype,o.prototype),Object.addEach(u.prototype,i.prototype),Object.addEach(u.prototype,a.prototype),u.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},u.prototype.log=function(t,e,n,r){e=e||this.logNode,this.store.log(t,function(t,n,r){e(t.value.value,n,r)},n,r)},u.prototype.logNode=function(t,e){e(" key: "+t.key),e(" value: "+t.value)}},function(t,e){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=v);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var r=new n,o=Object.freeze({});if(r.set(o,1),1===r.get(o))return void(t.exports=WeakMap);e=!0}}Object.prototype.hasOwnProperty;var i=Object.getOwnPropertyNames,a=Object.defineProperty,u=Object.isExtensible,s="weakmap:",l=s+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var c=new ArrayBuffer(25),h=new Uint8Array(c);crypto.getRandomValues(h),l=s+"rand:"+Array.prototype.map.call(h,function(t){return(t%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(t){return i(t).filter(m)}}),"getPropertyNames"in Object){var f=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(t){return f(t).filter(m)}})}!function(){var t=Object.freeze;a(Object,"freeze",{value:function(e){return y(e),t(e)}});var e=Object.seal;a(Object,"seal",{value:function(t){return y(t),e(t)}});var n=Object.preventExtensions;a(Object,"preventExtensions",{value:function(t){return y(t),n(t)}})}();var p=!1,d=0,g=function(){this instanceof g||w();var t=[],e=[],n=d++;return Object.create(g.prototype,{get___:{value:b(function(r,o){var i,a=y(r);return a?n in a?a[n]:o:(i=t.indexOf(r))>=0?e[i]:o})},has___:{value:b(function(e){var r=y(e);return r?n in r:t.indexOf(e)>=0})},set___:{value:b(function(r,o){var i,a=y(r);return a?a[n]=o:(i=t.indexOf(r))>=0?e[i]=o:(i=t.length,e[i]=o,t[i]=r),this})},delete___:{value:b(function(r){var o,i,a=y(r);return a?n in a&&delete a[n]:!((o=t.indexOf(r))<0)&&(i=t.length-1,t[o]=void 0,e[o]=e[i],t[o]=t[i],t.length=i,e.length=i,!0)})}})};g.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function r(){this instanceof g||w();var t,r=new n,o=void 0,i=!1;return t=e?function(t,e){return r.set(t,e),r.has(t)||(o||(o=new g),o.set(t,e)),this}:function(t,e){if(i)try{r.set(t,e)}catch(n){o||(o=new g),o.set___(t,e)}else r.set(t,e);return this},Object.create(g.prototype,{get___:{value:b(function(t,e){return o?r.has(t)?r.get(t):o.get___(t,e):r.get(t,e)})},has___:{value:b(function(t){return r.has(t)||!!o&&o.has___(t)})},set___:{value:b(t)},delete___:{value:b(function(t){var e=!!r.delete(t);return o&&o.delete___(t)||e})},permitHostObjects___:{value:b(function(t){if(t!==v)throw new Error("bogus call to permitHostObjects___");i=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=g.prototype,t.exports=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=g)}function v(t){t.permitHostObjects___&&t.permitHostObjects___(v)}function m(t){return!(t.substr(0,s.length)==s&&"___"===t.substr(t.length-3))}function y(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[l];if(e&&e.key===t)return e;if(u(t)){e={key:t};try{return a(t,l,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function b(t){return t.prototype=null,Object.freeze(t)}function w(){p||"undefined"==typeof console||(p=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},function(t,e,n){"use strict";n(0);var r=n(13),o=n(44),i=n(2),a=n(17),u=n(1),s=n(4);function l(t,e,n,r){if(!(this instanceof l))return new l(t,e,n,r);e=e||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=e,this.contentHash=n,this.getDefault=r,this.order=new this.Order(void 0,e),this.store=new this.Store(void 0,function(t,n){return e(t.value,n.value)},function(t){return n(t.value)}),this.length=0,this.addEach(t)}t.exports=l,l.Set=l,Object.addEach(l.prototype,i.prototype),Object.addEach(l.prototype,a.prototype),Object.addEach(l.prototype,u.prototype),Object.addEach(l.prototype,s.prototype),l.prototype.Order=r,l.prototype.Store=o,l.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},l.prototype.has=function(t){var e=new this.order.Node(t);return this.store.has(e)},l.prototype.get=function(t,e){if(e)throw new Error("Set#get does not support second argument: equals");var n=new this.order.Node(t);return(n=this.store.get(n))?n.value:this.getDefault(t)},l.prototype.add=function(t){var e=new this.order.Node(t);if(!this.store.has(e)){var n=this.length;return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([t],[],n),this.order.add(t),e=this.order.head.prev,this.store.add(e),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([t],[],n),!0}return!1},l.prototype.delete=function(t,e){if(e)throw new Error("Set#delete does not support second argument: equals");var n=new this.order.Node(t);return!!this.store.has(n)&&(n=this.store.get(n),this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[t],n.index),this.store.delete(n),this.order.splice(n,1),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[t],n.index),!0)},l.prototype.pop=function(){if(this.length){var t=this.order.head.prev.value;return this.delete(t),t}},l.prototype.shift=function(){if(this.length){var t=this.order.head.next.value;return this.delete(t),t}},l.prototype.one=function(){if(this.length>0)return this.store.one().value},l.prototype.clear=function(){var t;this.dispatchesRangeChanges&&(t=this.toArray(),this.dispatchBeforeRangeChange([],t,0)),this.store.clear(),this.order.clear(),this.length=0,this.dispatchesRangeChanges&&this.dispatchRangeChange([],t,0)},l.prototype.reduce=function(t,e){var n=arguments[2],r=this.order,o=0;return r.reduce(function(e,r){return t.call(n,e,r,o++,this)},e,this)},l.prototype.reduceRight=function(t,e){var n=arguments[2],r=this.order,o=this.length-1;return r.reduceRight(function(e,r){return t.call(n,e,r,o--,this)},e,this)},l.prototype.iterate=function(){return this.order.iterate()},l.prototype.log=function(){var t=this.store;return t.log.apply(t,arguments)},l.prototype.makeObservable=function(){this.order.makeObservable()}},function(t,e,n){"use strict";t.exports=u;n(0);var r=n(2),o=n(28),i=n(1),a=n(4);function u(t,e,n){if(!(this instanceof u))return new u(t,e,n);var r=this.head=new this.Node;r.next=r,r.prev=r,this.contentEquals=e||Object.equals,this.getDefault=n||Function.noop,this.length=0,this.addEach(t)}function s(t){this.head=t,this.at=t.next}function l(t){this.value=t,this.prev=null,this.next=null}u.List=u,Object.addEach(u.prototype,r.prototype),Object.addEach(u.prototype,o.prototype),Object.addEach(u.prototype,i.prototype),Object.addEach(u.prototype,a.prototype),u.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.getDefault)},u.prototype.find=function(t,e,n){e=e||this.contentEquals;for(var r=this.head,o=this.scan(n,r.next);o!==r;){if(e(o.value,t))return o;o=o.next}},u.prototype.findLast=function(t,e,n){e=e||this.contentEquals;for(var r=this.head,o=this.scan(n,r.prev);o!==r;){if(e(o.value,t))return o;o=o.prev}},u.prototype.has=function(t,e){return!!this.find(t,e)},u.prototype.get=function(t,e){var n=this.find(t,e);return n?n.value:this.getDefault(t)},u.prototype.delete=function(t,e){var n=this.findLast(t,e);if(n){if(this.dispatchesRangeChanges){var r=[],o=[t];this.dispatchBeforeRangeChange(r,o,n.index)}return n.delete(),this.length--,this.dispatchesRangeChanges&&(this.updateIndexes(n.next,n.index),this.dispatchRangeChange(r,o,n.index)),!0}return!1},u.prototype.deleteAll=function(t,e){e=e||this.contentEquals;for(var n=this.head,r=n.next,o=0;r!==n;)e(t,r.value)&&(r.delete(),o++),r=r.next;return this.length-=o,o},u.prototype.clear=function(){var t,e;this.dispatchesRangeChanges&&(e=this.toArray(),t=[],this.dispatchBeforeRangeChange(t,e,0)),this.head.next=this.head.prev=this.head,this.length=0,this.dispatchesRangeChanges&&this.dispatchRangeChange(t,e,0)},u.prototype.add=function(t){var e=new this.Node(t);return this.dispatchesRangeChanges&&(e.index=this.length,this.dispatchBeforeRangeChange([t],[],e.index)),this.head.addBefore(e),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([t],[],e.index),!0},u.prototype.push=function(){var t=this.head;if(this.dispatchesRangeChanges){var e=Array.prototype.slice.call(arguments),n=[],r=this.length;this.dispatchBeforeRangeChange(e,n,r);var o=this.head.prev}for(var i=0;i<arguments.length;i++){var a=arguments[i],u=new this.Node(a);t.addBefore(u)}this.length+=arguments.length,this.dispatchesRangeChanges&&(this.updateIndexes(o.next,void 0===o.index?0:o.index+1),this.dispatchRangeChange(e,n,r))},u.prototype.unshift=function(){if(this.dispatchesRangeChanges){var t=Array.prototype.slice.call(arguments),e=[];this.dispatchBeforeRangeChange(t,e,0)}for(var n=this.head,r=0;r<arguments.length;r++){var o=arguments[r],i=new this.Node(o);n.addAfter(i),n=i}this.length+=arguments.length,this.dispatchesRangeChanges&&(this.updateIndexes(this.head.next,0),this.dispatchRangeChange(t,e,0))},u.prototype.pop=function(){var t,e=this.head;if(e.prev!==e){if(t=e.prev.value,this.dispatchesRangeChanges){var n=[],r=[t],o=this.length-1;this.dispatchBeforeRangeChange(n,r,o)}e.prev.delete(),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange(n,r,o)}return t},u.prototype.shift=function(){var t,e=this.head;if(e.prev!==e){if(t=e.next.value,this.dispatchesRangeChanges){var n=[],r=[t];this.dispatchBeforeRangeChange(n,r,0)}e.next.delete(),this.length--,this.dispatchesRangeChanges&&(this.updateIndexes(this.head.next,0),this.dispatchRangeChange(n,r,0))}return t},u.prototype.peek=function(){if(this.head!==this.head.next)return this.head.next.value},u.prototype.poke=function(t){this.head!==this.head.next?this.head.next.value=t:this.push(t)},u.prototype.one=function(){return this.peek()},u.prototype.scan=function(t,e){var n=this.head;if("number"==typeof t){var r=t;if(r>=0)for(t=n.next;r&&(r--,(t=t.next)!=n););else for(t=n;r<0&&(r++,(t=t.prev)!=n););return t}return t||e},u.prototype.slice=function(t,e){var n=[],r=this.head;for(t=this.scan(t,r.next),e=this.scan(e,r);t!==e&&t!==r;)n.push(t.value),t=t.next;return n},u.prototype.splice=function(t,e){return this.swap(t,e,Array.prototype.slice.call(arguments,2))},u.prototype.swap=function(t,e,n){var r=t;t=this.scan(t,this.head),null==e&&(e=1/0),n=Array.from(n);for(var o,i,a=[],u=t;e--&&e>=0&&u!==this.head;)a.push(u.value),u=u.next;this.dispatchesRangeChanges&&(o=t===this.head?this.length:t.prev===this.head?0:t.index,i=t.prev,this.dispatchBeforeRangeChange(n,a,o));u=t;var s=0;for(u=t;s<a.length;s++,u=u.next)u.delete();null==r&&u===this.head&&(u=this.head.next);for(s=0;s<n.length;s++){var l=new this.Node(n[s]);u.addBefore(l)}return this.length+=n.length-a.length,this.dispatchesRangeChanges&&(t===this.head?this.updateIndexes(this.head.next,0):this.updateIndexes(i.next,i.index+1),this.dispatchRangeChange(n,a,o)),a},u.prototype.reverse=function(){if(this.dispatchesRangeChanges){var t=this.toArray(),e=t.reversed();this.dispatchBeforeRangeChange(e,t,0)}var n=this.head;do{var r=n.next;n.next=n.prev,n.prev=r,n=n.next}while(n!==this.head);return this.dispatchesRangeChanges&&this.dispatchRangeChange(e,t,0),this},u.prototype.sort=function(){this.swap(0,this.length,this.sorted())},u.prototype.reduce=function(t,e){for(var n=arguments[2],r=this.head,o=r.next;o!==r;)e=t.call(n,e,o.value,o,this),o=o.next;return e},u.prototype.reduceRight=function(t,e){for(var n=arguments[2],r=this.head,o=r.prev;o!==r;)e=t.call(n,e,o.value,o,this),o=o.prev;return e},u.prototype.updateIndexes=function(t,e){for(;t!==this.head;)t.index=e++,t=t.next},u.prototype.makeObservable=function(){this.head.index=-1,this.updateIndexes(this.head.next,0),this.dispatchesRangeChanges=!0},u.prototype.iterate=function(){return new s(this.head)},s.prototype.next=function(){if(this.at===this.head)throw StopIteration;var t=this.at.value;return this.at=this.at.next,t},u.prototype.Node=l,l.prototype.delete=function(){this.prev.next=this.next,this.next.prev=this.prev},l.prototype.addBefore=function(t){var e=this.prev;this.prev=t,t.prev=e,e.next=t,t.next=this},l.prototype.addAfter=function(t){var e=this.next;this.next=t,t.next=e,e.prev=t,t.prev=this}},function(t,e,n){"use strict";n(0);var r=n(2),o=n(30),i=n(1);function a(t,e){if(!(this instanceof a))return new a(t,e);e=e||Function.noop,this.getDefault=e,this.store=Object.create(null),this.length=0,this.addEach(t)}t.exports=a,a.Dict=a,Object.addEach(a.prototype,r.prototype),Object.addEach(a.prototype,o.prototype),Object.addEach(a.prototype,i.prototype),a.prototype.constructClone=function(t){return new this.constructor(t,this.getDefault)},a.prototype.assertString=function(t){if("string"!=typeof t)throw new TypeError("key must be a string but Got "+t)},Object.defineProperty(a.prototype,"$__proto__",{writable:!0}),Object.defineProperty(a.prototype,"_hasProto",{get:function(){return this.hasOwnProperty("$__proto__")&&void 0!==this._protoValue}}),Object.defineProperty(a.prototype,"_protoValue",{get:function(){return this.$__proto__},set:function(t){this.$__proto__=t}}),a.prototype.get=function(t,e){return this.assertString(t),"__proto__"===t?this._hasProto?this._protoValue:arguments.length>1?e:this.getDefault(t):t in this.store?this.store[t]:arguments.length>1?e:this.getDefault(t)},a.prototype.set=function(t,e){this.assertString(t);var n="__proto__"===t;return(n?this._hasProto:t in this.store)?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,n?this._protoValue:this.store[t]),n?this._protoValue=e:this.store[t]=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e),!1):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,void 0),this.length++,n?this._protoValue=e:this.store[t]=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e),!0)},a.prototype.has=function(t){return this.assertString(t),"__proto__"===t?this._hasProto:t in this.store},a.prototype.delete=function(t){return this.assertString(t),"__proto__"===t?!!this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this._protoValue),this._protoValue=void 0,this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0):t in this.store&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this.store[t]),delete this.store[t],this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0)},a.prototype.clear=function(){var t;for(t in this._hasProto&&(this.dispatchesMapChanges&&this.dispatchBeforeMapChange("__proto__",this._protoValue),this._protoValue=void 0,this.dispatchesMapChanges&&this.dispatchMapChange("__proto__",void 0)),this.store)this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,this.store[t]),delete this.store[t],this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0);this.length=0},a.prototype.reduce=function(t,e,n){this._hasProto&&(e=t.call(n,e,"$__proto__","__proto__",this));var r=this.store;for(var o in this.store)e=t.call(n,e,r[o],o,this);return e},a.prototype.reduceRight=function(t,e,n){var r=this,o=this.store;return e=Object.keys(this.store).reduceRight(function(e,i){return t.call(n,e,o[i],i,r)},e),this._hasProto?t.call(n,e,this._protoValue,"__proto__",r):e},a.prototype.one=function(){var t;for(t in this.store)return this.store[t];return this._protoValue},a.prototype.toJSON=function(){return this.toObject()}},function(t,e){t.exports={"-":"comma",",":"comma",":":"comma",";":"full-stop",".":"full-stop","!":"exclamation-point","?":"question-mark","(":"open-paren",")":"close-paren",">":"flourish-left","<":"flourish-right"}},function(t,e,n){"use strict";var r=n(11),o=n(13);function i(){throw new Error("Can't construct. MapChanges is a mixin.")}t.exports=i;Object.prototype.hasOwnProperty;var a=new r,u=null;i.prototype.getAllMapChangeDescriptors=function(){return a.has(this)||(u||(u=n(14)),a.set(this,u())),a.get(this)},i.prototype.getMapChangeDescriptor=function(t){var e=this.getAllMapChangeDescriptors();return t=t||"",e.has(t)||e.set(t,{willChangeListeners:new o,changeListeners:new o}),e.get(t)},i.prototype.addMapChangeListener=function(t,e,n){!this.isObservable&&this.makeObservable&&this.makeObservable();var r=this.getMapChangeDescriptor(e);(n?r.willChangeListeners:r.changeListeners).push(t),Object.defineProperty(this,"dispatchesMapChanges",{value:!0,writable:!0,configurable:!0,enumerable:!1});var o=this;return function(){o&&(o.removeMapChangeListener(t,e,n),o=null)}},i.prototype.removeMapChangeListener=function(t,e,n){var r=this.getMapChangeDescriptor(e),o=(n?r.willChangeListeners:r.changeListeners).findLast(t);if(!o)throw new Error("Can't remove map change listener: does not exist: token "+JSON.stringify(e));o.delete()},i.prototype.dispatchMapChange=function(t,e,n){var r=this.getAllMapChangeDescriptors(),o="Map"+(n?"WillChange":"Change");r.forEach(function(r,i){if(!r.isActive){var a;r.isActive=!0,a=n?r.willChangeListeners:r.changeListeners;var u="handle"+(i.slice(0,1).toUpperCase()+i.slice(1))+o;try{a.forEach(function(n){if(n[u])n[u](e,t,this);else{if(!n.call)throw new Error("Handler "+n+" has no method "+u+" and is not callable");n.call(n,e,t,this)}},this)}finally{r.isActive=!1}}},this)},i.prototype.addBeforeMapChangeListener=function(t,e){return this.addMapChangeListener(t,e,!0)},i.prototype.removeBeforeMapChangeListener=function(t,e){return this.removeMapChangeListener(t,e,!0)},i.prototype.dispatchBeforeMapChange=function(t,e){return this.dispatchMapChange(t,e,!0)}},function(t,e){function n(){throw new Error("Can't construct. GenericSet is a mixin.")}t.exports=n,n.prototype.isSet=!0,n.prototype.union=function(t){var e=this.constructClone(this);return e.addEach(t),e},n.prototype.intersection=function(t){return this.constructClone(this.filter(function(e){return t.has(e)}))},n.prototype.difference=function(t){var e=this.constructClone(this);return e.deleteEach(t),e},n.prototype.symmetricDifference=function(t){var e=this.union(t),n=this.intersection(t);return e.difference(n)},n.prototype.deleteAll=function(t){return+this.delete(t)},n.prototype.equals=function(t,e){var n=this;return t&&"function"==typeof t.reduce&&this.length===t.length&&t.reduce(function(t,r){return t&&n.has(r,e)},!0)},n.prototype.toJSON=function(){return this.toArray()},n.prototype.contains=function(t){return this.has(t)},n.prototype.remove=function(t){return this.delete(t)},n.prototype.toggle=function(t){this.has(t)?this.delete(t):this.add(t)}},function(t,e){function n(t,e){return n.semantics.solve(t,e)}t.exports=n,n.semantics={solve:function(t,e){for(;;){for(;this.simplifiers.hasOwnProperty(t.type);){var n=this.simplifiers[t.type](t);if(!n)break;t=n}var r=this.rotateTargetToSource.hasOwnProperty(t.type),o=this.rotateSourceToTarget.hasOwnProperty(e.type);if(!r&&!o)break;r?(e=this.rotateTargetToSource[t.type](t,e),t=t.args[0]):o&&(t=this.rotateSourceToTarget[e.type](t,e),e=e.args[0])}return[t,e]},simplifiers:{not:function(t){var e=t.args[0];if("not"===e.type)return e.args[0]},add:function(t){var e=t.args[0];if("literal"===e.type&&""===e.value)return{type:"toString",args:[t.args[1]]}},someBlock:function(t){return{type:"not",args:[{type:"everyBlock",args:[t.args[0],{type:"not",args:[t.args[1]]}]}]}}},rotateTargetToSource:{reflect:function(t,e){return{type:t.type,args:[e]}},invert:function(t,e,n){return{type:n,args:[e,t.args[1]]}},toNumber:function(t,e){return this.reflect(t,e)},toString:function(t,e){return this.reflect(t,e)},not:function(t,e){return this.reflect(t,e)},neg:function(t,e){return this.reflect(t,e)},add:function(t,e){return this.invert(t,e,"sub")},sub:function(t,e){return this.invert(t,e,"add")},mul:function(t,e){return this.invert(t,e,"div")},div:function(t,e){return this.invert(t,e,"mul")},pow:function(t,e){return this.invert(t,e,"root")},root:function(t,e){return this.invert(t,e,"pow")},join:function(t,e){return this.invert(t,e,"split")},split:function(t,e){return this.invert(t,e,"join")}},rotateSourceToTarget:{rangeContent:function(t,e){return"rangeContent"===t.type?t:{type:e.type,args:[t]}}}}},function(t,e,n){var r=n(12),o=n(14),i=e.precedence=o();(e.precedenceLevels=[["tuple","record"],["literal","value","parameters","property","element","component","mapBlock","filterBlock","sortedBlock","groupBlock","groupMapBlock","with"],["not","neg","number","parent"],["scope"],["default"],["pow","root","log"],["mul","div","mod","rem"],["add","sub"],["equals","lt","gt","le","ge","compare"],["and"],["or"],["if"]]).forEach(function(t){var e=r(i.keys());t.forEach(function(t){i.set(t,e)})});var a=e.operatorTokens=o({"**":"pow","//":"root","%%":"log","*":"mul","/":"div","%":"mod",rem:"rem","+":"add","-":"sub","<":"lt",">":"gt","<=":"le",">=":"ge","==":"equals","<=>":"compare","!=":"notEquals","??":"default","&&":"and","||":"or","?":"then",":":"else"});e.operatorTypes=o(a.map(function(t,e){return[t,e]}))},function(t,e,n){n(8),n(29);var r=n(10),o=n(12);e.toNumber=function(t){return+t},e.toString=function(t){return null==t?t:"string"==typeof t||"number"==typeof t?""+t:null},e.toArray=Array.from,e.toMap=r,e.toSet=o,e.not=function(t){return!t},e.neg=function(t){return-t},e.pow=function(t,e){return Math.pow(t,e)},e.root=function(t,e){return Math.pow(t,1/e)},e.log=function(t,e){return Math.log(t)/Math.log(e)},e.mul=function(t,e){return t*e},e.div=function(t,e){return t/e},e.mod=function(t,e){return(t%e+e)%e},e.rem=function(t,e){return t%e},e.add=function(t,e){return t+e},e.sub=function(t,e){return t-e},e.ceil=function(t){return Math.ceil(t)},e.floor=function(t){return Math.floor(t)},e.round=function(t){return Math.round(t)},e.lt=function(t,e){return Object.compare(t,e)<0},e.gt=function(t,e){return Object.compare(t,e)>0},e.le=function(t,e){return Object.compare(t,e)<=0},e.ge=function(t,e){return Object.compare(t,e)>=0},e.equals=Object.equals,e.compare=Object.compare,e.and=function(t,e){return t&&e},e.or=function(t,e){return t||e},e.defined=function(t){return null!=t},e.startsWith=function(t,e){return new RegExp("^"+RegExp.escape(e)).test(t)},e.endsWith=function(t,e){return new RegExp(RegExp.escape(e)+"$").test(t)},e.contains=function(t,e){return new RegExp(RegExp.escape(e)).test(t)},e.join=function(t,e){return t.join(e||"")},e.split=function(t,e){return t.split(e||"")},e.range=function(t){for(var e=[],n=0;n<t;n++)e.push(n);return e},e.last=function(t){return t.get(t.length-1)}},function(t,e,n){var r=n(38),o=n(39),i=n(40),a=e.tengwar=o.tengwar,u=e.tehtar=o.tehtar,s=e.positions={tinco:{o:3,w:3,others:2},parma:{o:3,w:3,others:2},calma:{o:3,w:3,u:3,"o-below":1,others:2},quesse:{o:3,w:3,"o-below":1,others:2},ando:{wide:!0,e:1,o:2,"":1,"":1,others:0},umbar:{wide:!0,e:1,o:2,"":1,"":1,others:0},anga:{wide:!0,e:1,"":1,"":1,others:0},ungwe:{wide:!0,e:1,o:1,"":1,"":1,others:0},thule:{others:3},formen:3,harma:{e:0,o:3,u:7,"":2,"":2,w:0,others:1},hwesta:{e:0,o:3,u:7,w:0,others:1},anto:{wide:!0,"":1,"":1,others:0},ampa:{wide:!0,"":1,"":1,others:0},anca:{wide:!0,u:7,"":1,"":1,others:0},unque:{wide:!0,u:7,others:0},numen:{wide:!0,"":1,"":1,others:0},malta:{wide:!0,"":1,"":1,others:0},noldo:{wide:!0,"":1,"":1,others:0},nwalme:{wide:!0,"":1,"":1,others:0},ore:{e:3,o:3,u:3,"":3,"":3,others:1},vala:{e:3,o:3,u:3,"":3,"":3,others:1},anna:{e:3,o:3,u:3,"":2,"":2,others:1},wilya:{e:3,o:3,u:3,"":3,"":3,others:1},romen:{e:3,o:3,u:3,"":2,"":2,y:3,"o-below":null,"i-below":3,others:1},arda:{a:1,e:3,i:1,o:3,u:3,"":1,"":2,"":2,y:3,"o-below":null,"i-below":3,others:0},lambe:{wide:!0,e:1,y:4,"":1,"":1,"o-below":null,"i-below":4,others:0},alda:{wide:!0,"o-below":null,others:1},silme:{y:3,"o-below":2,"i-below":2,others:null},"silme-nuquerna":{e:3,o:3,u:3,"":3,"":3,y:null,"o-below":null,"i-below":null,others:1},esse:{y:null,others:null},"esse-nuquerna":{e:3,o:3,u:3,"":3,"":3,others:1},hyarmen:3,"hwesta-sindarinwa":{o:2,u:2,"":1,"":2,others:0},yanta:{e:3,o:3,u:3,"":2,"":2,others:1},ure:{e:3,o:3,u:3,"":3,"":3,others:1},halla:{"i-below":3,others:null},"short-carrier":3,"long-carrier":{y:null,"o-below":null,"i-below":null,others:3},"round-carrier":3,"tinco-extended":3,"parma-extended":3,"calma-extended":{o:3,u:7,"":2,"":2,others:1},"quesse-extended":{o:0,u:7,others:1},"ando-extended":{wide:!0,e:1,o:2,"":1,"":1,others:0},"umbar-extended":{wide:!0,e:1,o:2,"":1,"":1,others:0},"anga-extended":{wide:!0,e:1,"":1,"":1,others:0},"ungwe-extended":{wide:!0,e:1,o:1,"":1,"":1,others:0}};function l(t,e){var n=(e=e||{}).plain||!1,r=t.tengwa||"anna",o=[];t.above&&o.push(t.above),t.below&&o.push(t.below),t.tildeBelow&&o.push("tilde-below"),t.tildeAbove&&o.push("tilde-above"),t.following&&o.push(t.following);var i=a[r]+o.map(function(t){return c(r,t)}).join("");return t.errors&&!n&&(i='<abbr class="error" title="'+t.errors.join("\n").replace(/"/g,"&quot;")+'">'+i+"</abbr>"),i}function c(t,e){var n=function(t,e){if(!u[e])return null;if(u[e].special)return u[e][t]||null;if(-1!==r.barsAndTildes.indexOf(e))return"lambe"===t||"alda"===t&&u[e].length>=2?2:s[t].wide?0:1;return null==s[t]?null:null===s[t][e]?null:null!=s[t][e]?s[t][e]:null!=s[t].others?s[t].others:s[t]}(t,e);return null==n?null:u[e][t]||u[e][n]||""}e.transcribe=function(t,e){var n=(e=e||{}).block||!1,r=n?"<p>":"",o=n?"</p>":"";return t.map(function(t){return t.map(function(t){return r+t.map(function(t){return t.map(function(t){return t.map(function(t){return l(t,e)}).join("")}).join(" ")}).join("<br>\n")+o}).join("\n\n")}).join("\n\n\n")},e.transcribeColumn=l,e.tehtaForTengwa=c,e.makeColumn=function(t,n){return i(e,t,n)}},function(t,e){function n(t,e){return t.split(";").map(function(t){var n=t.split(":"),r=n.shift(),o=n.length?n.shift().split(","):[],i=e(r);return o.forEach(function(t){"tilde-above"===t?i.addTildeAbove():"tilde-below"===t?i.addTildeBelow():"y"===t?i.addBelow("y"):"s"===t||"s-inverse"===t||"s-extended"===t||"s-flourish"===t?"s"!==t||"calma"!==r&&"quesse"!==r?i.addFollowing(t,"s"):i.addBelow(t,"s"):i.addAbove(t,"s")}),i})}e.encode=function(t){return t.map(function(t){return t.map(function(t){return t.map(function(t){return t.map(function(t){return t.map(function(t){var e=[];return t.above&&e.push(t.above),t.below&&e.push(t.below),t.following&&e.push(t.following),t.tildeAbove&&e.push("tilde-above"),t.tildeBelow&&e.push("tilde-below"),e.length?t.tengwa+":"+e.join(","):t.tengwa}).join(";")}).join(" ")}).join("\n")}).join("\n\n")}).join("\n\n\n")},e.decode=function(t,e){return t.split("\n\n\n").map(function(t){return t.split("\n\n").map(function(t){return t.split("\n").map(function(t){return t.split(" ").map(function(t){return n(t,e)})})})})},e.decodeWord=n},function(t,e,n){var r=n(7);t.exports=function(t,e){var n=r.makeDelimitedParser(t,a),o=r.makeDelimitedParser(n,l),i=r.makeDelimitedParser(o,l),u=r.makeDelimitedParser(i,c);return r.makeParser(function(t,n){return n=e(n),u(t,n)})};var o=r.makeExpect(" "),i=r.makeParseAny(o),a=r.makeParseSome(o),u=r.makeExpect("\n"),s=r.makeParseSome(u);function l(t){return i(function(){return u(function(){return i(t)})})}function c(t){return i(function(){return s(function(){return i(t)})})}},function(t,e,n){n(7);var r=n(66),o=n(67);Array.prototype;t.exports=function(t){return function(t){return function e(n){return t=t(n.toLowerCase()),e}}(i(t))};var i=o(r({k:"c",x:"cs",q:"cw",qu:"cw",p:"p",ph:"f",b:"b",bh:"v","":"","":"","":"","":"","":""}),function(t){return function(e){return Array.prototype.reduce.call(t,function(t,e){return t(e)},e)}},function(t){return i(t)},function(t){return function(e){return i(t(e))}})},function(t,e,n){var r=n(7);Array.prototype;t.exports=function(t,e){return o(function(n){return n?function(t,e,n){return r.countPrimes(function(r){return t(function(t,e,n){var r,o,i=n.duodecimal,a=n.font.makeColumn;0==e?o=i?12:10:(o=i?10:12,r=e>1);var u=parseInt(t,10);return(t=u.toString(o).split("")).map(function(t){var e=a(""+parseInt(t,12));return r&&e.addError("Numbers can only be parsed in either decimal or dudecimal."),e})}(e,r,n))})}(t,n.join(""),e):t()})};var o=r.makeParseSome(function(t){return function(e){return""!==e&&-1!=="0123456789".indexOf(e)?t(e):t()(e)}})},function(t,e,n){"use strict";n(27);var r=n(2),o=n(28),i=n(11);t.exports=Array;var a=Array.prototype.splice,u=Array.prototype.slice;function s(t,e){Object.defineProperty(Array.prototype,t,{value:e,writable:!0,configurable:!0,enumerable:!1})}function l(t,e,n){this.array=t,this.start=null==e?0:e,this.end=n}Array.empty=[],Object.freeze&&Object.freeze(Array.empty),Array.from=function(t){var e=[];return e.addEach(t),e},Array.unzip=function(t){for(var e=[],n=1/0,r=0;r<t.length;r++){var o=t[r];t[r]=o.toArray(),o.length<n&&(n=o.length)}for(r=0;r<t.length;r++){o=t[r];for(var i=0;i<o.length;i++)i<n&&i in o&&(e[i]=e[i]||[],e[i][r]=o[i])}return e},s("addEach",r.prototype.addEach),s("deleteEach",r.prototype.deleteEach),s("toArray",r.prototype.toArray),s("toObject",r.prototype.toObject),s("all",r.prototype.all),s("any",r.prototype.any),s("min",r.prototype.min),s("max",r.prototype.max),s("sum",r.prototype.sum),s("average",r.prototype.average),s("only",r.prototype.only),s("flatten",r.prototype.flatten),s("zip",r.prototype.zip),s("enumerate",r.prototype.enumerate),s("group",r.prototype.group),s("sorted",r.prototype.sorted),s("reversed",r.prototype.reversed),s("constructClone",function(t){var e=new this.constructor;return e.addEach(t),e}),s("has",function(t,e){return-1!==this.find(t,e)}),s("get",function(t,e){if(+t!==t)throw new Error("Indicies must be numbers");return!t in this?e:this[t]}),s("set",function(t,e){return this[t]=e,!0}),s("add",function(t){return this.push(t),!0}),s("delete",function(t,e){var n=this.find(t,e);return-1!==n&&(this.splice(n,1),!0)}),s("deleteAll",function(t,e){e=e||this.contentEquals||Object.equals;for(var n=0,r=0;r<this.length;)e(t,this[r])?(this.swap(r,1),n++):r++;return n}),s("find",function(t,e){e=e||this.contentEquals||Object.equals;for(var n=0;n<this.length;n++)if(n in this&&e(t,this[n]))return n;return-1}),s("findLast",function(t,e){e=e||this.contentEquals||Object.equals;var n=this.length;do{if(--n in this&&e(this[n],t))return n}while(n>0);return-1}),s("swap",function(t,e,n){var r,o,i,s,l;if(t>this.length&&(this.length=t),void 0!==n){if(r=[t,e],Array.isArray(n)||(n=u.call(n)),i=0,(o=n.length)<1e3){for(;i<o;i++)r[i+2]=n[i];return a.apply(this,r)}for(l=a.apply(this,r);i<o;){for(r=[t+i,0],s=2;s<1002&&i<o;s++,i++)r[s]=n[i];a.apply(this,r)}return l}return void 0!==e?a.call(this,t,e):void 0!==t?a.call(this,t):[]}),s("peek",function(){return this[0]}),s("poke",function(t){this.length>0&&(this[0]=t)}),s("peekBack",function(){if(this.length>0)return this[this.length-1]}),s("pokeBack",function(t){this.length>0&&(this[this.length-1]=t)}),s("one",function(){for(var t in this)if(Object.owns(this,t))return this[t]}),Array.prototype.clear||s("clear",function(){return this.length=0,this}),s("compare",function(t,e){var n,r,i;if(e=e||Object.compare,this===t)return 0;if(!t||!Array.isArray(t))return o.prototype.compare.call(this,t,e);for(r=Math.min(this.length,t.length),n=0;n<r;n++)if(n in this){if(!(n in t))return-1;if(i=e(this[n],t[n]))return i}else if(n in t)return 1;return this.length-t.length}),s("equals",function(t,e){e=e||Object.equals;var n=0,r=this.length;if(this===t)return!0;if(!t||!Array.isArray(t))return o.prototype.equals.call(this,t);if(r!==t.length)return!1;for(;n<r;++n)if(n in this){if(!(n in t))return!1;if(!e(this[n],t[n]))return!1}else if(n in t)return!1;return!0}),s("clone",function(t,e){if(null==t)t=1/0;else if(0===t)return this;if((e=e||new i).has(this))return e.get(this);var n=new Array(this.length);for(var r in e.set(this,n),this)n[r]=Object.clone(this[r],t-1,e);return n}),s("iterate",function(t,e){return new l(this,t,e)}),s("Iterator",l),l.prototype.next=function(){if(this.start===(null==this.end?this.array.length:this.end))throw StopIteration;return this.array[this.start++]}},function(t,e){t.exports=Function,Function.noop=function(){},Function.identity=function(t){return t},Function.by=function(t,e){e=e||Object.compare,t=t||Function.identity;var n=function(n,r){return e(t(n),t(r))};return n.compare=e,n.by=t,n},Function.get=function(t){return function(e){return Object.get(e,t)}}},function(t,e,n){var r=n(8);function o(){throw new Error("Can't construct. GenericOrder is a mixin.")}t.exports=o,o.prototype.equals=function(t,e){if(e=e||this.contentEquals||r.equals,this===t)return!0;if(!t)return!1;return this.length===t.length&&this.zip(t).every(function(t){return e(t[0],t[1])})},o.prototype.compare=function(t,e){if(e=e||this.contentCompare||r.compare,this===t)return 0;if(!t)return 1;var n=Math.min(this.length,t.length),o=this.zip(t).reduce(function(t,r,o){return 0===t?o>=n?t:e(r[0],r[1]):t},0);return 0===o?this.length-t.length:o},o.prototype.toJSON=function(){return this.toArray()}},function(t,e){if(!RegExp.escape){var n=/[-[\]{}()*+?.\\^$|,#\s]/g;RegExp.escape=function(t){return t.replace(n,"\\$&")}}},function(t,e,n){"use strict";var r=n(8),o=n(16),i=n(1);function a(){throw new Error("Can't construct. GenericMap is a mixin.")}function u(t,e){this.key=t,this.value=e}t.exports=a,r.addEach(a.prototype,o.prototype),r.addEach(a.prototype,i.prototype),a.prototype.isMap=!0,a.prototype.addEach=function(t){if(t&&r(t)===t)if("function"==typeof t.forEach)!0===t.isMap?t.forEach(function(t,e){this.set(e,t)},this):t.forEach(function(t){this.set(t[0],t[1])},this);else if("number"==typeof t.length)for(var e=0;e<t.length;e++)this.add(t[e],e);else r.keys(t).forEach(function(e){this.set(e,t[e])},this);else if(t&&"number"==typeof t.length)for(e=0;e<t.length;e++)this.add(t[e],e);return this},a.prototype.get=function(t,e){var n=this.store.get(new this.Item(t));return n?n.value:arguments.length>1?e:this.getDefault(t)},a.prototype.set=function(t,e){var n=new this.Item(t,e),r=this.store.get(n),o=!1;return r?(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,r.value),r.value=e,this.dispatchesMapChanges&&this.dispatchMapChange(t,e)):(this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,void 0),this.store.add(n)&&(this.length++,o=!0),this.dispatchesMapChanges&&this.dispatchMapChange(t,e)),o},a.prototype.add=function(t,e){return this.set(e,t)},a.prototype.has=function(t){return this.store.has(new this.Item(t))},a.prototype.delete=function(t){var e=new this.Item(t);if(this.store.has(e)){var n=this.store.get(e).value;return this.dispatchesMapChanges&&this.dispatchBeforeMapChange(t,n),this.store.delete(e),this.length--,this.dispatchesMapChanges&&this.dispatchMapChange(t,void 0),!0}return!1},a.prototype.clear=function(){var t;this.dispatchesMapChanges&&(this.forEach(function(t,e){this.dispatchBeforeMapChange(e,t)},this),t=this.keys()),this.store.clear(),this.length=0,this.dispatchesMapChanges&&t.forEach(function(t){this.dispatchMapChange(t)},this)},a.prototype.reduce=function(t,e,n){return this.store.reduce(function(e,r){return t.call(n,e,r.value,r.key,this)},e,this)},a.prototype.reduceRight=function(t,e,n){return this.store.reduceRight(function(e,r){return t.call(n,e,r.value,r.key,this)},e,this)},a.prototype.keys=function(){return this.map(function(t,e){return e})},a.prototype.values=function(){return this.map(Function.identity)},a.prototype.entries=function(){return this.map(function(t,e){return[e,t]})},a.prototype.items=function(){return this.entries()},a.prototype.equals=function(t,e){return e=e||r.equals,this===t||(t&&"function"==typeof t.every?t.length===this.length&&t.every(function(t,n){return e(this.get(n),t)},this):r.keys(t).length===this.length&&r.keys(t).every(function(n){return e(this.get(n),t[n])},this))},a.prototype.toJSON=function(){return this.entries()},a.prototype.Item=u,u.prototype.equals=function(t){return r.equals(this.key,t.key)&&r.equals(this.value,t.value)},u.prototype.compare=function(t){return r.compare(this.key,t.key)}},function(t,e,n){"use strict";function r(){}t.exports=r,r.ascii={intersection:"+",through:"-",branchUp:"+",branchDown:"+",fromBelow:".",fromAbove:"'",fromBoth:"+",strafe:"|"},r.unicodeRound={intersection:"",through:"",branchUp:"",branchDown:"",fromBelow:"",fromAbove:"",fromBoth:"",strafe:""},r.unicodeSharp={intersection:"",through:"",branchUp:"",branchDown:"",fromBelow:"",fromAbove:"",fromBoth:"",strafe:""}},function(t,e,n){"use strict";n(5);var r=n(19).precedence,o=n(19).operatorTypes;n(19).operatorTokens;function i(t,e){return i.semantics.stringify(t,e)}function a(t){return function(e,n,r){var o=t+"{"+r(e.args[1],n)+"}";return"value"===e.args[0].type?o:r(e.args[0],n)+"."+o}}t.exports=i,i.semantics={makeBlockStringifier:a,stringify:function(t,e,n){var o,i=this.stringify.bind(this),a=this.stringifiers;function u(t){var n=i(t,e);return n||"this"}if(a[t.type])o=a[t.type](t,e,i);else if(t.inline)o="&"+t.type+"("+t.args.map(u).join(", ")+")";else{var s;1===t.args.length&&"mapBlock"===t.args[0].type?(s=t.type+"{"+i(t.args[0].args[1],e)+"}",t=t.args[0]):s=t.type+"("+t.args.slice(1).map(u).join(", ")+")",o="value"===t.args[0].type?s:i(t.args[0],e)+"."+s}return!n||n.type===t.type&&"if"!==n.type||r.get(n.type).has(t.type)?o:"("+o+")"},stringifiers:{value:function(t,e,n){return""},literal:function(t,e,n){return"string"==typeof t.value?"'"+t.value.replace("'","\\'")+"'":""+t.value},parameters:function(t,e,n){return"$"},record:function(t,e,n){return"{"+Object.map(t.args,function(t,r){return r+": "+("value"===t.type?"this":n(t,e))}).join(", ")+"}"},tuple:function(t,e,n){return"["+Object.map(t.args,function(t){return"value"===t.type?"this":n(t)}).join(", ")+"]"},component:function(t,e){var n;return e&&e.components&&t.component?e.components.getObjectLabel?n=e.components.getObjectLabel(t.component):e.components.getLabelForObject&&(n=e.components.getLabelForObject(t.component)):n=t.label,"@"+n},element:function(t){return"#"+t.id},mapBlock:a("map"),filterBlock:a("filter"),someBlock:a("some"),everyBlock:a("every"),sortedBlock:a("sorted"),sortedSetBlock:a("sortedSet"),groupBlock:a("group"),groupMapBlock:a("groupMap"),minBlock:a("min"),maxBlock:a("max"),property:function(t,e,n){return"value"===t.args[0].type?"string"==typeof t.args[1].value?t.args[1].value:"literal"===t.args[1].type?"."+t.args[1].value:"this["+n(t.args[1],e)+"]":"parameters"===t.args[0].type?"$"+t.args[1].value:"literal"===t.args[1].type&&/^[\w\d_]+$/.test(t.args[1].value)?n(t.args[0],e,{type:"scope"})+"."+t.args[1].value:n(t.args[0],{type:"scope"},e)+"["+n(t.args[1],e)+"]"},with:function(t,e,n){var r=n(t.args[1],e,t);return n(t.args[0],e)+"."+r},not:function(t,e,n){return"equals"===t.args[0].type?n(t.args[0].args[0],e,{type:"equals"})+" != "+n(t.args[0].args[1],e,{type:"equals"}):"!"+n(t.args[0],e,t)},neg:function(t,e,n){return"-"+n(t.args[0],e,t)},toNumber:function(t,e,n){return"+"+n(t.args[0],e,t)},parent:function(t,e,n){return"^"+n(t.args[0],e,t)},if:function(t,e,n){return n(t.args[0],e,t)+" ? "+n(t.args[1],e)+" : "+n(t.args[2],e)},event:function(t,e,n){return t.when+" "+t.event+" -> "+n(t.listener,e)},binding:function(t,e,n,r){var o=r(e.args[0],n)+" "+t+" "+r(e.args[1],n),i="",a=e.descriptor;if(a)for(var u in a)i+=", "+u+": "+r(a[u],n);return o+i},bind:function(t,e,n){return this.binding("<-",t,e,n)},bind2:function(t,e,n){return this.binding("<->",t,e,n)},assign:function(t,e,n){return n(t.args[0],e)+": "+n(t.args[1],e)},block:function(t,e,n){var r="@"+t.label;return t.connection&&("prototype"===t.connection?r+=" < ":"object"===t.connection&&(r+=" : "),r+=n({type:"literal",value:t.module}),t.exports&&"value"!==t.exports.type&&(r+=" "+n(t.exports,e))),r+" {\n"+t.statements.map(function(t){return"    "+n(t,e)+";\n"}).join("")+"}\n"},sheet:function(t,e,n){return"\n"+t.blocks.map(function(t){return n(t,e)}).join("\n")+"\n"}}},o.forEach(function(t,e){i.semantics.stringifiers[e]=function(e,n,r){return e.args.map(function(t){return r(t,n,e)}).join(" "+t+" ").trim()}})},function(t,e,n){n(0);n(13);var r,o=n(1),i=n(4),a=n(16),u=(Array.prototype.splice,Array.prototype.slice),s=(Array.prototype.reverse,Array.prototype.sort),l=Array.prototype.swap,c=Array.prototype.push;function h(t){for(var e in t)Object.defineProperty(Array.prototype,e,{value:t[e],writable:!0,configurable:!0,enumerable:!1})}r={}.__proto__===Object.prototype?function(){this.__proto__=p}:function(){Object.defineProperties(this,f)},Object.defineProperty(Array.prototype,"makeObservable",{value:r,writable:!0,configurable:!0,enumerable:!1}),h(o.prototype),Object.defineProperty(Array.prototype,"makePropertyObservable",{value:function(){},writable:!0,configurable:!0,enumerable:!1}),h(i.prototype),h(a.prototype);var f={isObservable:{value:!0,writable:!0,configurable:!0},makeObservable:{value:Function.noop,writable:!0,configurable:!0},reverse:{value:function(){var t=this.constructClone(this);return t.reverse(),this.swap(0,this.length,t),this},writable:!0,configurable:!0},sort:{value:function(){var t,e;for(this.dispatchBeforeRangeChange(this,this,0),t=0,e=this.length;t<e;t++)o.dispatchBeforeOwnPropertyChange(this,t,this[t]),this.dispatchBeforeMapChange(t,this[t]);for(s.apply(this,arguments),t=0,e=this.length;t<e;t++)o.dispatchOwnPropertyChange(this,t,this[t]),this.dispatchMapChange(t,this[t]);return this.dispatchRangeChange(this,this,0),this},writable:!0,configurable:!0},_dispatchBeforeOwnPropertyChange:{value:function(t,e){for(var n=t,r=t+e;n<r;n++)o.dispatchBeforeOwnPropertyChange(this,n,this[n]),this.dispatchBeforeMapChange(n,this[n])}},_dispatchOwnPropertyChange:{value:function(t,e){for(var n=t,r=t+e;n<r;n++)this.dispatchOwnPropertyChange(n,this[n]),this.dispatchMapChange(n,this[n])}},swap:{value:function(t,e,n){var r,i,a,s;if(n?Array.isArray(n)||(n=u.call(n)):n=Array.empty,t<0)t=this.length+t;else if(t>this.length){var c=t-this.length,h=Array(c+n.length);for(i=0,a=c;i<n.length;i++,a++)i in n&&(h[a]=n[i]);n=h,t=this.length}if(0===e){if(0===n.length)return[];s=Array.empty}else s=u.call(this,t,t+e);var f=n.length-s.length,p=this.length,d=Math.max(this.length+f,t+n.length),g=Math.max(p,d);f&&o.dispatchBeforeOwnPropertyChange(this,"length",this.length),this.dispatchBeforeRangeChange(n,s,t),0===f?this._dispatchBeforeOwnPropertyChange(t,n.length):(r=o.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(t,g-t),t>p&&(this.length=t);var v=l.call(this,t,e,n);return 0===f?this._dispatchOwnPropertyChange(t,n.length):r&&this._dispatchOwnPropertyChange(t,g-t),this.dispatchRangeChange(n,s,t),f&&this.dispatchOwnPropertyChange("length",this.length),v},writable:!0,configurable:!0},splice:{value:function(t,e){return t>this.length&&(t=this.length),this.swap.call(this,t,e,u.call(arguments,2))},writable:!0,configurable:!0},set:{value:function(t,e){return this.swap(t,t>=this.length?0:1,[e]),!0},writable:!0,configurable:!0},shift:{value:function(){return this.splice(0,1)[0]},writable:!0,configurable:!0},pop:{value:function(){if(this.length)return this.splice(this.length-1,1)[0]},writable:!0,configurable:!0},push:{value:function(t){var e,n,r=this.length,i=arguments.length;e=1===i?[arguments[0]]:Array.apply(null,arguments),i>0&&(o.dispatchBeforeOwnPropertyChange(this,"length",r),this.dispatchBeforeRangeChange(e,Array.empty,r),(n=o.hasOwnPropertyChangeDescriptor(this))&&this._dispatchBeforeOwnPropertyChange(r,i)),c.apply(this,arguments),i>0&&(n&&this._dispatchOwnPropertyChange(r,i),this.dispatchRangeChange(e,Array.empty,r),this.dispatchOwnPropertyChange("length",this.length))},writable:!0,configurable:!0},unshift:{value:function(t){if(1===arguments.length)return this.splice(0,0,t);var e=u.call(arguments);return this.swap(0,0,e)},writable:!0,configurable:!0},clear:{value:function(){return this.splice(0,this.length)},writable:!0,configurable:!0}},p=Object.create(Array.prototype,f);e.observableArrayProperties=f},function(t,e,n){"use strict";t.exports=s;n(0);var r=n(2),o=n(17),i=n(1),a=n(4),u=n(31);function s(t,e,n,r){if(!(this instanceof s))return new s(t,e,n,r);this.contentEquals=e||Object.equals,this.contentCompare=n||Object.compare,this.getDefault=r||Function.noop,this.root=null,this.length=0,this.addEach(t)}function l(t){this.value=t,this.left=null,this.right=null,this.length=1}function c(t,e,n){if(this.set=t,this.prev=null,this.end=n,e){var r=this.set.findLeastGreaterThanOrEqual(e);r&&(this.set.splay(r.value),this.prev=r.getPrevious())}}s.SortedSet=s,Object.addEach(s.prototype,r.prototype),Object.addEach(s.prototype,o.prototype),Object.addEach(s.prototype,i.prototype),Object.addEach(s.prototype,a.prototype),s.prototype.isSorted=!0,s.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentCompare,this.getDefault)},s.prototype.has=function(t,e){if(e)throw new Error("SortedSet#has does not support second argument: equals");return!!this.root&&(this.splay(t),this.contentEquals(t,this.root.value))},s.prototype.get=function(t,e){if(e)throw new Error("SortedSet#get does not support second argument: equals");return this.root&&(this.splay(t),this.contentEquals(t,this.root.value))?this.root.value:this.getDefault(t)},s.prototype.add=function(t){var e=new this.Node(t);if(!this.root)return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([t],[],0),this.root=e,this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([t],[],0),!0;if(this.splay(t),!this.contentEquals(t,this.root.value)){var n=this.contentCompare(t,this.root.value);if(0===n)throw new Error("SortedSet cannot contain incomparable but inequal values: "+t+" and "+this.root.value);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([t],[],this.root.index),n<0?(e.right=this.root,e.left=this.root.left,this.root.left=null,this.root.touch()):(e.left=this.root,e.right=this.root.right,this.root.right=null,this.root.touch()),e.touch(),this.root=e,this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([t],[],this.root.index),!0}return!1},s.prototype.delete=function(t,e){if(e)throw new Error("SortedSet#delete does not support second argument: equals");if(this.root&&(this.splay(t),this.contentEquals(t,this.root.value))){var n=this.root.index;if(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[t],n),this.root.left){var r=this.root.right;this.root=this.root.left,this.splay(t),this.root.right=r}else this.root=this.root.right;return this.length--,this.root&&this.root.touch(),this.dispatchesRangeChanges&&this.dispatchRangeChange([],[t],n),!0}return!1},s.prototype.indexOf=function(t,e){if(e)throw new Error("SortedSet#indexOf does not support second argument: startIndex");return this.root&&(this.splay(t),this.contentEquals(t,this.root.value))?this.root.index:-1},s.prototype.find=function(t,e,n){if(e)throw new Error("SortedSet#find does not support second argument: equals");if(n)throw new Error("SortedSet#find does not support third argument: index");if(this.root&&(this.splay(t),this.contentEquals(t,this.root.value)))return this.root},s.prototype.findGreatest=function(t){if(this.root){for(t=t||this.root;t.right;)t=t.right;return t}},s.prototype.findLeast=function(t){if(this.root){for(t=t||this.root;t.left;)t=t.left;return t}},s.prototype.findGreatestLessThanOrEqual=function(t){if(this.root)return this.splay(t),this.contentCompare(this.root.value,t)>0?this.root.getPrevious():this.root},s.prototype.findGreatestLessThan=function(t){if(this.root)return this.splay(t),this.contentCompare(this.root.value,t)>=0?this.root.getPrevious():this.root},s.prototype.findLeastGreaterThanOrEqual=function(t){if(this.root)return this.splay(t),this.contentCompare(this.root.value,t)>=0?this.root:this.root.getNext()},s.prototype.findLeastGreaterThan=function(t){if(this.root)return this.splay(t),this.contentCompare(this.root.value,t)<=0?this.root.getNext():this.root},s.prototype.pop=function(){if(this.root){var t=this.findGreatest();return this.delete(t.value),t.value}},s.prototype.shift=function(){if(this.root){var t=this.findLeast();return this.delete(t.value),t.value}},s.prototype.push=function(){this.addEach(arguments)},s.prototype.unshift=function(){this.addEach(arguments)},s.prototype.slice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var n=[];if(this.root)for(this.splayIndex(t);this.root.index<e&&(n.push(this.root.value),this.root.right);)this.splay(this.root.getNext().value);return n},s.prototype.splice=function(t,e){return this.swap(t,e,Array.prototype.slice.call(arguments,2))},s.prototype.swap=function(t,e,n){if(void 0===t&&void 0===e)return[];(t=t||0)<0&&(t+=this.length),void 0===e&&(e=1/0);var r=[];if(this.root){this.splayIndex(t);for(var o=0;o<e;o++){r.push(this.root.value);var i=this.root.getNext();if(this.delete(this.root.value),!i)break;this.splay(i.value)}}return this.addEach(n),r},s.prototype.splay=function(t){var e,n,r,o,i,a;if(this.root){for(e=n=r=new this.Node,a=new this.Node,i=this.root;;){var u=this.contentCompare(t,i.value);if(u<0){if(!i.left)break;if(this.contentCompare(t,i.left.value)<0&&(o=i.left,i.left=o.right,i.touch(),o.right=i,o.touch(),!(i=o).left))break;(o=new l).right=i,o.left=a.left,a.left=o,r.left=i,r.touch(),r=i,i=i.left}else{if(!(u>0))break;if(!i.right)break;if(this.contentCompare(t,i.right.value)>0&&(o=i.right,i.right=o.left,i.touch(),o.left=i,o.touch(),!(i=o).right))break;(o=new l).left=i,o.right=a.right,a.right=o,n.right=i,n.touch(),n=i,i=i.right}}for(n.right=i.left,n.touch(),r.left=i.right,r.touch(),i.left=e.right,i.right=e.left;a.left;)a.left.right.touch(),a.left=a.left.left;for(;a.right;)a.right.left.touch(),a.right=a.right.right;i.touch(),this.root=i}},s.prototype.splayIndex=function(t){if(this.root){for(var e=this.root,n=this.root.index;n!==t;)if(n>t&&e.left)n-=1+((e=e.left).right?e.right.length:0);else{if(!(n<t&&e.right))break;n+=1+((e=e.right).left?e.left.length:0)}return this.splay(e.value),this.root.index===t}return!1},s.prototype.reduce=function(t,e,n){return this.root&&(e=this.root.reduce(t,e,0,n,this)),e},s.prototype.reduceRight=function(t,e,n){return this.root&&(e=this.root.reduceRight(t,e,this.length-1,n,this)),e},s.prototype.min=function(t){var e=this.findLeast(t);if(e)return e.value},s.prototype.max=function(t){var e=this.findGreatest(t);if(e)return e.value},s.prototype.one=function(){return this.min()},s.prototype.clear=function(){var t;this.dispatchesRangeChanges&&(t=this.toArray(),this.dispatchBeforeRangeChange([],t,0)),this.root=null,this.length=0,this.dispatchesRangeChanges&&this.dispatchRangeChange([],t,0)},s.prototype.iterate=function(t,e){return new this.Iterator(this,t,e)},s.prototype.Iterator=c,s.prototype.summary=function(){return this.root?this.root.summary():"()"},s.prototype.log=function(t,e,n,r){t=t||u.unicodeRound,e=e||this.logNode,n||(n=console.log,r=console),n=n.bind(r),this.root&&this.root.log(t,e,n,n)},s.prototype.logNode=function(t,e,n){e(" "+t.value)},s.logCharsets=u,s.prototype.Node=l,l.prototype.reduce=function(t,e,n,r,o,i){if(i=i||0,this.left){var a=this.left.length;e=this.left.reduce(t,e,n,r,o,i+1),n+=a}return e=t.call(r,e,this.value,n,o,this,i),n+=1,this.right&&(e=this.right.reduce(t,e,n,r,o,i+1)),e},l.prototype.reduceRight=function(t,e,n,r,o,i){return i=i||0,this.right&&(e=this.right.reduce(t,e,n,r,o,i+1),n-=this.right.length),e=t.call(r,e,this.value,this.value,o,this,i),n-=1,this.left&&(e=this.left.reduce(t,e,n,r,o,i+1)),e},l.prototype.touch=function(){this.length=1+(this.left?this.left.length:0)+(this.right?this.right.length:0),this.index=this.left?this.left.length:0},l.prototype.checkIntegrity=function(){var t=1;if(t+=this.left?this.left.checkIntegrity():0,t+=this.right?this.right.checkIntegrity():0,this.length!==t)throw new Error("Integrity check failed: "+this.summary());return t},l.prototype.getNext=function(){var t=this;if(t.right){for(t=t.right;t.left;)t=t.left;return t}},l.prototype.getPrevious=function(){var t=this;if(t.left){for(t=t.left;t.right;)t=t.right;return t}},l.prototype.summary=function(){var t=this.value||"-";return t+=" <"+this.length,this.left||this.right?"("+t+" "+(this.left?this.left.summary():"()")+", "+(this.right?this.right.summary():"()")+")":"("+t+")"},l.prototype.log=function(t,e,n,r){var o,i,a,u,s=this;o=this.left&&this.right?t.intersection:this.left?t.branchUp:this.right?t.branchDown:t.through,this.left&&this.left.log(t,e,function(e){i?r(t.strafe+" "+e):(i=!0,r(t.fromBelow+t.through+e))},function(t){r("  "+t)}),e(this,function(e){a?n((s.right?t.strafe:" ")+e):(a=!0,n(o+e))},function(e){r((s.left?t.strafe:" ")+e)}),this.right&&this.right.log(t,e,function(e){u?n("  "+e):(u=!0,n(t.fromAbove+t.through+e))},function(e){n(t.strafe+" "+e)})},c.prototype.next=function(){var t;if(!(t=this.prev?this.set.findLeastGreaterThan(this.prev.value):this.set.findLeast()))throw StopIteration;if(void 0!==this.end&&this.set.contentCompare(t.value,this.end)>=0)throw StopIteration;return this.prev=t,t.value}},function(t,e,n){var r=n(9),o=(n(6),n(36)),i=n(18),a={type:"value"},u={type:"literal",value:!0};function s(t){return s.semantics.compile(t)}t.exports=s,s.semantics={compilers:{property:o.makePropertyBinder,get:o.makeGetBinder,has:o.makeHasBinder,only:o.makeOnlyBinder,one:o.makeOneBinder,rangeContent:o.makeRangeContentBinder,mapContent:o.makeMapContentBinder,reversed:o.makeReversedBinder,and:o.makeAndBinder,or:o.makeOrBinder},compile:function(t){var e=this.compilers;if("default"===t.type)return this.compile(t.args[0]);if("literal"===t.type){if(null==t.value)return Function.noop;throw new Error("Can't bind to literal: "+t.value)}if("equals"===t.type){var n=this.compile(t.args[0]),s=r(t.args[1]);return o.makeEqualityBinder(n,s)}if("if"===t.type){var l=r(t.args[0]),c=this.compile(t.args[1]),h=this.compile(t.args[2]);return o.makeConditionalBinder(l,c,h)}if("and"===t.type||"or"===t.type){var f=i(t.args[0],a),p=i(t.args[1],a),d=(n=this.compile(f[0]),this.compile(p[0])),g=r(f[1]),v=r(p[1]),m=r(t.args[0]);s=r(t.args[1]);return this.compilers[t.type](n,d,m,s,g,v)}if("everyBlock"===t.type){var y=r(t.args[0]),b=i(t.args[1],u),w=this.compile(b[0]),O=r(b[1]);return o.makeEveryBlockBinder(y,w,O)}if("rangeContent"===t.type){var C=r(t.args[0]);try{A=this.compile(t.args[0])}catch(t){A=Function.noop}return o.makeRangeContentBinder(C,A)}if("defined"===t.type){var A=this.compile(t.args[0]);return o.makeDefinedBinder(A)}if("parent"===t.type){A=this.compile(t.args[0]);return o.makeParentBinder(A)}if("with"===t.type){C=r(t.args[0]),A=this.compile(t.args[1]);return o.makeWithBinder(C,A)}if(e.hasOwnProperty(t.type)){var E=t.args.map(r,r.semantics);return e[t.type].apply(null,E)}throw new Error("Can't compile binder for "+JSON.stringify(t.type))}}},function(t,e,n){var r=n(3),o=n(6),i=o.autoCancelPrevious,a=o.observeRangeChange,u=o.cancelEach,s=o.makeNotObserver,l=o.makeOrObserver,c=o.makeAndObserver,h=(o.observeValue,o.makeLiteralObserver()),f=new r(!0),p=new r(!1);function d(){return new Error("").stack.replace(/^.*\n.*\n/,"\n")}e.bindProperty=v;var g=v;function v(t,e,n,r,o,a){return n(i(function(n){if(!o.isActive)try{o.isActive=!0,a&&console.log("SET",a.targetPath,"TO",n,"ON",t,"BECAUSE",a.sourcePath,d()),Array.isArray(t)&&e>>>0===e?t.set(e,n):t[e]=n}finally{o.isActive=!1}}),r)}e.makePropertyBinder=function(t,e){return function(n,r,o,a,u){return e(i(function(e){if(null!=e)return t(i(function(t){if(null!=t)return t.bindProperty?t.bindProperty(e,n,r,a,u):g(t,e,n,r,a,u)}),o)}),o)}},e.bindGet=y;var m=y;function y(t,e,n,r,o,a){return n(i(function(n){if(!o.isActive)try{o.isActive=!0,a&&console.log("SET FOR KEY",e,"TO",n,"ON",t,"BECAUSE",a.sourcePath,d()),t.set(e,n)}finally{o.isActive=!1}}),r)}function b(t){return t.getRangeChangeDescriptor&&t.getRangeChangeDescriptor().isActive}e.makeGetBinder=function(t,e){return function(n,r,o,a,u){return t(i(function(t){if(t)return e(i(function(e){if(null!=e)return m(t,e,n,r,a,u)}),o)}),o)}},e.makeHasBinder=function(t,e){return function(n,r,o,a,u){return t(i(function(t){if(t)return e(i(function(e){if(null!=e)return n(i(function(n){if(n)(t.has||t.contains).call(t,e)||(u&&console.log("ADD",e,"TO",u.targetPath,"BECAUSE",u.sourcePath,d()),t.add(e));else for(;(t.has||t.contains).call(t,e);)u&&console.log("REMOVE",e,"FROM",u.targetPath,"BECAUSE",u.sourcePath,d()),(t.remove||t.delete).call(t,e)}),r)}),o)}),o)}},e.makeEqualityBinder=function(t,e){return function(n,r,o,a,u){return n(i(function(n){if(n){u&&console.log("BIND",u.targetPath,"TO",u.sourcePath,d());t(e,r,r,a,u);return function(){u&&console.log("UNBIND",u.targetPath,"FROM",u.sourcePath,d())}}}),o)}},e.makeEveryBlockBinder=function(t,e,n){return function(r,o,s,l,c){return r(i(function(r){if(r)return t(i(function(t){if(t){var r=[],o=a(t,function(t,o,i){u(r.slice(i,i+o.length)),r.swap(i,o.length,t.map(function(t,r){var o=s.nest(t);return e(n,o,o,l,c)}))},s);return function(){u(r),o()}}}),s)}),o)}},e.makeAndBinder=function(t,e,n,r,o,a){var u=s(r),l=c(n,u);return function(n,r,u,s,c){return n(i(function(n){if(null!=n){if(n){var r=t(o,f,u,s,c),i=e(a,f,u,s,c);return function(){r(),i()}}return t(l,u,u,s,c)}}),r)}},e.makeOrBinder=function(t,e,n,r,o,a){var u=s(r),c=l(n,u);return function(n,r,u,s,l){return n(i(function(n){if(null!=n){if(n)return t(c,u,u,s,l);var r=t(o,p,u,s,l),i=e(a,p,u,s,l);return function(){r(),i()}}}),r)}},e.makeConditionalBinder=function(t,e,n){return function(r,o,a,u,s){return t(i(function(t){if(null!=t)return t?e(r,o,a,u,s):n(r,o,a,u,s)}),o)}},e.makeOnlyBinder=function(t){return function(e,n,r,o,a){return t(i(function(t){if(t)return e(i(function(e){null!=e&&(t.splice?t.splice(0,t.length,e):t.clear&&t.add&&(t.clear(),t.add(e)))}),n)}),r)}},e.makeOneBinder=function(t){return function(e,n,r,o,a){return t(i(function(t){if(t)return e(i(function(e){null!=e&&e!==t.one()&&(t.splice?t.splice(0,t.length,e):t.clear&&t.add&&(t.clear(),t.add(e)))}),n)}),r)}},e.makeRangeContentBinder=function(t,e){return function(n,r,a,u,s){return t(i(function(t){return t?n(i(function(e){if(e!==t)if(e){if(e.addRangeChangeListener)return e.addRangeChangeListener(n),n(Array.from(e),Array.from(t),0),function(){e.removeRangeChangeListener(n)}}else t.clear();function n(e,n,r){b(t)||(s&&console.log("SWAPPING",n,"FOR",e,"AT",r,"ON",s.targetPath,d()),t.swap?t.swap(r,n.length,e):t.add&&(t.remove||t.delete)&&(e.forEach(t.add,t),n.forEach(t.remove||t.delete,t)))}}),r):e(o.makeLiteralObserver([]),r,a,u,s)}),a)}},e.makeMapContentBinder=function(t){return function(e,n,r,o,a){return t(i(function(t){if(t)return e(i(function(e){if(e)return t.clear(),e.forEach(n),e.addMapChangeListener(n);function n(e,n){if(!o.isActive)try{o.isActive=!0,void 0===e?(a&&a&&console.log("DELETED",a.targetPath,"FOR KEY",n,"ON",t,"BECAUSE",a.sourcePath,d()),Array.isArray(t)?t.splice(n,1):t.delete(n)):(a&&a&&console.log("SET",a.targetPath,"FOR KEY",n,"TO",e,"ON",t,"BECAUSE",a.sourcePath,d()),t.set(n,e))}finally{o.isActive=!1}}t.clear()}),n)}),r)}},e.makeReversedBinder=function(t){return function(e,n,r,o,a){return t(i(function(t){if(t)return e(i(function(e){if(e)return e.addRangeChangeListener(n),n(e,t,0),function(){e.removeRangeChangeListener(n)};function n(e,n,r){if(!b(t)){var o=t.length-r-n.length;t.swap(o,n.length,e.reversed())}}t.clear()}),n)}),r)}},e.makeDefinedBinder=function(t){return function(e,n,r,o,a){return e(i(function(e){return e?Function.noop:t(h,n,r,o,a)}),r)}},e.makeParentBinder=function(t){return function(e,n,r,o,i){if(r.parent)return t(e,n,r.parent,o,i)}},e.makeWithBinder=function(t,e){return function(n,r,o,a,u){return t(i(function(t){if(null!=t)return e(n,r,o.nest(t),a,u)}),o)}}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(59),o=n(60),i=n(61);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=f(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),o=(t=u(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|p(e.length);return 0===(t=u(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):f(t,e);if("Buffer"===e.type&&i(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=u(t,e<0?0:0|p(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,o);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,o){var i,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var c=-1;for(i=n;i<u;i++)if(l(t,i)===l(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===s)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var h=!0,f=0;f<s;f++)if(l(t,i+f)!==l(e,f)){h=!1;break}if(h)return i}return-1}function b(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function w(t,e,n,r){return H(U(e,t.length-n),t,n,r)}function O(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function C(t,e,n,r){return O(t,e,n,r)}function A(t,e,n,r){return H(Y(e),t,n,r)}function E(t,e,n,r){return H(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function x(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,u,s,l=t[o],c=null,h=l>239?4:l>223?3:l>191?2:1;if(o+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(i=t[o+1]))&&(s=(31&l)<<6|63&i)>127&&(c=s);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(s=(15&l)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:i=t[o+1],a=t[o+2],u=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(s=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(c=s)}null===c?(c=65533,h=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=h}return function(t){var e=t.length;if(e<=B)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=B));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return l(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return h(null,t)},s.allocUnsafeSlow=function(t){return h(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):g.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,o){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(i,a),l=this.slice(r,o),c=t.slice(e,n),h=0;h<u;++h)if(l[h]!==c[h]){i=l[h],a=c[h];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return O(this,t,e,n);case"latin1":case"binary":return C(this,t,e,n);case"base64":return A(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;function P(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function j(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=I(t[i]);return o}function _(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function T(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function S(t,e,n,r,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function q(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,i){return i||q(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return i||q(t,0,n,8),o.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var o=e-t;n=new s(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},s.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||T(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),o.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),o.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),o.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),o.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||S(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);S(this,t,e,n,o-1,-o)}var i=0,a=1,u=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);S(this,t,e,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||S(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=s.isBuffer(t)?t:U(new s(t,r).toString()),u=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%u]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function I(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Y(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(58))},function(t,e){e.tengwar=[["tinco","parma","calma","quesse"],["ando","umbar","anga","ungwe"],["thule","formen","harma","hwesta"],["anto","ampa","anca","unque"],["numen","malta","noldo","nwalme"],["ore","vala","anna","wilya"],["romen","arda","lambe","alda"],["silme","silme-nuquerna","esse","esse-nuquerna"],["hyarmen","hwesta-sindarinwa","yanta","ure"],["halla","short-carrier","long-carrier","round-carrier"],["tinco-extended","parma-extended","calma-extended","quesse-extended"],["ando-extended","umbar-extended","anga-extended","ungwe-extended"]],e.tehtarAbove=["a","e","i","o","u","","","","","","w"],e.tehtarBelow=["y","s","o-below","i-below"],e.tehtarFollowing=["s-final","s-inverse","s-extended","s-flourish"],e.barsAndTildes=["tilde-above","tilde-below","tilde-high-above","tilde-far-below","bar-above","bar-below","bar-high-above","bar-far-below"],e.tehtar=[].concat(e.tehtarAbove,e.tehtarBelow,e.tehtarFollowing,e.barsAndTildes),e.aliases={vilya:"wilya",aha:"harma",gasdil:"halla"}},function(t,e){e.tengwar={tinco:"1",parma:"q",calma:"a",quesse:"z",ando:"2",umbar:"w",anga:"s",ungwe:"x",thule:"3",formen:"e",harma:"d",hwesta:"c",anto:"4",ampa:"r",anca:"f",unque:"v",numen:"5",malta:"t",noldo:"g",nwalme:"b",ore:"6",vala:"y",anna:"h",wilya:"n",romen:"7",arda:"u",lambe:"j",alda:"m",silme:"8","silme-nuquerna":"i",esse:"k","esse-nuquerna":",",hyarmen:"9","hwesta-sindarinwa":"o",yanta:"l",ure:".",halla:"","short-carrier":"`","long-carrier":"~","round-carrier":"]","tinco-extended":"!","parma-extended":"Q","calma-extended":"A","quesse-extended":"Z","ando-extended":"@","umbar-extended":"W","anga-extended":"S","ungwe-extended":"X",comma:"=","full-stop":"-","exclamation-point":"","question-mark":"","open-paren":"=","close-paren":"=","flourish-left":"","flourish-right":"",0:"",1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:""},e.tehtar={a:"#EDC",e:"$RFV",i:"%TGB",o:"^YHN",u:["&","U","J","M","","","",""],"":["","","",""],"":["","","",""],"":["","","",""],w:"",y:"","o-below":["","","","","|"],"i-below":["","","","","L"],s:{special:!0,calma:"|",quesse:"|","short-carrier":"}"},"s-final":{special:!0,tinco:"+",ando:"+",numen:"+",lambe:"_"},"s-inverse":{special:!0,tinco:""},"s-extended":{special:!0,tinco:""},"s-flourish":{special:!0,tinco:"",lambe:""},"tilde-above":"Pp","tilde-below":[":",";",""],"tilde-high-above":")0","tilde-far-below":"?/","bar-above":"{[","bar-below":['"',"'",""],"bar-high-above":"","bar-far-below":""}},function(t,e){t.exports=function(t,e,r){return new n(t,e,r)};var n=function(t,e,n){this.font=t,this.above=void 0,this.tildeAbove=void 0,this.tengwa=e,this.tildeBelow=void 0,this.below=void 0,this.following=void 0,this.error=void 0,this.aboveNote=void 0,this.tildeAboveNote=void 0,this.tengwaNote=n,this.tildeBelowNote=void 0,this.belowNote=void 0,this.followingNote=void 0,this.hasVariant=!1};n.prototype.canAddAbove=function(t,e){return!this.above&&!!this.font.tehtaForTengwa(this.tengwa,t)||!e&&!this.below&&this.reversed().canAddAbove(t,!0)},n.prototype.addAbove=function(t,e){return this.font.tehtaForTengwa(this.tengwa,t)||this.reverse(),this.above=t,this.aboveNote=e,this},n.prototype.canAddBelow=function(t,e){return!this.below&&!!this.font.tehtaForTengwa(this.tengwa,t)||!e&&!this.above&&this.reversed().canAddBelow(t,!0)},n.prototype.addBelow=function(t,e){return this.font.tehtaForTengwa(this.tengwa,t)||this.reverse(),this.below=t,this.belowNote=e,this},n.prototype.addTildeAbove=function(t){return this.tildeAbove=!0,this.tildeAboveNote=t,this},n.prototype.addTildeBelow=function(t){return this.tildeBelow=!0,this.tildeBelowNote=t,this},n.prototype.canAddFollowing=function(t){return!this.following&&!!this.font.tehtaForTengwa(this.tengwa,t)},n.prototype.addFollowing=function(t,e){return this.following=t,this.followingNote=e,this},n.prototype.reversed=function(){return this.clone().reverse()},n.prototype.clone=function(){var t=new n(this.font,this.tengwa);return this.above&&t.addAbove(this.above,this.aboveNote),this.below&&t.addBelow(this.below,this.belowNote),this.following&&t.addFollowing(this.following,this.followingNote),this.tildeBelow&&t.addTildeBelow(this.tildeBelowNote),this.tildeAbove&&t.addTildeAbove(this.tildeAboveNote),t};var r={silme:"silme-nuquerna",esse:"esse-nuquerna","silme-nuquerna":"silme","esse-nuquerna":"esse"};n.prototype.reverse=function(){return this.tengwa=r[this.tengwa]||this.tengwa,this},n.prototype.addError=function(t){return this.errors=this.errors||[],this.errors.push(t),this},n.prototype.varies=function(){return this.hasVariant=!0,this}},function(t,e,n){var r=n(38),o=n(39),i=n(40),a=e.tengwar=o.tengwar,u=e.tehtar=o.tehtar,s=e.positions={tinco:2,parma:2,calma:{y:1,"o-below":1,others:2},quesse:{y:1,"o-below":1,others:2},ando:{wide:!0,others:0},umbar:{wide:!0,others:0},anga:{wide:!0,others:0},ungwe:{wide:!0,others:0},thule:{a:3,w:3,others:2},formen:{a:3,w:3,"":3,others:2},harma:{a:0,e:0,i:1,o:1,u:1,w:0,"":0,others:1},hwesta:{a:0,e:0,i:1,o:1,u:1,w:0,others:1},anto:{wide:!0,others:0},ampa:{wide:!0,others:0},anca:{wide:!0,others:0},unque:{wide:!0,others:0},numen:{wide:!0,others:0},malta:{wide:!0,others:0},noldo:{wide:!0,others:0},nwalme:{wide:!0,others:0},ore:{a:1,e:2,i:1,o:2,u:3,others:1},vala:{a:1,e:2,i:2,o:2,w:1,y:1,"":2,"i-below":1,others:3},anna:{a:1,w:3,others:2},wilya:{i:2,"":2,others:1},romen:{a:1,e:1,i:2,o:1,u:1,y:3,"o-below":null,"i-below":3,others:1},arda:{a:1,e:1,i:2,o:1,u:1,w:1,"":2,y:3,"o-below":null,"i-below":3,others:0},lambe:{wide:!0,e:1,y:4,w:0,"o-below":null,"i-below":4,others:0},alda:{wide:!0,w:0,y:null,"o-below":null,"i-below":null,others:1},silme:{y:2,"o-below":2,"i-below":2,others:null},"silme-nuquerna":{e:2,y:null,"o-below":null,"i-below":null,others:1},esse:{others:null},"esse-nuquerna":{e:2,y:null,"o-below":null,"i-below":null,others:1},hyarmen:{y:1,"o-below":1,"i-below":1,others:3},"hwesta-sindarinwa":{w:1,y:1,"o-below":1,"i-below":1,others:0},yanta:{a:1,others:2},ure:{a:1,others:2},halla:{"i-below":3,"o-below":3,others:null},"short-carrier":{y:null,others:3},"long-carrier":{y:null,"o-below":null,"i-below":null,others:3},"round-carrier":2,"tinco-extended":{a:3,w:3,y:3,"":3,"o-below":3,others:2},"parma-extended":{a:3,w:3,y:3,"":3,"o-below":3,others:2},"calma-extended":{i:1,w:1,y:0,"":0,"i-below":1,"o-below":1,others:0},"quesse-extended":{i:1,w:1,y:0,"":0,"i-below":1,"o-below":1,others:0},"ando-extended":{wide:!0,others:0},"umbar-extended":{wide:!0,others:0},"anga-extended":{wide:!0,others:0},"ungwe-extended":{wide:!0,others:0}};function l(t,e){var n=(e=e||{}).plain||!1,r=t.tengwa||"anna",o=[];t.above&&o.push(t.above),t.below&&o.push(t.below),t.tildeBelow&&o.push("tilde-below"),t.tildeAbove&&o.push("tilde-above"),t.following&&o.push(t.following);var i=a[r]+o.map(function(t){return c(r,t)}).join("");return t.errors&&!n&&(i='<abbr class="error" title="'+t.errors.join("\n").replace(/"/g,"&quot;")+'">'+i+"</abbr>"),i}function c(t,e){var n=function(t,e){if(!u[e])return null;if(-1!==h.indexOf(e))return null;if(u[e].special)return u[e][t]||null;if(-1!==r.barsAndTildes.indexOf(e))return"lambe"===t||"alda"===t&&u[e].length>=2?2:s[t].wide?0:1;return null==s[t]?null:null===s[t][e]?null:null!=s[t][e]?s[t][e]:null!=s[t].others?s[t].others:s[t]}(t,e);return null==n?null:u[e][t]||u[e][n]||null}e.transcribe=function(t,e){var n=(e=e||{}).block||!1,r=n?"<p>":"",o=n?"</p>":"";return t.map(function(t){return t.map(function(t){return r+t.map(function(t){return t.map(function(t){return t.map(function(t){return l(t,e)}).join("")}).join(" ")}).join("<br>\n")+o}).join("\n\n")}).join("\n\n\n")},e.transcribeColumn=l,e.tehtaForTengwa=c;var h="";e.makeColumn=function(t,n){return i(e,t,n)}},function(t,e,n){var r=n(43);n(54);var o,i=n(55),a=n(64),u=n(70);(o=window.location.search?i.parse(window.location.search.slice(1)):{}).q=o.q||"Mae govannen, Arda!",o.mode=o.mode||"general-use",o.font=o.font||"annatar",o.options=o.options||[],o.height=o.height||null,o.language=o.language||null;var s=r.defineBindings({modes:a,fonts:u,state:o,window:window,bodyElement:document.body,inputElement:document.querySelector("#input"),outputElement:document.querySelector("#output"),dividerElement:document.querySelector("#divider"),inputBoxElement:document.querySelector("#input-box"),selectModeElement:document.querySelector("#select-mode"),wikiTextElement:document.querySelector("#wiki-text"),searchString:function(){var t=this.state;delete t[""],0==t.options.length&&delete t.options;var e="?"+i.stringify(this.state);return window.history.replaceState(this.state,"",e),t.options=t.options||[],e}},{"inputElement.value":{"<->":"state.q"},"bodyElement.classList.has('annatar')":{"<-":"state.font == 'annatar'"},"bodyElement.classList.has('parmaite')":{"<-":"state.font == 'parmaite'"},"outputElement.classList.has('annatar')":{"<-":"state.font == 'annatar'"},"outputElement.classList.has('parmaite')":{"<-":"state.font == 'parmaite'"},"inputBoxElement.style.height":{"<-":"state.height + 'px'"},mode:{"<-":"modes[state.mode] ?? modes['general-use']"},font:{"<-":"fonts[state.font] ?? fonts['annatar']"},"outputElement.innerHTML":{args:["mode","font","state.language ?? 'unknown'","state.q","state.options"],compute:function(t,e,n,r,o){var i={font:e,language:n,block:!0};return o.forEach(function(t){t=t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),i[t]=!0}),t.transcribe(r,i)}},"selectModeElement.href":{"<-":"'modes.html' + searchString(state.q, state.mode, state.font, state.height ?? 0, state.options)"},"wikiTextElement.href":{"<-":"'data:text/plain;charset=utf-8,' + wikiText"},wikiText:{args:["state.q","state.mode","state.font","state.height","state.options"],compute:function(t,e,n,r,o){[e].concat(o).filter(Boolean).join(" ");return/\n/.test(t)?encodeURIComponent('<tengwarblock font="'+n+'" mode="'+e+'">\n'+l(t)+"\n</tengwarblock>"):encodeURIComponent('<tengwar font="'+n+'" mode="'+e+'">'+l(t)+"</tengwar>")}}});function l(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}document.body.classList.add("bootstrap"),setTimeout(function(){document.body.classList.remove("bootstrap")},1e3),s.inputElement.select(),divider.addEventListener("mousedown",function(t){t.preventDefault();var e=t.y;function n(t){var n=t.y,r=n-e,o=parseInt(window.getComputedStyle(s.inputBoxElement).height,10);e=n,s.state.height=o-r}window.addEventListener("mouseup",function t(e){window.removeEventListener("mouseup",t);window.removeEventListener("mousemove",n)}),window.addEventListener("mousemove",n)})},function(t,e,n){var r=n(10),o=n(45),i=n(52),a=(n(53),n(32),new r),u=Object.prototype.hasOwnProperty;function s(t,n,r,a){a=a||Object.empty;var s=l(t);if(u.call(s,n))throw new Error("Can't bind to already bound target, "+JSON.stringify(n));return"<-"in r||"<->"in r||"compute"in r?(r.target=t,r.parameters=r.parameters||a.parameters,r.document=r.document||a.document,r.components=r.components||a.components,r.cancel="compute"in r?i(t,n,r):o(t,n,r),s[n]=r,e.count++):("get"in r||"set"in r||"writable"in r||(r.writable=!0),"configurable"in r||(r.configurable=!0),"enumerable"in r||(r.enumerable=!0),Object.defineProperty(t,n,r)),t}function l(t){return a.has(t)||a.set(t,{}),a.get(t)}function c(t,n){var r=l(t);if(!r[n])throw new Error("Can't cancel non-existent binding to "+JSON.stringify(n));var o=r[n];if(o&&o.cancel){for(var n in o.cancel(),delete r[n],e.count--,r)return;a.delete(t)}}e.count=0,e.bindings=a,e.defineBindings=function(t,e,n){if(e)for(var r in e)s(t,r,e[r],n);return t},e.defineBinding=s,e.getBindings=l,e.getBinding=function(t,e){return l(t)[e]},e.cancelBindings=function(t){var e=l(t);for(var n in e)c(t,n)},e.cancelBinding=c},function(t,e,n){"use strict";n(0);var r=n(14),o=n(13),i=n(2),a=n(17),u=n(31),s=n(1);Object.prototype.hasOwnProperty;function l(t,e,n,r){if(!(this instanceof l))return new l(t,e,n,r);e=e||Object.equals,n=n||Object.hash,r=r||Function.noop,this.contentEquals=e,this.contentHash=n,this.getDefault=r;var o=this;this.buckets=new this.Buckets(null,function(){return new o.Bucket}),this.length=0,this.addEach(t)}t.exports=l,l.FastSet=l,Object.addEach(l.prototype,i.prototype),Object.addEach(l.prototype,a.prototype),Object.addEach(l.prototype,s.prototype),l.prototype.Buckets=r,l.prototype.Bucket=o,l.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentHash,this.getDefault)},l.prototype.has=function(t){var e=this.contentHash(t);return this.buckets.get(e).has(t)},l.prototype.get=function(t,e){if(e)throw new Error("FastSet#get does not support second argument: equals");var n=this.contentHash(t),r=this.buckets;return r.has(n)?r.get(n).get(t):this.getDefault(t)},l.prototype.delete=function(t,e){if(e)throw new Error("FastSet#delete does not support second argument: equals");var n=this.contentHash(t),r=this.buckets;if(r.has(n)){var o=r.get(n);if(o.delete(t))return this.length--,0===o.length&&r.delete(n),!0}return!1},l.prototype.clear=function(){this.buckets.clear(),this.length=0},l.prototype.add=function(t){var e=this.contentHash(t),n=this.buckets;return n.has(e)||n.set(e,new this.Bucket(null,this.contentEquals)),!n.get(e).has(t)&&(n.get(e).add(t),this.length++,!0)},l.prototype.reduce=function(t,e){var n=arguments[2],r=this.buckets,o=0;return r.reduce(function(e,r){return r.reduce(function(e,r){return t.call(n,e,r,o++,this)},e,this)},e,this)},l.prototype.one=function(){if(this.length>0)return this.buckets.one().one()},l.prototype.iterate=function(){return this.buckets.values().flatten().iterate()},l.prototype.log=function(t,e,n,r){t=t||u.unicodeSharp,e=e||this.logNode,n||(n=console.log,r=console),n=n.bind(r);var o=this.buckets,i=o.keys();i.forEach(function(a,u){var s,l;u===i.length-1?(s=t.fromAbove,l=" "):0===u?(s=t.branchDown,l=t.strafe):(s=t.fromBoth,l=t.strafe);var c=o.get(a);n.call(r,s+t.through+t.branchDown+" "+a),c.forEach(function(o,i){var a,u,s;i===c.head.prev?(a=t.fromAbove,u=" "):(a=t.fromBoth,u=t.strafe),e(i,function(e){s?n.call(r,l+" "+u+"  "+e):(n.call(r,l+" "+a+t.through+t.through+e),s=!0)},function(e){n.call(r,l+" "+t.strafe+"  "+e)})})})},l.prototype.logNode=function(t,e){var n=t.value;Object(n)===n?JSON.stringify(n,null,4).split("\n").forEach(function(t){e(" "+t)}):e(" "+n)}},function(t,e,n){var r=n(5),o=n(18),i=n(32),a=n(9),u=n(35),s=n(50),l=n(6),c=l.observeRangeChange,h=(n(36),n(3));function f(t,e,n,r,o,s,c){var h=a(r);return o&&(h=l.makeConverterObserver(h,o,n)),u(e)(h,n,t,s,c?{sourcePath:i(r),targetPath:i(e)}:null)}t.exports=function(t,e,n){n.target=t,n.targetPath=e;var u=n.source=n.source||t,l=n["<-"]||n["<->"]||"",p=n.twoWay="<->"in n;n.sourcePath=l;n.value;var d=n.parameters=n.parameters||u,g=n.document,v=n.components,m=n.trace,y=n.sourceScope=new h(u);y.parameters=d,y.document=g,y.components=v;var b=n.targetScope=new h(t);if(b.parameters=d,b.document=g,b.components=v,n.converter){var w=n.converter;w.convert&&(n.convert=w.convert.bind(w)),w.revert&&(n.revert=w.revert.bind(w))}else if(n.reverter){var O=n.reverter;O.convert&&(n.revert=O.convert.bind(O)),O.revert&&(n.convert=O.revert.bind(O))}var C=n.convert,A=n.revert,E=n.sourceSyntax=r(l),k=n.targetSyntax=r(e),x=o(k,E);if(k=x[0],E=x[1],p&&"rangeContent"===k.type)return function(t,e,n,r,o,i,u,l){var h,f,p,d=a(r),g=a(e),v=s(r),m=s(e),y=Function.noop;p=!0;var b=g(function(t){y(),y=Function.noop,l&&console.log("RANGE CONTENT TARGET",l.targetPath,"SET TO",t),t&&t.addRangeChangeListener&&(h=t,f&&h?(l&&console.log("RANGE CONTENT TARGET REPLACES SOURCE",l.targetPath,"->",l.sourcePath,"WITH",h),p=!0,f.swap(0,f.length,h),p=!1,y=A()):f||p||(l&&console.log("RANGE CONTENT TARGET INITIALIZED TO COPY OF SOURCE",l.targetPath,"<-",tarce.sourcePath,"WITH",f),v(h.clone(),n)))},t);p=!1;var w=d(function(e){y(),y=Function.noop,l&&console.log("RANGE CONTENT SOURCE",l.sourcePath,"SET TO",e),e&&e.addRangeChangeListener&&(f=e,h&&f?(l&&console.log("RANGE CONTENT SOURCE REPLACES TARGET",l.targetPath,"<-",l.sourcePath,"WITH",f),p=!0,h.swap(0,h.length,f),p=!1,y=A()):h||m(f.clone(),t))},n);h||f||v([],n);function O(t,e,n){p||(p=!0,l&&console.log("RANGE CONTENT PROPAGATED",l.targetPath,"<-",l.sourcePath,"PLUS",t,"MINUS",e,"AT",n),h.swap(n,e.length,t),p=!1)}function C(t,e,n){p||(p=!0,l&&console.log("RANGE CONTENT PROPAGATED",l.targetPath,"->",l.sourcePath,"PLUS",t,"MINUS",e,"AT",n),f.swap(n,e.length,t),p=!1)}function A(){if(f!==h){l&&console.log("RANGE CONTENT BOUND",l.targetPath,"<->",l.sourcePath),p=!0;var e=c(f,O,n),r=c(h,C,t);return p=!1,function(){l&&console.log("RANGE CONTENT UNBOUND",l.targetPath,"<->",l.sourcePath),e(),r()}}}return function(){y(),b(),w()}}(b,k.args[0],y,E,0,0,0,m?{sourcePath:i(E),targetPath:i(k.args[0])}:null);m&&console.log("DEFINE BINDING",e,"<-",l,t);var B=f(b,k,y,E,C,n,m);x=o(E,k);E=x[0],k=x[1];var P=Function.noop;p&&(m&&console.log("DEFINE BINDING",e,"->",l,u),P=f(y,E,b,k,A,n,m));return function(){B(),P()}}},function(t,e){t.exports=function(){function t(t,e,n,r,o){this.expected=t,this.found=e,this.offset=n,this.line=r,this.column=o,this.name="SyntaxError",this.message=function(t,e){var n;switch(t.length){case 0:n="end of input";break;case 1:n=t[0];break;default:n=t.slice(0,-1).join(", ")+" or "+t[t.length-1]}return"Expected "+n+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}(e)+'"':"end of input")+" found."}(t,e)}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),{SyntaxError:t,parse:function(e){var n,r=arguments.length>1?arguments[1]:{},o={expression:ir,sheet:function(){var t,e,n,r;if(t=Kn,null!==(e=Tr())){for(n=[],r=Lr();null!==r;)n.push(r),r=Lr();null!==n&&null!==(r=Tr())?(Zn=t,null===(e=xn(n))?(Kn=t,t=e):t=e):(Kn=t,t=u)}else Kn=t,t=u;return t}},i=ir,a="expression",u=null,s=",",l='","',c=function(t,e){for(var n=[t],r=0;r<e.length;r++)n.push(e[r][2]);return n},h="(",f='"("',p=")",d='")"',g=function(){return[]},v=function(t){return t},m="",y="?",b='"?"',w=":",O='":"',C=function(t,e){return e?{type:"if",args:[t,e[2],e[6]]}:t},A="||",E='"||"',k=function(t,e){for(var n=0;n<e.length;n++)t={type:Fr[e[n][1]],args:[t,e[n][3]]};return t},x="&&",B='"&&"',P="<=>",R='"<=>"',j="<=",_='"<="',T=">=",S='">="',M="<",L='"<"',q="-",N='"-"',F=">",D='">"',I="==",U='"=="',Y="!=",H='"!="',G=function(t,e){if(e){var n=e[1],r=e[3];return"!="===n?{type:"not",args:[{type:"equals",args:[t,r]}]}:{type:Fr[n],args:[t,r]}}return t},z="+",W='"+"',V="*",J='"*"',$="/",K='"/"',Z="%",X='"%"',Q="rem",tt='"rem"',et="**",nt='"**"',rt="//",ot='"//"',it="%%",at='"%%"',ut="??",st='"??"',lt="!",ct='"!"',ht=function(t,e){return{type:Dr[t],args:[e]}},ft=function(t,e){for(var n=0;n<e.length;n++)t=e[n](t);return t},pt=".",dt='"."',gt=function(t){return t},vt="[",mt='"["',yt="]",bt='"]"',wt=function(t){return function(e){return{type:"property",args:[e,t]}}},Ot="{",Ct='"{"',At="}",Et='"}"',kt=function(t,e){return Ir[t]?function(n){return{type:Ir[t],args:[n,e]}}:"value"===e.type?function(e){return{type:t,args:[e]}}:function(n){return{type:t,args:[{type:"mapBlock",args:[n,e]}]}}},xt=function(t,e){return function(n){return{type:t,args:[n].concat(e)}}},Bt=function(t){return function(e){return{type:"property",args:[e,{type:"literal",value:+t.join("")}]}}},Pt=function(t){return function(e){return{type:"property",args:[e,{type:"literal",value:t}]}}},Rt=function(t){return function(e){return{type:"with",args:[e,t]}}},jt="this",_t='"this"',Tt=function(){return{type:"value"}},St="true",Mt='"true"',Lt=function(){return{type:"literal",value:!0}},qt="false",Nt='"false"',Ft=function(){return{type:"literal",value:!1}},Dt="null",It='"null"',Ut=function(){return{type:"literal",value:null}},Yt="@",Ht='"@"',Gt=function(t){return{type:"component",label:t}},zt="$",Wt='"$"',Vt=function(t){return{type:"property",args:[{type:"parameters"},{type:"literal",value:t}]}},Jt=function(){return{type:"parameters"}},$t="#",Kt='"#"',Zt=function(t){return{type:"element",id:t}},Xt="&",Qt='"&"',te=function(t,e){return{type:t,args:e,inline:!0}},ee="^",ne='"^"',re=function(t){return{type:"parent",args:[t]}},oe=function(t){return t},ie=function(t){return t({type:"value"})},ae=function(){return{type:"value"}},ue="word",se=/^[a-zA-Z_0-9\-]/,le="[a-zA-Z_0-9\\-]",ce="string",he="'",fe='"\'"',pe=function(t){return{type:"literal",value:t.join("")}},de='"',ge='"\\""',ve=/^[^'\\\0-\x1F]/,me="[^'\\\\\\0-\\x1F]",ye="\\'",be='"\\\\\'"',we=function(){return"'"},Oe=/^[^"\\\0-\x1F]/,Ce='[^"\\\\\\0-\\x1F]',Ae='\\"',Ee='"\\\\\\""',ke=function(){return'"'},xe="\\\\",Be='"\\\\\\\\"',Pe=function(){return"\\"},Re="\\/",je='"\\\\/"',_e=function(){return"/"},Te="\\b",Se='"\\\\b"',Me=function(){return"\b"},Le="\\f",qe='"\\\\f"',Ne=function(){return"\f"},Fe="\\n",De='"\\\\n"',Ie=function(){return"\n"},Ue="\\r",Ye='"\\\\r"',He=function(){return"\r"},Ge="\\t",ze='"\\\\t"',We=function(){return"\t"},Ve="\\0",Je='"\\\\0"',$e=function(){return"\0"},Ke="\\u",Ze='"\\\\u"',Xe=function(t){return String.fromCharCode(parseInt(t,16))},Qe=/^[0-9a-fA-F]/,tn="[0-9a-fA-F]",en=function(){return{type:"tuple",args:[]}},nn=function(t){return{type:"tuple",args:t}},rn=function(){return{type:"record",args:[]}},on=function(t){return{type:"record",args:t}},an=function(t,e){var n={};n[t[0]]=t[1];for(var r=0;r<e.length;r++)n[e[r][2][0]]=e[r][2][1];return n},un=function(t,e){return[t,e]},sn="number",ln=function(t){return{type:"literal",value:+t}},cn=/^[eE]/,hn="[eE]",fn=/^[+\-]/,pn="[+\\-]",dn=/^[0-9]/,gn="[0-9]",vn=/^[1-9]/,mn="[1-9]",yn="whitespace",bn=/^[\t\x0B\f \xA0\uFEFF]/,wn="[\\t\\x0B\\f \\xA0\\uFEFF]",On=/^[ \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000]/,Cn="[ \\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000]",An="line terminator",En=/^[\n\r\u2028\u2029]/,kn="[\\n\\r\\u2028\\u2029]",xn=function(t){return{type:"sheet",blocks:t}},Bn=function(t,e,n){return{type:"block",connection:e.connection,module:e.module,exports:e.exports,label:t,statements:n}},Pn=function(t,e,n){return{connection:{"<":"prototype",":":"object"}[t],module:e&&e.value,exports:""!==n?n[1]:void 0}},Rn=function(){return{}},jn=/^[a-zA-Z_0-9]/,_n="[a-zA-Z_0-9]",Tn=";",Sn='";"',Mn=function(t){return[t]},Ln="on",qn='"on"',Nn="before",Fn='"before"',Dn=" ",In='" "',Un="->",Yn='"->"',Hn=function(t,e,n){return{type:"event",when:t,event:e,listener:n}},Gn="<->",zn='"<->"',Wn="<-",Vn='"<-"',Jn=function(t,e,n,r){var o={type:Ur[e],args:[t,n]};if(r.length){for(var i={},a=0;a<r.length;a++)i[r[a][2]]=r[a][6];o.descriptor=i}return o},$n=function(t,e){return{type:"unit",name:t,value:e}},Kn=0,Zn=0,Xn=0,Qn={line:1,column:1,seenCR:!1},tr=0,er=[],nr=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');i=o[r.startRule]}function rr(t){return Xn!==t&&(Xn>t&&(Xn=0,Qn={line:1,column:1,seenCR:!1}),function(t,n,r){var o,i;for(o=n;o<r;o++)"\n"===(i=e.charAt(o))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===i||"\u2028"===i||"\u2029"===i?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(Qn,Xn,t),Xn=t),Qn}function or(t){Kn<tr||(Kn>tr&&(tr=Kn,er=[]),er.push(t))}function ir(){var t;return nr++,t=function(){var t,n,r,o,i,a,s,l,c,h;t=Kn,null!==(n=function(){var t,n,r,o,i,a,s,l;if(t=Kn,null!==(n=sr())){for(r=[],o=Kn,null!==(i=Tr())?(e.substr(Kn,2)===A?(a=A,Kn+=2):(a=null,0===nr&&or(E)),null!==a&&null!==(s=Tr())&&null!==(l=sr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==o;)r.push(o),o=Kn,null!==(i=Tr())?(e.substr(Kn,2)===A?(a=A,Kn+=2):(a=null,0===nr&&or(E)),null!==a&&null!==(s=Tr())&&null!==(l=sr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==r?(Zn=t,null===(n=k(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}())&&null!==Tr()?(r=Kn,63===e.charCodeAt(Kn)?(o=y,Kn++):(o=null,0===nr&&or(b)),null!==o&&null!==(i=Tr())&&null!==(a=ir())&&null!==(s=Tr())?(58===e.charCodeAt(Kn)?(l=w,Kn++):(l=null,0===nr&&or(O)),null!==l&&null!==(c=Tr())&&null!==(h=ir())?r=o=[o,i,a,s,l,c,h]:(Kn=r,r=u)):(Kn=r,r=u),null===r&&(r=m),null!==r?(Zn=t,null===(n=C(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u);return t}(),nr--,null===t&&(null,0===nr&&or(a)),t}function ar(){var t,n,r,o,i,a,h;if(t=Kn,null!==(n=ir())){for(r=[],o=Kn,44===e.charCodeAt(Kn)?(i=s,Kn++):(i=null,0===nr&&or(l)),null!==i&&null!==(a=Tr())&&null!==(h=ir())?o=i=[i,a,h]:(Kn=o,o=u);null!==o;)r.push(o),o=Kn,44===e.charCodeAt(Kn)?(i=s,Kn++):(i=null,0===nr&&or(l)),null!==i&&null!==(a=Tr())&&null!==(h=ir())?o=i=[i,a,h]:(Kn=o,o=u);null!==r&&null!==(o=Tr())?(Zn=t,null===(n=c(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}function ur(){var t,n,r,o;return t=Kn,40===e.charCodeAt(Kn)?(n=h,Kn++):(n=null,0===nr&&or(f)),null!==n&&null!==(r=Tr())?(41===e.charCodeAt(Kn)?(o=p,Kn++):(o=null,0===nr&&or(d)),null!==o?(Zn=t,null===(n=g())?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u),null===t&&(t=Kn,40===e.charCodeAt(Kn)?(n=h,Kn++):(n=null,0===nr&&or(f)),null!==n&&null!==(r=ar())?(41===e.charCodeAt(Kn)?(o=p,Kn++):(o=null,0===nr&&or(d)),null!==o?(Zn=t,null===(n=v(r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)),t}function sr(){var t,n,r,o,i,a,s,l;if(t=Kn,null!==(n=lr())){for(r=[],o=Kn,null!==(i=Tr())?(e.substr(Kn,2)===x?(a=x,Kn+=2):(a=null,0===nr&&or(B)),null!==a&&null!==(s=Tr())&&null!==(l=lr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==o;)r.push(o),o=Kn,null!==(i=Tr())?(e.substr(Kn,2)===x?(a=x,Kn+=2):(a=null,0===nr&&or(B)),null!==a&&null!==(s=Tr())&&null!==(l=lr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==r?(Zn=t,null===(n=k(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}function lr(){var t,n,r,o,i,a,s,l,c;return t=Kn,null!==(n=cr())?(r=Kn,null!==(o=Tr())?(i=Kn,e.substr(Kn,3)===P?(a=P,Kn+=3):(a=null,0===nr&&or(R)),null===a&&(e.substr(Kn,2)===j?(a=j,Kn+=2):(a=null,0===nr&&or(_)),null===a&&(e.substr(Kn,2)===T?(a=T,Kn+=2):(a=null,0===nr&&or(S)),null===a&&(a=Kn,60===e.charCodeAt(Kn)?(s=M,Kn++):(s=null,0===nr&&or(L)),null!==s?(l=Kn,nr++,45===e.charCodeAt(Kn)?(c=q,Kn++):(c=null,0===nr&&or(N)),nr--,null===c?l=m:(Kn=l,l=u),null!==l?a=s=[s,l]:(Kn=a,a=u)):(Kn=a,a=u),null===a&&(62===e.charCodeAt(Kn)?(a=F,Kn++):(a=null,0===nr&&or(D)),null===a&&(e.substr(Kn,2)===I?(a=I,Kn+=2):(a=null,0===nr&&or(U)),null===a&&(e.substr(Kn,2)===Y?(a=Y,Kn+=2):(a=null,0===nr&&or(H)))))))),null!==a&&(a=e.substring(i,Kn)),null!==(i=a)&&null!==(a=Tr())&&null!==(s=cr())?r=o=[o,i,a,s]:(Kn=r,r=u)):(Kn=r,r=u),null===r&&(r=m),null!==r?(Zn=t,null===(n=G(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u),t}function cr(){var t,n,r,o,i,a,s,l;if(t=Kn,null!==(n=hr())){for(r=[],o=Kn,null!==(i=Tr())?(a=Kn,43===e.charCodeAt(Kn)?(s=z,Kn++):(s=null,0===nr&&or(W)),null===s&&(45===e.charCodeAt(Kn)?(s=q,Kn++):(s=null,0===nr&&or(N))),null!==s&&(s=e.substring(a,Kn)),null!==(a=s)&&null!==(s=Tr())&&null!==(l=hr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==o;)r.push(o),o=Kn,null!==(i=Tr())?(a=Kn,43===e.charCodeAt(Kn)?(s=z,Kn++):(s=null,0===nr&&or(W)),null===s&&(45===e.charCodeAt(Kn)?(s=q,Kn++):(s=null,0===nr&&or(N))),null!==s&&(s=e.substring(a,Kn)),null!==(a=s)&&null!==(s=Tr())&&null!==(l=hr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==r?(Zn=t,null===(n=k(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}function hr(){var t,n,r,o,i,a,s,l;if(t=Kn,null!==(n=fr())){for(r=[],o=Kn,null!==(i=Tr())?(a=Kn,42===e.charCodeAt(Kn)?(s=V,Kn++):(s=null,0===nr&&or(J)),null===s&&(47===e.charCodeAt(Kn)?(s=$,Kn++):(s=null,0===nr&&or(K)),null===s&&(37===e.charCodeAt(Kn)?(s=Z,Kn++):(s=null,0===nr&&or(X)),null===s&&(e.substr(Kn,3)===Q?(s=Q,Kn+=3):(s=null,0===nr&&or(tt))))),null!==s&&(s=e.substring(a,Kn)),null!==(a=s)&&null!==(s=Tr())&&null!==(l=fr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==o;)r.push(o),o=Kn,null!==(i=Tr())?(a=Kn,42===e.charCodeAt(Kn)?(s=V,Kn++):(s=null,0===nr&&or(J)),null===s&&(47===e.charCodeAt(Kn)?(s=$,Kn++):(s=null,0===nr&&or(K)),null===s&&(37===e.charCodeAt(Kn)?(s=Z,Kn++):(s=null,0===nr&&or(X)),null===s&&(e.substr(Kn,3)===Q?(s=Q,Kn+=3):(s=null,0===nr&&or(tt))))),null!==s&&(s=e.substring(a,Kn)),null!==(a=s)&&null!==(s=Tr())&&null!==(l=fr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==r?(Zn=t,null===(n=k(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}function fr(){var t,n,r,o,i,a,s,l;if(t=Kn,null!==(n=pr())){for(r=[],o=Kn,null!==(i=Tr())?(a=Kn,e.substr(Kn,2)===et?(s=et,Kn+=2):(s=null,0===nr&&or(nt)),null===s&&(e.substr(Kn,2)===rt?(s=rt,Kn+=2):(s=null,0===nr&&or(ot)),null===s&&(e.substr(Kn,2)===it?(s=it,Kn+=2):(s=null,0===nr&&or(at)))),null!==s&&(s=e.substring(a,Kn)),null!==(a=s)&&null!==(s=Tr())&&null!==(l=pr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==o;)r.push(o),o=Kn,null!==(i=Tr())?(a=Kn,e.substr(Kn,2)===et?(s=et,Kn+=2):(s=null,0===nr&&or(nt)),null===s&&(e.substr(Kn,2)===rt?(s=rt,Kn+=2):(s=null,0===nr&&or(ot)),null===s&&(e.substr(Kn,2)===it?(s=it,Kn+=2):(s=null,0===nr&&or(at)))),null!==s&&(s=e.substring(a,Kn)),null!==(a=s)&&null!==(s=Tr())&&null!==(l=pr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==r?(Zn=t,null===(n=k(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}function pr(){var t,n,r,o,i,a,s,l;if(t=Kn,null!==(n=dr())){for(r=[],o=Kn,null!==(i=Tr())?(e.substr(Kn,2)===ut?(a=ut,Kn+=2):(a=null,0===nr&&or(st)),null!==a&&null!==(s=Tr())&&null!==(l=dr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==o;)r.push(o),o=Kn,null!==(i=Tr())?(e.substr(Kn,2)===ut?(a=ut,Kn+=2):(a=null,0===nr&&or(st)),null!==a&&null!==(s=Tr())&&null!==(l=dr())?o=i=[i,a,s,l]:(Kn=o,o=u)):(Kn=o,o=u);null!==r?(Zn=t,null===(n=k(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}function dr(){var t,n,r;return t=Kn,n=Kn,33===e.charCodeAt(Kn)?(r=lt,Kn++):(r=null,0===nr&&or(ct)),null===r&&(43===e.charCodeAt(Kn)?(r=z,Kn++):(r=null,0===nr&&or(W)),null===r&&(45===e.charCodeAt(Kn)?(r=q,Kn++):(r=null,0===nr&&or(N)))),null!==r&&(r=e.substring(n,Kn)),null!==(n=r)&&null!==(r=dr())?(Zn=t,null===(n=ht(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u),null===t&&(t=function(){var t,n,r,o;if(t=Kn,null!==(n=function t(){var n,r,o,i;n=Ar();null===n&&null===(n=Er())&&null===(n=yr())&&null===(n=function(){var t,n,r;nr++,t=Kn,n=Kn,null!==(r=function(){var t,e,n,r;t=Kn,null!==(e=xr())&&null!==(n=Br())&&null!==(r=Pr())?t=e=[e,n,r]:(Kn=t,t=u);null===t&&(t=Kn,null!==(e=xr())&&null!==(n=Br())?t=e=[e,n]:(Kn=t,t=u),null===t&&(t=Kn,null!==(e=xr())&&null!==(n=Pr())?t=e=[e,n]:(Kn=t,t=u),null===t&&(t=xr())));return t}())&&(r=e.substring(n,Kn));null!==(n=r)&&(Zn=t,n=ln(n));null===n?(Kn=t,t=n):t=n;nr--,null===t&&(n=null,0===nr&&or(sn));return t}())&&(n=Kn,e.substr(Kn,4)===jt?(r=jt,Kn+=4):(r=null,0===nr&&or(_t)),null!==r&&(Zn=n,r=Tt()),null===r?(Kn=n,n=r):n=r,null===n&&(n=Kn,e.substr(Kn,4)===St?(r=St,Kn+=4):(r=null,0===nr&&or(Mt)),null!==r&&(Zn=n,r=Lt()),null===r?(Kn=n,n=r):n=r,null===n&&(n=Kn,e.substr(Kn,5)===qt?(r=qt,Kn+=5):(r=null,0===nr&&or(Nt)),null!==r&&(Zn=n,r=Ft()),null===r?(Kn=n,n=r):n=r,null===n&&(n=Kn,e.substr(Kn,4)===Dt?(r=Dt,Kn+=4):(r=null,0===nr&&or(It)),null!==r&&(Zn=n,r=Ut()),null===r?(Kn=n,n=r):n=r,null===n&&(n=Kn,64===e.charCodeAt(Kn)?(r=Yt,Kn++):(r=null,0===nr&&or(Ht)),null!==r?(o=Kn,null!==(i=qr())&&(i=e.substring(o,Kn)),null!==(o=i)?(Zn=n,null===(r=Gt(o))?(Kn=n,n=r):n=r):(Kn=n,n=u)):(Kn=n,n=u),null===n&&(n=Kn,36===e.charCodeAt(Kn)?(r=zt,Kn++):(r=null,0===nr&&or(Wt)),null!==r?(o=Kn,null!==(i=mr())&&(i=e.substring(o,Kn)),null!==(o=i)?(Zn=n,null===(r=Vt(o))?(Kn=n,n=r):n=r):(Kn=n,n=u)):(Kn=n,n=u),null===n&&(n=Kn,36===e.charCodeAt(Kn)?(r=zt,Kn++):(r=null,0===nr&&or(Wt)),null!==r&&(Zn=n,r=Jt()),null===r?(Kn=n,n=r):n=r,null===n&&(n=Kn,35===e.charCodeAt(Kn)?(r=$t,Kn++):(r=null,0===nr&&or(Kt)),null!==r?(o=Kn,null!==(i=mr())&&(i=e.substring(o,Kn)),null!==(o=i)?(Zn=n,null===(r=Zt(o))?(Kn=n,n=r):n=r):(Kn=n,n=u)):(Kn=n,n=u),null===n&&(n=Kn,38===e.charCodeAt(Kn)?(r=Xt,Kn++):(r=null,0===nr&&or(Qt)),null!==r?(o=Kn,null!==(i=mr())&&(i=e.substring(o,Kn)),null!==(o=i)&&null!==(i=ur())?(Zn=n,null===(r=te(o,i))?(Kn=n,n=r):n=r):(Kn=n,n=u)):(Kn=n,n=u),null===n&&(n=Kn,94===e.charCodeAt(Kn)?(r=ee,Kn++):(r=null,0===nr&&or(ne)),null!==r&&null!==(o=t())?(Zn=n,null===(r=re(o))?(Kn=n,n=r):n=r):(Kn=n,n=u),null===n&&(n=Kn,40===e.charCodeAt(Kn)?(r=h,Kn++):(r=null,0===nr&&or(f)),null!==r&&null!==(o=ir())?(41===e.charCodeAt(Kn)?(i=p,Kn++):(i=null,0===nr&&or(d)),null!==i?(Zn=n,null===(r=oe(o))?(Kn=n,n=r):n=r):(Kn=n,n=u)):(Kn=n,n=u),null===n&&(n=Kn,null!==(r=vr())&&(Zn=n,r=ie(r)),null===r?(Kn=n,n=r):n=r,null===n&&(n=Kn,null!==(r=[])&&(Zn=n,r=ae()),null===r?(Kn=n,n=r):n=r)))))))))))));return n}())){for(r=[],o=gr();null!==o;)r.push(o),o=gr();null!==r?(Zn=t,null===(n=ft(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}()),t}function gr(){var t,n,r,o;return t=Kn,46===e.charCodeAt(Kn)?(n=pt,Kn++):(n=null,0===nr&&or(dt)),null!==n&&null!==(r=vr())?(Zn=t,null===(n=gt(r))?(Kn=t,t=n):t=n):(Kn=t,t=u),null===t&&(t=Kn,91===e.charCodeAt(Kn)?(n=vt,Kn++):(n=null,0===nr&&or(mt)),null!==n&&null!==(r=ir())?(93===e.charCodeAt(Kn)?(o=yt,Kn++):(o=null,0===nr&&or(bt)),null!==o?(Zn=t,null===(n=wt(r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)),t}function vr(){var t,n,r,o,i,a;return t=Kn,n=Kn,null!==(r=mr())&&(r=e.substring(n,Kn)),null!==(n=r)?(123===e.charCodeAt(Kn)?(r=Ot,Kn++):(r=null,0===nr&&or(Ct)),null!==r&&null!==(o=Tr())&&null!==(i=ir())&&null!==Tr()?(125===e.charCodeAt(Kn)?(a=At,Kn++):(a=null,0===nr&&or(Et)),null!==a?(Zn=t,null===(n=kt(n,i))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)):(Kn=t,t=u),null===t&&(t=Kn,n=Kn,null!==(r=mr())&&(r=e.substring(n,Kn)),null!==(n=r)&&null!==(r=ur())?(Zn=t,null===(n=xt(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u),null===t&&(t=Kn,null!==(n=Rr())&&(Zn=t,n=Bt(n)),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,n=Kn,null!==(r=mr())&&(r=e.substring(n,Kn)),null!==(n=r)&&(Zn=t,n=Pt(n)),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,null!==(n=Ar())&&(Zn=t,n=Rt(n)),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,null!==(n=Er())&&(Zn=t,n=Rt(n)),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,40===e.charCodeAt(Kn)?(n=h,Kn++):(n=null,0===nr&&or(f)),null!==n&&null!==(r=ir())?(41===e.charCodeAt(Kn)?(o=p,Kn++):(o=null,0===nr&&or(d)),null!==o?(Zn=t,null===(n=Rt(r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u))))))),t}function mr(){var t,n;if(nr++,t=[],se.test(e.charAt(Kn))?(n=e.charAt(Kn),Kn++):(n=null,0===nr&&or(le)),null!==n)for(;null!==n;)t.push(n),se.test(e.charAt(Kn))?(n=e.charAt(Kn),Kn++):(n=null,0===nr&&or(le));else t=u;return nr--,null===t&&(n=null,0===nr&&or(ue)),t}function yr(){var t,n,r,o;if(nr++,t=Kn,39===e.charCodeAt(Kn)?(n=he,Kn++):(n=null,0===nr&&or(fe)),null!==n){for(r=[],o=br();null!==o;)r.push(o),o=br();null!==r?(39===e.charCodeAt(Kn)?(o=he,Kn++):(o=null,0===nr&&or(fe)),null!==o?(Zn=t,null===(n=pe(r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)}else Kn=t,t=u;if(null===t)if(t=Kn,34===e.charCodeAt(Kn)?(n=de,Kn++):(n=null,0===nr&&or(ge)),null!==n){for(r=[],o=wr();null!==o;)r.push(o),o=wr();null!==r?(34===e.charCodeAt(Kn)?(o=de,Kn++):(o=null,0===nr&&or(ge)),null!==o?(Zn=t,null===(n=pe(r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)}else Kn=t,t=u;return nr--,null===t&&(n=null,0===nr&&or(ce)),t}function br(){var t,n;return ve.test(e.charAt(Kn))?(t=e.charAt(Kn),Kn++):(t=null,0===nr&&or(me)),null===t&&(t=Kn,e.substr(Kn,2)===ye?(n=ye,Kn+=2):(n=null,0===nr&&or(be)),null!==n&&(Zn=t,n=we()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Or())),t}function wr(){var t,n;return Oe.test(e.charAt(Kn))?(t=e.charAt(Kn),Kn++):(t=null,0===nr&&or(Ce)),null===t&&(t=Kn,e.substr(Kn,2)===Ae?(n=Ae,Kn+=2):(n=null,0===nr&&or(Ee)),null!==n&&(Zn=t,n=ke()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Or())),t}function Or(){var t,n,r,o,i,a,s,l;return t=Kn,e.substr(Kn,2)===xe?(n=xe,Kn+=2):(n=null,0===nr&&or(Be)),null!==n&&(Zn=t,n=Pe()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,e.substr(Kn,2)===Re?(n=Re,Kn+=2):(n=null,0===nr&&or(je)),null!==n&&(Zn=t,n=_e()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,e.substr(Kn,2)===Te?(n=Te,Kn+=2):(n=null,0===nr&&or(Se)),null!==n&&(Zn=t,n=Me()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,e.substr(Kn,2)===Le?(n=Le,Kn+=2):(n=null,0===nr&&or(qe)),null!==n&&(Zn=t,n=Ne()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,e.substr(Kn,2)===Fe?(n=Fe,Kn+=2):(n=null,0===nr&&or(De)),null!==n&&(Zn=t,n=Ie()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,e.substr(Kn,2)===Ue?(n=Ue,Kn+=2):(n=null,0===nr&&or(Ye)),null!==n&&(Zn=t,n=He()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,e.substr(Kn,2)===Ge?(n=Ge,Kn+=2):(n=null,0===nr&&or(ze)),null!==n&&(Zn=t,n=We()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,e.substr(Kn,2)===Ve?(n=Ve,Kn+=2):(n=null,0===nr&&or(Je)),null!==n&&(Zn=t,n=$e()),null===n?(Kn=t,t=n):t=n,null===t&&(t=Kn,e.substr(Kn,2)===Ke?(n=Ke,Kn+=2):(n=null,0===nr&&or(Ze)),null!==n?(r=Kn,o=Kn,null!==(i=Cr())&&null!==(a=Cr())&&null!==(s=Cr())&&null!==(l=Cr())?o=i=[i,a,s,l]:(Kn=o,o=u),null!==o&&(o=e.substring(r,Kn)),null!==(r=o)?(Zn=t,null===(n=Xe(r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u))))))))),t}function Cr(){var t;return Qe.test(e.charAt(Kn))?(t=e.charAt(Kn),Kn++):(t=null,0===nr&&or(tn)),t}function Ar(){var t,n,r,o;return t=Kn,91===e.charCodeAt(Kn)?(n=vt,Kn++):(n=null,0===nr&&or(mt)),null!==n&&null!==Tr()?(93===e.charCodeAt(Kn)?(r=yt,Kn++):(r=null,0===nr&&or(bt)),null!==r?(Zn=t,null===(n=en())?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u),null===t&&(t=Kn,91===e.charCodeAt(Kn)?(n=vt,Kn++):(n=null,0===nr&&or(mt)),null!==n&&null!==Tr()&&null!==(r=ar())&&null!==Tr()?(93===e.charCodeAt(Kn)?(o=yt,Kn++):(o=null,0===nr&&or(bt)),null!==o?(Zn=t,null===(n=nn(r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)),t}function Er(){var t,n,r,o;return t=Kn,123===e.charCodeAt(Kn)?(n=Ot,Kn++):(n=null,0===nr&&or(Ct)),null!==n&&null!==Tr()?(125===e.charCodeAt(Kn)?(r=At,Kn++):(r=null,0===nr&&or(Et)),null!==r&&null!==(o=Tr())?(Zn=t,null===(n=rn())?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u),null===t&&(t=Kn,123===e.charCodeAt(Kn)?(n=Ot,Kn++):(n=null,0===nr&&or(Ct)),null!==n&&null!==Tr()&&null!==(r=function(){var t,n,r,o,i,a,c;if(t=Kn,null!==(n=kr())){for(r=[],o=Kn,44===e.charCodeAt(Kn)?(i=s,Kn++):(i=null,0===nr&&or(l)),null!==i&&null!==(a=Tr())&&null!==(c=kr())?o=i=[i,a,c]:(Kn=o,o=u);null!==o;)r.push(o),o=Kn,44===e.charCodeAt(Kn)?(i=s,Kn++):(i=null,0===nr&&or(l)),null!==i&&null!==(a=Tr())&&null!==(c=kr())?o=i=[i,a,c]:(Kn=o,o=u);null!==r?(Zn=t,null===(n=an(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;return t}())?(125===e.charCodeAt(Kn)?(o=At,Kn++):(o=null,0===nr&&or(Et)),null!==o&&null!==Tr()?(Zn=t,null===(n=on(r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)),t}function kr(){var t,n,r,o;return t=Kn,n=Kn,null!==(r=mr())&&(r=e.substring(n,Kn)),null!==(n=r)?(58===e.charCodeAt(Kn)?(r=w,Kn++):(r=null,0===nr&&or(O)),null!==r&&null!==Tr()&&null!==(o=ir())?(Zn=t,null===(n=un(n,o))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u),t}function xr(){var t,n,r,o;return t=Kn,null!==(n=_r())&&null!==(r=Rr())?t=n=[n,r]:(Kn=t,t=u),null===t&&null===(t=jr())&&(t=Kn,45===e.charCodeAt(Kn)?(n=q,Kn++):(n=null,0===nr&&or(N)),null!==n&&null!==(r=_r())&&null!==(o=Rr())?t=n=[n,r,o]:(Kn=t,t=u),null===t&&(t=Kn,45===e.charCodeAt(Kn)?(n=q,Kn++):(n=null,0===nr&&or(N)),null!==n&&null!==(r=jr())?t=n=[n,r]:(Kn=t,t=u))),t}function Br(){var t,n,r;return t=Kn,46===e.charCodeAt(Kn)?(n=pt,Kn++):(n=null,0===nr&&or(dt)),null!==n&&null!==(r=Rr())?t=n=[n,r]:(Kn=t,t=u),t}function Pr(){var t,n,r;return t=Kn,null!==(n=function(){var t,n,r;t=Kn,cn.test(e.charAt(Kn))?(n=e.charAt(Kn),Kn++):(n=null,0===nr&&or(hn));null!==n?(fn.test(e.charAt(Kn))?(r=e.charAt(Kn),Kn++):(r=null,0===nr&&or(pn)),null===r&&(r=m),null!==r?t=n=[n,r]:(Kn=t,t=u)):(Kn=t,t=u);return t}())&&null!==(r=Rr())?t=n=[n,r]:(Kn=t,t=u),t}function Rr(){var t,e;if(t=[],null!==(e=jr()))for(;null!==e;)t.push(e),e=jr();else t=u;return t}function jr(){var t;return dn.test(e.charAt(Kn))?(t=e.charAt(Kn),Kn++):(t=null,0===nr&&or(gn)),t}function _r(){var t;return vn.test(e.charAt(Kn))?(t=e.charAt(Kn),Kn++):(t=null,0===nr&&or(mn)),t}function Tr(){var t,e;for(t=[],null===(e=Sr())&&(e=Mr());null!==e;)t.push(e),null===(e=Sr())&&(e=Mr());return t}function Sr(){var t;return nr++,bn.test(e.charAt(Kn))?(t=e.charAt(Kn),Kn++):(t=null,0===nr&&or(wn)),null===t&&(On.test(e.charAt(Kn))?(t=e.charAt(Kn),Kn++):(t=null,0===nr&&or(Cn))),nr--,null===t&&(null,0===nr&&or(yn)),t}function Mr(){var t;return nr++,En.test(e.charAt(Kn))?(t=e.charAt(Kn),Kn++):(t=null,0===nr&&or(kn)),nr--,null===t&&(null,0===nr&&or(An)),t}function Lr(){var t,n,r,o,i,a,s,l;return t=Kn,64===e.charCodeAt(Kn)?(n=Yt,Kn++):(n=null,0===nr&&or(Ht)),null!==n?(r=Kn,null!==(o=qr())&&(o=e.substring(r,Kn)),null!==(r=o)&&null!==(o=Tr())?(null===(i=function(){var t,n,r,o,i,a;t=Kn,60===e.charCodeAt(Kn)?(n=M,Kn++):(n=null,0===nr&&or(L));null===n&&(58===e.charCodeAt(Kn)?(n=w,Kn++):(n=null,0===nr&&or(O)));null!==n&&null!==Tr()?(null===(r=yr())&&(r=m),null!==r&&null!==Tr()?(o=Kn,i=Kn,nr++,123===e.charCodeAt(Kn)?(a=Ot,Kn++):(a=null,0===nr&&or(Ct)),nr--,null===a?i=m:(Kn=i,i=u),null!==i&&null!==(a=ir())?o=i=[i,a]:(Kn=o,o=u),null===o&&(o=m),null!==o&&null!==(i=Tr())?(Zn=t,null===(n=Pn(n,r,o))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)):(Kn=t,t=u);null===t&&(t=Kn,null!==(n=Tr())&&(Zn=t,n=Rn()),null===n?(Kn=t,t=n):t=n);return t}())&&(i=m),null!==i?(123===e.charCodeAt(Kn)?(a=Ot,Kn++):(a=null,0===nr&&or(Ct)),null!==a&&null!==Tr()&&null!==(s=function(){var t,n,r,o,i,a,s,l;if(t=Kn,null!==(n=Nr()))if(null!==Tr()){for(r=[],o=Kn,59===e.charCodeAt(Kn)?(i=Tn,Kn++):(i=null,0===nr&&or(Sn)),null!==i&&null!==(a=Tr())&&null!==(s=Nr())&&null!==(l=Tr())?o=i=[i,a,s,l]:(Kn=o,o=u);null!==o;)r.push(o),o=Kn,59===e.charCodeAt(Kn)?(i=Tn,Kn++):(i=null,0===nr&&or(Sn)),null!==i&&null!==(a=Tr())&&null!==(s=Nr())&&null!==(l=Tr())?o=i=[i,a,s,l]:(Kn=o,o=u);null!==r?(59===e.charCodeAt(Kn)?(o=Tn,Kn++):(o=null,0===nr&&or(Sn)),null===o&&(o=m),null!==o&&null!==(i=Tr())?(Zn=t,null===(n=c(n,r))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)}else Kn=t,t=u;else Kn=t,t=u;null===t&&(t=Kn,null!==(n=Nr())&&null!==Tr()?(59===e.charCodeAt(Kn)?(r=Tn,Kn++):(r=null,0===nr&&or(Sn)),null===r&&(r=m),null!==r&&null!==(o=Tr())?(Zn=t,null===(n=Mn(n))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u),null===t&&(t=Kn,null!==(n=Tr())&&(Zn=t,n=g()),null===n?(Kn=t,t=n):t=n));return t}())?(125===e.charCodeAt(Kn)?(l=At,Kn++):(l=null,0===nr&&or(Et)),null!==l&&null!==Tr()?(Zn=t,null===(n=Bn(r,i,s))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)):(Kn=t,t=u)):(Kn=t,t=u)):(Kn=t,t=u),t}function qr(){var t,n,r,o,i,a,s;if(t=Kn,n=[],jn.test(e.charAt(Kn))?(r=e.charAt(Kn),Kn++):(r=null,0===nr&&or(_n)),null!==r)for(;null!==r;)n.push(r),jn.test(e.charAt(Kn))?(r=e.charAt(Kn),Kn++):(r=null,0===nr&&or(_n));else n=u;if(null!==n){if(r=[],o=Kn,58===e.charCodeAt(Kn)?(i=w,Kn++):(i=null,0===nr&&or(O)),null!==i){if(a=[],jn.test(e.charAt(Kn))?(s=e.charAt(Kn),Kn++):(s=null,0===nr&&or(_n)),null!==s)for(;null!==s;)a.push(s),jn.test(e.charAt(Kn))?(s=e.charAt(Kn),Kn++):(s=null,0===nr&&or(_n));else a=u;null!==a?o=i=[i,a]:(Kn=o,o=u)}else Kn=o,o=u;for(;null!==o;)if(r.push(o),o=Kn,58===e.charCodeAt(Kn)?(i=w,Kn++):(i=null,0===nr&&or(O)),null!==i){if(a=[],jn.test(e.charAt(Kn))?(s=e.charAt(Kn),Kn++):(s=null,0===nr&&or(_n)),null!==s)for(;null!==s;)a.push(s),jn.test(e.charAt(Kn))?(s=e.charAt(Kn),Kn++):(s=null,0===nr&&or(_n));else a=u;null!==a?o=i=[i,a]:(Kn=o,o=u)}else Kn=o,o=u;null!==r?t=n=[n,r]:(Kn=t,t=u)}else Kn=t,t=u;return t}function Nr(){var t,n,r,o,i,a,c,h,f,p,d,g,v,m,y,b,C;if(t=Kn,e.substr(Kn,2)===Ln?(n=Ln,Kn+=2):(n=null,0===nr&&or(qn)),null===n&&(e.substr(Kn,6)===Nn?(n=Nn,Kn+=6):(n=null,0===nr&&or(Fn))),null!==n?(32===e.charCodeAt(Kn)?(r=Dn,Kn++):(r=null,0===nr&&or(In)),null!==r&&null!==(o=Tr())?(i=Kn,null!==(a=mr())&&(a=e.substring(i,Kn)),null!==(i=a)&&null!==(a=Tr())?(e.substr(Kn,2)===Un?(c=Un,Kn+=2):(c=null,0===nr&&or(Yn)),null!==c&&null!==(h=Tr())&&null!==(f=ir())&&null!==(p=Tr())?(Zn=t,null===(n=Hn(n,i,f))?(Kn=t,t=n):t=n):(Kn=t,t=u)):(Kn=t,t=u)):(Kn=t,t=u)):(Kn=t,t=u),null===t){if(t=Kn,null!==(n=ir()))if(null!==(r=Tr()))if(58===e.charCodeAt(Kn)?(o=w,Kn++):(o=null,0===nr&&or(O)),null===o&&(e.substr(Kn,3)===Gn?(o=Gn,Kn+=3):(o=null,0===nr&&or(zn)),null===o&&(e.substr(Kn,2)===Wn?(o=Wn,Kn+=2):(o=null,0===nr&&or(Vn)))),null!==o)if(null!==(i=Tr()))if(null!==(a=ir()))if(null!==(c=Tr())){for(h=[],f=Kn,44===e.charCodeAt(Kn)?(p=s,Kn++):(p=null,0===nr&&or(l)),null!==p&&null!==(d=Tr())?(g=Kn,null!==(v=mr())&&(v=e.substring(g,Kn)),null!==(g=v)&&null!==(v=Tr())?(58===e.charCodeAt(Kn)?(m=w,Kn++):(m=null,0===nr&&or(O)),null!==m&&null!==(y=Tr())&&null!==(b=ir())&&null!==(C=Tr())?f=p=[p,d,g,v,m,y,b,C]:(Kn=f,f=u)):(Kn=f,f=u)):(Kn=f,f=u);null!==f;)h.push(f),f=Kn,44===e.charCodeAt(Kn)?(p=s,Kn++):(p=null,0===nr&&or(l)),null!==p&&null!==(d=Tr())?(g=Kn,null!==(v=mr())&&(v=e.substring(g,Kn)),null!==(g=v)&&null!==(v=Tr())?(58===e.charCodeAt(Kn)?(m=w,Kn++):(m=null,0===nr&&or(O)),null!==m&&null!==(y=Tr())&&null!==(b=ir())&&null!==(C=Tr())?f=p=[p,d,g,v,m,y,b,C]:(Kn=f,f=u)):(Kn=f,f=u)):(Kn=f,f=u);null!==h?(Zn=t,null===(n=Jn(n,o,a,h))?(Kn=t,t=n):t=n):(Kn=t,t=u)}else Kn=t,t=u;else Kn=t,t=u;else Kn=t,t=u;else Kn=t,t=u;else Kn=t,t=u;else Kn=t,t=u;null===t&&(t=Kn,n=Kn,null!==(r=mr())&&(r=e.substring(n,Kn)),null!==(n=r)&&null!==(r=Tr())&&null!==(o=ir())&&null!==(i=Tr())?(Zn=t,null===(n=$n(n,o))?(Kn=t,t=n):t=n):(Kn=t,t=u))}return t}var Fr={"**":"pow","//":"root","%%":"log","*":"mul","/":"div","%":"mod",rem:"rem","+":"add","-":"sub","<":"lt",">":"gt","<=":"le",">=":"ge","==":"equals","<=>":"compare","??":"default","&&":"and","||":"or","<-":"bind","<->":"bind2",":":"assign"},Dr={"+":"toNumber","-":"neg","!":"not","^":"parent"},Ir={map:"mapBlock",filter:"filterBlock",some:"someBlock",every:"everyBlock",sorted:"sortedBlock",sortedSet:"sortedSetBlock",group:"groupBlock",groupMap:"groupMapBlock",min:"minBlock",max:"maxBlock"},Ur={":":"assign","<-":"bind","<->":"bind2"};if(null!==(n=i())&&Kn===e.length)return n;throw function(t){var e=0;for(t.sort();e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(er),Zn=Math.max(Kn,tr),new t(er,Zn<e.length?e.charAt(Zn):null,Zn,rr(Zn).line,rr(Zn).column)}}}()},function(t,e,n){"use strict";t.exports=a;n(0);var r=n(2),o=n(1),i=n(4);function a(t,e,n,r){if(!(this instanceof a))return new a(t,e,n,r);Array.isArray(t)?(this.array=t,t=t.splice(0,t.length)):this.array=[],this.contentEquals=e||Object.equals,this.contentCompare=n||Object.compare,this.getDefault=r||Function.noop,this.length=0,this.addEach(t)}function u(t,e,n){for(var r=0,o=t.length-1;r<=o;){var i=r+o>>1,a=n(e,t[i]);if(a>0)r=i+1;else{if(!(a<0))return i;o=i-1}}return-(r+1)}function s(t,e,n,r){var o=u(t,e,n);if(o<0)return-1;for(;o>0&&r(e,t[o-1]);)o--;return r(e,t[o])?o:-1}function l(t,e,n,r){var o=u(t,e,n);if(o<0)return-1;for(;o<t.length-1&&r(e,t[o+1]);)o++;return r(e,t[o])?o:-1}a.SortedArray=a,Object.addEach(a.prototype,r.prototype),Object.addEach(a.prototype,o.prototype),Object.addEach(a.prototype,i.prototype),a.prototype.isSorted=!0,a.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentCompare,this.getDefault)},a.prototype.has=function(t,e){if(e)throw new Error("SortedSet#has does not support second argument: equals");var n=u(this.array,t,this.contentCompare);return n>=0&&this.contentEquals(this.array[n],t)},a.prototype.get=function(t,e){if(e)throw new Error("SortedArray#get does not support second argument: equals");var n=s(this.array,t,this.contentCompare,this.contentEquals);return-1!==n?this.array[n]:this.getDefault(t)},a.prototype.add=function(t){var e=function(t,e,n){var r=u(t,e,n);if(r<0)return-r-1;for(var o=t.length-1;r<o&&0===n(e,t[r+1]);)r++;return r}(this.array,t,this.contentCompare);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([t],[],e),this.array.splice(e,0,t),this.length++,this.dispatchesRangeChanges&&this.dispatchRangeChange([t],[],e),!0},a.prototype.delete=function(t,e){if(e)throw new Error("SortedArray#delete does not support second argument: equals");var n=s(this.array,t,this.contentCompare,this.contentEquals);return-1!==n&&(this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],[t],n),this.array.splice(n,1),this.length--,this.dispatchesRangeChanges&&this.dispatchRangeChange([],[t],n),!0)},a.prototype.deleteAll=function(t,e){if(e){var n=this.array.deleteAll(t,e);return this.length-=n,n}var r=s(this.array,t,this.contentCompare,this.contentEquals);if(-1!==r){for(var o=r;this.contentEquals(t,this.array[o]);)o++;var i=this.slice(r,o);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange([],i,r),this.array.splice(r,i.length),this.length-=i.length,this.dispatchesRangeChanges&&this.dispatchRangeChange([],i,r),i.length}return 0},a.prototype.indexOf=function(t){return s(this.array,t,this.contentCompare,this.contentEquals)},a.prototype.lastIndexOf=function(t){return l(this.array,t,this.contentCompare,this.contentEquals)},a.prototype.find=function(t,e,n){if(e)throw new Error("SortedArray#find does not support second argument: equals");if(n)throw new Error("SortedArray#find does not support third argument: index");return s(this.array,t,this.contentCompare,this.contentEquals)},a.prototype.findLast=function(t,e,n){if(e)throw new Error("SortedArray#findLast does not support second argument: equals");if(n)throw new Error("SortedArray#findLast does not support third argument: index");return l(this.array,t,this.contentCompare,this.contentEquals)},a.prototype.push=function(){this.addEach(arguments)},a.prototype.unshift=function(){this.addEach(arguments)},a.prototype.pop=function(){var t=this.array.pop();return this.length=this.array.length,t},a.prototype.shift=function(){var t=this.array.shift();return this.length=this.array.length,t},a.prototype.slice=function(){return this.array.slice.apply(this.array,arguments)},a.prototype.splice=function(t,e){return this.swap(t,e,Array.prototype.slice.call(arguments,2))},a.prototype.swap=function(t,e,n){if(void 0===t&&void 0===e)return[];(t=t||0)<0&&(t+=this.length),void 0===e&&(e=1/0);var r=this.slice(t,t+e);return this.dispatchesRangeChanges&&this.dispatchBeforeRangeChange(n,r,t),this.array.splice(t,e),this.length-=r.length,this.dispatchesRangeChanges&&this.dispatchRangeChange([],r,t),this.addEach(n),r},a.prototype.reduce=function(t,e){var n=arguments[2];return this.array.reduce(function(e,r,o){return t.call(n,e,r,o,this)},e,this)},a.prototype.reduceRight=function(){var t=arguments[2];return this.array.reduceRight(function(e,n,r){return callback.call(t,e,n,r,this)},basis,this)},a.prototype.min=function(){if(this.length)return this.array[0]},a.prototype.max=function(){if(this.length)return this.array[this.length-1]},a.prototype.one=function(){return this.array.one()},a.prototype.clear=function(){var t;this.dispatchesRangeChanges&&(t=this.array.slice(),this.dispatchBeforeRangeChange([],t,0)),this.length=0,this.array.clear(),this.dispatchesRangeChanges&&this.dispatchRangeChange([],t,0)},a.prototype.equals=function(t,e){return this.array.equals(t,e)},a.prototype.compare=function(t,e){return this.array.compare(t,e)},a.prototype.iterate=function(t,e){return new this.Iterator(this.array,t,e)},a.prototype.toJSON=function(){return this.toArray()},a.prototype.Iterator=Array.prototype.Iterator},function(t,e,n){n(33),n(0);var r=n(2),o=n(16),i=n(4),a=n(1);function u(t,e,n){if(!(this instanceof u))return new u(t,e,n);this.contentEquals=e||Object.equals,this.contentCompare=n||Object.compare,this.content=[],this.length=0,this.addEach(t)}t.exports=u,u.Heap=u,Object.addEach(u.prototype,r.prototype),Object.addEach(u.prototype,a.prototype),Object.addEach(u.prototype,i.prototype),Object.addEach(u.prototype,o.prototype),u.prototype.constructClone=function(t){return new this.constructor(t,this.contentEquals,this.contentCompare)},u.prototype.push=function(t){this.content.push(t),this.float(this.content.length-1),this.length++},u.prototype.pop=function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content.set(0,e),this.sink(0)),this.length--,t},u.prototype.add=function(t){this.push(t)},u.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this.contentEquals(this.content[e],t))return e;return-1},u.prototype.delete=function(t,e){if(e)throw new Error("Heap#delete does not support second argument: equals");var n=this.indexOf(t);if(-1===n)return!1;var r=this.content.pop();if(this.length=this.content.length,n===this.content.length)return!0;this.content.set(n,r);var o=this.contentCompare(r,t);return o>0?this.float(n):o<0&&this.sink(n),!0},u.prototype.peek=function(){if(this.length)return this.content[0]},u.prototype.max=function(){return this.peek()},u.prototype.one=function(){return this.peek()},u.prototype.float=function(t){for(var e=this.content[t];t>0;){var n=Math.floor((t+1)/2)-1,r=this.content[n];if(!(this.contentCompare(r,e)<0))break;this.content.set(n,e),this.content.set(t,r),t=n}},u.prototype.sink=function(t){for(var e,n,r,o,i=this.content.length,a=this.content[t];;){if(o=!1,(e=(n=2*(t+1))-1)<i){var u=this.content[e];this.contentCompare(u,a)>0&&(r=e,o=!0)}if(n<i){var s=this.content[n];this.contentCompare(s,o?u:a)>0&&(r=n,o=!0)}if(!o)break;this.content.set(t,this.content[r]),this.content.set(r,a),t=r}},u.prototype.clear=function(){this.content.clear(),this.length=0},u.prototype.reduce=function(t,e){var n=arguments[2];return this.content.reduce(function(e,r,o){return t.call(n,e,r,o,this)},e,this)},u.prototype.reduceRight=function(t,e){var n=arguments[2];return this.content.reduceRight(function(e,r,o){return t.call(n,e,r,o,this)},e,this)},u.prototype.toJSON=function(){return this.toArray()},u.prototype.makeObservable=function(){this.content.addRangeChangeListener(this,"content"),this.content.addBeforeRangeChangeListener(this,"content"),this.content.addMapChangeListener(this,"content"),this.content.addBeforeMapChangeListener(this,"content")},u.prototype.handleContentRangeChange=function(t,e,n){this.dispatchRangeChange(t,e,n)},u.prototype.handleContentRangeWillChange=function(t,e,n){this.dispatchBeforeRangeChange(t,e,n)},u.prototype.handleContentMapChange=function(t,e){this.dispatchMapChange(e,t)},u.prototype.handleContentMapWillChange=function(t,e){this.dispatchBeforeMapChange(e,t)}},function(t,e,n){"use strict";function r(t,e){for(var n,r=(e.length+1)*(t.length+1),o=Array(r),i=Array(e.length+1),a=Array(e.length+1),u=0;u<t.length+1;u++){for(var s=0;s<e.length+1;s++){var l,c;if(0===u&&0===s)l=" ",c=0;else if(0===u)l="insert",c=s;else if(0===s)l="delete",c=u;else if(t[u-1]===e[s-1])l="retain",c=a[s-1];else{var h=i[s-1],f=a[s];f<h?(l="delete",c=f+1):(l="insert",c=h+1)}o[u+s*(t.length+1)]=l,i[s]=c}n=i,i=a,a=n}return{edges:o,cost:a[e.length],source:e,target:t}}function o(t){for(var e,n,r=[],o=t.edges,i=e=t.target.length,a=t.source.length;e||a;){var u=o[e+a*(i+1)];if("delete"===u){if(n&&"delete"===n[0])n[1]++;else n=s=["delete",1],r.push(s);e--}else if("insert"===u){if(n&&"insert"===n[0])n[1]++;else n=s=["insert",1],r.push(s);a--}else if("retain"===u){var s=["retain",1];n&&"retain"===n[0]?n[1]++:(n=s,r.push(s)),e--,a--}}return r.reverse(),r}function i(t,e){return o(r(t,e))}function a(t,e){for(var n=i(t,e),r=[],o=0,a=0;a<n.length;){var u=n[a++];if("insert"===u[0])r.push([o,0,e.slice(o,o+u[1])]),o+=u[1];else if("delete"===u[0])if(a<n.length&&"insert"===n[a][0]){var s=n[a++];r.push([o,u[1],e.slice(o,o+s[1])]),u[1],o+=s[1]}else r.push([o,u[1]]),u[1];else"retain"==u[0]&&(u[1],o+=u[1])}return r}function u(t,e){for(var n=0;n<e.length;n++)t.swap.apply(t,e[n])}n(0),e.graphOt=r,e.traceOt=o,e.ot=i,e.diff=a,e.apply=u,e.merge=function(t,e){u(t,a(t,e))}},function(t,e,n){var r=n(51),o=n(18),i=(n(3),{type:"value"}),a={type:"literal",value:!0},u={type:"literal",value:!1};function s(t){return s.semantics.compile(t)}t.exports=s,s.semantics={compile:function(t){var e=this.compilers;if("equals"===t.type){var n=this.compile(t.args[0]),r=this.compileEvaluator(t.args[1]);return e.equals(n,r)}if("if"===t.type){var a=this.compileEvaluator(t.args[0]),u=this.compile(t.args[1]),s=this.compile(t.args[2]);return e.if(a,u,s)}if("and"===t.type||"or"===t.type){var l=o(t.args[0],i),c=o(t.args[1],i),h=this.compileEvaluator(t.args[0]),f=(r=this.compileEvaluator(t.args[1]),this.compileEvaluator(l[1])),p=this.compileEvaluator(c[1]),d=(n=this.compile(l[0]),this.compile(c[0]));return e[t.type](n,d,h,r,f,p)}if("everyBlock"===t.type){var g=this.compileEvaluator(t.args[0]),v=o(t.args[1],{type:"literal",value:!0}),m=this.compile(v[0]),y=this.compileEvaluator(v[1]);return e.everyBlock(g,m,y)}if("parent"===t.type){var b=this.compile(t.args[0]);return function(t,e){return b(t,e.parent)}}if(e.hasOwnProperty(t.type)){var w=t.args.map(this.compileEvaluator,this.compileEvaluator.semantics);return e[t.type].apply(null,w)}throw new Error("Can't compile assigner for "+JSON.stringify(t.type))},compileEvaluator:r,compilers:{property:function(t,e){return function(n,r){var o=t(r);if(o){var i=e(r);null!=i&&(Array.isArray(o)?o.set(i,n):o[i]=n)}}},get:function(t,e){return function(n,r){var o=t(r);if(o){var i=e(r);null!=i&&o.set(i,n)}}},has:function(t,e){return function(n,r){var o=t(r);if(o){var i=e(r);null!=n&&(n?(o.has||o.contains).call(o,i)||o.add(i):(o.has||o.contains).call(o,i)&&(o.remove||o.delete).call(o,i))}}},equals:function(t,e){return function(n,r){if(n)return t(e(r),r)}},if:function(t,e,n){return function(r,o){var i=t(o);if(null!=i)return i?e(r,o):n(r,o)}},and:function(t,e,n,r,o,i){return function(u,s){null!=u&&(u?(t(o(a),s),e(i(a),s)):t(n(s)&&!r(s),s))}},or:function(t,e,n,r,o,i){return function(a,s){null!=a&&(a?t(n(s)||!r(s),s):(t(o(u),s),e(i(u),s)))}},rangeContent:function(t){return function(e,n){var r=t(n);r&&(e?r.swap(0,r.length,e):r.clear())}},mapContent:function(t){return function(e,n){var r=t(n);r&&(r.clear(),n.value&&r.addEach(e))}},reversed:function(t){return function(e,n){var r=t(n);r&&r.swap(0,r.length,e.reversed())}},everyBlock:function(t,e,n){return function(r,o){if(r){var i=t(o),a=n(o);i.forEach(function(t){e(a,o.nest(t))})}}}}}},function(t,e,n){var r=n(8),o=n(10),i=n(34),a=n(20);n(3);function u(t){return u.semantics.compile(t)}t.exports=u;var s={mapBlock:function(t,e){return function(n){return t(n).map(function(t){return e(n.nest(t))})}},filterBlock:function(t,e){return function(n){return t(n).filter(function(t){return e(n.nest(t))})}},someBlock:function(t,e){return function(n){return t(n).some(function(t){return e(n.nest(t))})}},everyBlock:function(t,e){return function(n){return t(n).every(function(t){return e(n.nest(t))})}},sortedBlock:function(t,e){return function(n){return t(n).sorted(Function.by(function(t){return e(n.nest(t))}))}},sortedSetBlock:function(t,e){return function(n){function o(t){return e(n.nest(t))}return new i(t(n),function(t,e){return r.equals(o(t),o(e))},function(t,e){return r.compare(o(t),o(e))})}},groupBlock:function(t,e){return function(n){return t(n).group(function(t){return e(n.nest(t))})}},groupMapBlock:function(t,e){return function(n){return new o(t(n).group(function(t){return e(n.nest(t))}))}},minBlock:function(t,e){return function(n){return t(n).min(Function.by(function(t){return e(n.nest(t))}))}},maxBlock:function(t,e){return function(n){return t(n).max(Function.by(function(t){return e(n.nest(t))}))}},parent:function(t){return function(e){return t(e.parent)}},with:function(t,e){return function(n){return e(n.nest(t(n)))}},if:function(t,e,n){return function(r){var o=t(r);if(null!=o)return o?e(r):n(r)}},not:function(t){return function(e){return!t(e)}},and:function(t,e){return function(n){return t(n)&&e(n)}},or:function(t,e){return function(n){return t(n)||e(n)}},default:function(t,e){return function(n){var r=t(n);return null==r&&(r=e(n)),r}},defined:function(t){return function(e){return null!=t(e)}},path:function(t,e){return function(r){var o=t(r),i=e(r),a=n(5);try{return u(a(i))(r.nest(o))}catch(t){}}}},l=r.clone(a,1);r.addEach(l,{property:function(t,e){return t[e]},get:function(t,e){return t.get(e)},mapContent:Function.identity,rangeContent:Function.identity,view:function(t,e,n){return t.slice(e,e+n)}});u.semantics={compilers:{literal:function(t){return function(){return t.value}},value:function(t){return function(t){return t.value}},parameters:function(t){return function(t){return t.parameters}},element:function(t){return function(e){return e.document.getElementById(t.id)}},component:function(t){return function(e){return e.components.getObjectByLabel(t.label)}},tuple:function(t){var e=t.args.map(this.compile,this);return function(t){return e.map(function(e){return e(t)})}},record:function(t){var e=t.args,n={};for(var r in e)n[r]=this.compile(e[r]);return function(t){var e={};for(var r in n)e[r]=n[r](t);return e}}},argCompilers:s,operators:l,compile:function(t){var e=this.compilers,n=this.argCompilers,r=this.operators;if(e.hasOwnProperty(t.type))return e[t.type].call(this,t);if(n.hasOwnProperty(t.type)){var o=t.args.map(this.compile,this);return n[t.type].apply(null,o)}r.hasOwnProperty(t.type)||(r[t.type]=function(e){var n=Array.prototype.slice.call(arguments,1);if(!e[t.type])throw new TypeError("Can't call "+JSON.stringify(t.type)+" of "+e);return e[t.type].apply(e,n)});var i=r[t.type];o=t.args.map(this.compile,this);return function(t){var e=o.map(function(e){return e(t)});if(e.every(a.defined))return i.apply(null,e)}}}},function(t,e,n){var r=n(5),o=n(9),i=n(35),a=n(6),u=n(3);t.exports=function(t,e,n){n.target=t,n.targetPath=e;var s=n.source=n.source||t,l=n.args,c=n.compute,h=n.parameters=n.parameters||s,f=n.document,p=n.components,d=n.trace,g=n.sourceScope=new u(s);g.parameters=h,g.document=f,g.components=p;var v=n.targetScope=new u(t);v.parameters=h,v.document=f,v.components=p;var m=l.map(function(t){return r(t)}).map(function(t){if("rangeContent"===t.type){var e=o(t.args[0]);return a.makeRangeContentObserver(e)}if("mapContent"===t.type){e=o(t.args[0]);return a.makeMapContentObserver(e)}return o(t)}),y=a.makeRangeContentObserver(a.makeObserversObserver(m)),b=a.makeComputerObserver(y,c,t),w=r(e);return i(w)(b,g,v,n,d?{sourcePath:l.join(", "),targetPath:e}:void 0)}},function(t,e,n){var r=n(5),o=n(9),i=n(6),a=i.autoCancelPrevious,u=n(3);t.exports=function(t,e,n){var l;l="function"==typeof n?{change:n}:n;(l=l||s).source=t,l.sourcePath=e;var c=l.parameters=l.parameters||t,h=l.document,f=l.components,p=l.beforeChange,d=l.contentChange,g=new u(t);g.parameters=c,g.document=h,g.components=f,g.beforeChange=p;var v=r(e),m=o(v);!0===d&&(m=i.makeRangeContentObserver(m));return m(a(function(e){if(e){if("function"!=typeof d)return l.change.apply(t,arguments);if("function"==typeof d)return e.addRangeChangeListener(d),function(){e.removeRangeChangeListener(d)}}else;}),g)};var s={}},function(t,e,n){var r=n(1);function o(t){r.dispatchOwnPropertyChange(t.target,"checked",t.target.checked)}function i(t){r.dispatchOwnPropertyChange(t.target,"value",t.target.value)}function a(t){r.dispatchOwnPropertyChange(t.target,"innerHTML",t.target.innerHTML),r.dispatchOwnPropertyChange(t.target,"innerText",t.target.innerText),r.dispatchOwnPropertyChange(t.target,"value",t.target.innerText)}function u(t){"checked"===t?this.addEventListener("change",o):"value"===t&&(this.addEventListener("change",i),"text"===this.type||"TEXTAREA"===this.nodeName?this.addEventListener("keyup",i):this.contentEditable&&(this.innerText=this.innerText?this.innerText:this.value,this.addEventListener("keyup",a)))}function s(t){"checked"===t?this.removeEventListener("change",o):"value"===t&&(this.removeEventListener("change",i),"text"===this.type||"TEXTAREA"===this.nodeName?this.removeEventListener("keyup",i):this.contentEditable&&this.removeEventListener("keyup",a))}var l=Object.getPrototypeOf(document.createElement("input"));l.makePropertyObservable=u,l.makePropertyUnobservable=s;var c=Object.getPrototypeOf(document.createElement("textarea"));c.makePropertyObservable=u,c.makePropertyUnobservable=s;var h=Object.getPrototypeOf(document.createElement("span"));h.makePropertyObservable=u,h.makePropertyUnobservable=s},function(t,e,n){t.exports=n(56)},function(t,e,n){var r=n(57),o=n(62);t.exports={stringify:r,parse:o}},function(t,e,n){(function(e){var n={delimiter:"&",stringify:function(t,r){if(e.isBuffer(t)?t=t.toString():t instanceof Date?t=t.toISOString():null===t&&(t=""),"string"==typeof t||"number"==typeof t||"boolean"==typeof t)return[encodeURIComponent(r)+"="+encodeURIComponent(t)];var o=[];for(var i in t)t.hasOwnProperty(i)&&(o=o.concat(n.stringify(t[i],r+"["+i+"]")));return o}};t.exports=function(t,e){e=void 0===e?n.delimiter:e;var r=[];for(var o in t)t.hasOwnProperty(o)&&(r=r.concat(n.stringify(t[o],o)));return r.join(e)}}).call(this,n(37).Buffer)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=l(t),a=r[0],u=r[1],s=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,u)),c=0,h=u>0?a-4:a;for(n=0;n<h;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;2===u&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,s[c++]=255&e);1===u&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,u=n-o;a<u;a+=16383)i.push(c(t,a,a+16383>u?u:a+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],o[a.charCodeAt(u)]=u;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var o,i,a=[],u=e;u<n;u+=3)o=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,l=s>>1,c=-7,h=n?o-1:0,f=n?-1:1,p=t[e+h];for(h+=f,i=p&(1<<-c)-1,p>>=-c,c+=u;c>0;i=256*i+t[e+h],h+=f,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===i)i=1-l;else{if(i===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=l}return(p?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,u,s,l=8*i-o-1,c=(1<<l)-1,h=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+h>=1?f/s:f*Math.pow(2,1-h))*s>=2&&(a++,s/=2),a+h>=c?(u=0,a=c):a+h>=1?(u=(e*s-1)*Math.pow(2,o),a+=h):(u=e*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&u,p+=d,u/=256,o-=8);for(a=a<<o|u,l+=o;l>0;t[n+p]=255&a,p+=d,a/=256,l-=8);t[n+p-d]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=n(63),o={delimiter:"&",depth:5,arrayLimit:20,parametersLimit:1e3,parseValues:function(t,e){e="string"==typeof e?e:o.delimiter;for(var n={},i=t.split(e,o.parametersLimit),a=0,u=i.length;a<u;++a){var s=i[a],l=-1===s.indexOf("]=")?s.indexOf("="):s.indexOf("]=")+1;if(-1===l)n[r.decode(s)]="";else{var c=r.decode(s.slice(0,l)),h=r.decode(s.slice(l+1));n[c]?n[c]=[].concat(n[c]).concat(h):n[c]=h}}return n},parseObject:function(t,e){if(!t.length)return e;var n=t.shift(),r={};if("[]"===n)r=(r=[]).concat(o.parseObject(t,e));else{var i="["===n[0]&&"]"===n[n.length-1]?n.slice(1,n.length-1):n,a=parseInt(i,10);!isNaN(a)&&n!==i&&a<=o.arrayLimit?(r=[])[a]=o.parseObject(t,e):r[i]=o.parseObject(t,e)}return r},parseKeys:function(t,e,n){if(t){var r=/(\[[^\[\]]*\])/g,i=/^([^\[\]]*)/.exec(t);if(!Object.prototype.hasOwnProperty(i[1])){var a=[];i[1]&&a.push(i[1]);for(var u=0;null!==(i=r.exec(t))&&u<n;)++u,Object.prototype.hasOwnProperty(i[1].replace(/\[|\]/g,""))||a.push(i[1]);return i&&a.push("["+t.slice(i.index)+"]"),o.parseObject(a,e)}}}};t.exports=function(t,e,n){if(""===t||null==t)return{};"number"!=typeof e&&(n=e,e=o.depth);var i="string"==typeof t?o.parseValues(t,n):r.clone(t),a={};for(var u in i)if(i.hasOwnProperty(u)){var s=o.parseKeys(u,i[u],e);a=r.merge(a,s)}return r.compact(a)}},function(t,e,n){(function(t){e.arrayToObject=function(t){for(var e={},n=0,r=t.length;n<r;++n)void 0!==t[n]&&(e[n]=t[n]);return e},e.clone=function(n){if("object"!=typeof n||null===n)return n;if(t.isBuffer(n))return n.toString();var r=Array.isArray(n)?[]:{};for(var o in n)n.hasOwnProperty(o)&&(r[o]=e.clone(n[o]));return r},e.merge=function(t,n){if(!n)return t;var r=e.clone(t);if(Array.isArray(n)){for(var o=0,i=n.length;o<i;++o)void 0!==n[o]&&("object"==typeof r[o]?r[o]=e.merge(r[o],n[o]):r[o]=n[o]);return r}Array.isArray(r)&&(r=e.arrayToObject(r));for(var a=Object.keys(n),u=0,s=a.length;u<s;++u){var l=a[u],c=n[l];c&&"object"==typeof c?r[l]?r[l]=e.merge(r[l],c):r[l]=e.clone(c):r[l]=c}return r},e.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},e.compact=function(t){if("object"!=typeof t||null===t)return t;var n={};for(var r in t)if(t.hasOwnProperty(r))if(Array.isArray(t[r])){n[r]=[];for(var o=0,i=t[r].length;o<i;o++)void 0!==t[r][o]&&n[r].push(t[r][o])}else n[r]=e.compact(t[r]);return n}}).call(this,n(37).Buffer)},function(t,e,n){t.exports={"general-use":n(65),classical:n(68),beleriand:n(69)}},function(t,e,n){var r=n(21),o=n(22),i=n(7),a=n(23),u=n(24),s=n(15),l=n(25);e.name="General Use Mode";var c={};function h(t){return(t=t||c).blackSpeech&&(t.language="blackSpeech"),"blackSpeech"===t.language&&(t.language="black-speech"),{font:t.font||r,block:t.block,plain:t.plain,doubleNasalsWithTildeBelow:t.doubleNasalsWithTildeBelow,reverseCurls:t.reverseCurls||"black-speech"===t.language,swapDotSlash:t.swapDotSlash,medialOre:t.medialOre||"black-speech"===t.language,language:t.language,noAchLaut:t.noAchLaut,sHook:t.sHook,tsdz:t.tsdz,duodecimal:t.duodecimal}}e.makeOptions=h,e.transcribe=function(t,e){return(e=h(e)).font.transcribe(f(t,e),e)},e.encode=function(t,e){return e=h(e),o.encode(f(t,e),e)};var f=e.parse=a(function(t,e){return u(function(t,e){var n=e.font.makeColumn;return d(function(r,a){if("english"===e.language){if("of"===r)return function(e){return i.isBreak(e)?d(function(e,r){return"the"===e?t([O(n)]):"the'"===e?t([v(n),b(n)]):"the''"===e?t([v(n),b(n)]):r(t([v(n)]))}):t([v(n)])(e)};if("of'"===r)return d(function(e,r){return"the"===e?t([m(n),y(n)]):"the'"===e?t([m(n),b(n)]):"the''"===e?t([m(n),w(n)]):r(t([m(n)]))});if("the"===r)return t([y(n)]);if("the'"===r)return t([b(n)]);if("the''"===r)return t([w(n)]);if("of'the"===r)return t([v(n)])("t")("h")("e");if("of'the'"===r)return t([m(n)])("t")("h")("e")("'");if("and"===r)return t([C(n)]);if("and'"===r)return t([A(n)]);if("and''"===r)return t([E(n)]);if("we"===r)return t([n("vala",{from:"w"}),n("short-carrier",{from:""}).addAbove("e",{from:"e"}).varies()]);if("we'"===r)return t([n("vala",{from:"w",diphthong:!0}).addBelow("y",{from:""})])}return p[r]?t(o.decodeWord(p[r],n),{from:r}):t(g(r,r.length,e),r)},e)}(t,e))},h);var p={iant:"yanta;tinco:a,tilde-above",iaur:"yanta;vala:a;ore",baranduiniant:"umbar;romen:a;ando:a,tilde-above;anna:u;yanta;anto:a,tilde-above",ioreth:"yanta;romen:o;thule:e",noldo:"nwalme;lambe:o;ando;short-carrier:o",noldor:"nwalme;lambe:o;ando;ore:o"};function d(t,e,n,r){return n=n||"",r=r||function(t){return t},function(o){return i.isBreak(o)?t(n,r)(o):d(t,e,n+o,function(t){return r(t)(o)})}}var g=i.makeParser(function(t,e,n){return function t(e,n,r,o,a){return function(t,e,n,r){var o=n.font.makeColumn;return function(t,e){return function(n){return""===n&&"english"!==e.language&&(n="e"),""===n?t():-1!==x.indexOf(n)?function(e){return e===n?t(B[n],B[n]):t(n,n)(e)}:-1!==P.indexOf(n)?t(n,n):t()(n)}}(function(r,a){return function(t,e,n,r){var o=e.font.makeColumn;return function(a){return"n"===a?function(i){return"n"===i?e.doubleNasalsWithTildeBelow?t(o("numen",{from:"n"}).addTildeBelow({from:"n"}),n,r):t(o("numen",{from:"n"}).addTildeAbove({from:"n"}),n,r):"t"===i?function(e){return"h"===e?t(o("thule",{from:"th"}).addTildeAbove({from:"n"}),n,r):t(o("tinco",{from:"t"}).addTildeAbove({from:"n"}),n,r)(e)}:"d"===i?t(o("ando",{from:"d"}).addTildeAbove({from:"n"}),n,r):"c"===i?t(o("quesse",{from:"c"}).addTildeAbove({from:""}),n,r):"g"===i?t(o("ungwe",{from:"g"}).addTildeAbove({from:""}),n,r):"j"===i?t(o("anca",{from:"j"}).addTildeAbove({from:"n"}),n,r):"f"===i?t(o("numen",{from:"n"}),n,r)("v"):"w"===i?function(e){return"a"===e?function(e){return"l"===e?t(o("nwalme",{from:"n"}).addAbove("w",{from:"w"}),n,r)("a")(e):t(o("numen",{from:"n"}).addAbove("w",{from:"w"}),n,r)("a")(e)}:"nw'"===e?t(o("nwalme",{from:""}).addAbove("w",{from:"w"}),n,r):t(o("numen",{from:"n"}).addAbove("w",{from:"w"}),n,r)(e)}:t(o("numen",{from:"n"}),n,r)(i)}:"m"===a?function(i){return"m"===i?e.doubleNasalsWithTildeBelow?t(o("malta",{from:"m"}).addTildeBelow({from:"m"}),n,r):t(o("malta",{from:"m"}).addTildeAbove({from:"m"}),n,r):"p"===i?t(o("parma",{from:"p"}).addTildeAbove({from:"m"}),n,r):"b"===i?t(o("umbar",{from:"b"}).addTildeAbove({from:"m"}),n,r):"f"===i?t(o("formen",{from:"f"}).addTildeAbove({from:"m"}),n,r):"v"===i?t(o("ampa",{from:"v"}).addTildeAbove({from:"m"}),n,r):t(o("malta",{from:"m"}),n,r)(i)}:""===a?function(e){return"c"===e?t(o("quesse",{from:"c"}).addTildeAbove({from:""}),n,r):"g"===e?t(o("ungwe",{from:"g"}).addTildeAbove({from:""}),n,r):t(o("nwalme",{from:""}),n,r)(e)}:"t"===a?function(i){return"t"===i?t(o("tinco",{from:"t"}).addTildeBelow({from:"t"}),n,r):"h"===i?t(o("thule",{from:"th"}),n,r):"c"===i?function(e){return"h"===e?t(o("tinco",{from:"t"}),n,r)("c")("h")("'"):t(o("tinco",{from:"t"}),n,r)("c")(e)}:"s"===i&&e.tsdz?t(o("calma",{from:"ts"}),n,r):t(o("tinco",{from:"t"}),n,r)(i)}:"p"===a?function(e){return"p"===e?t(o("parma",{from:"p"}).addTildeBelow({from:"p"}),n,r):"h"===e?t(o("formen",{from:"ph"}),n,r):t(o("parma",{from:"p"}),n,r)(e)}:"c"===a?function(a){return"c"===a?t(o("calma",{from:"cc"}),n,r):"h"===a?i.countPrimes(function(i){return e.noAchLaut&&!i?t(o("calma",{from:"ch"}),n,r):t(o("hwesta",{from:"ch"}),n,r)}):t(o("quesse",{from:"c"}),n,r)(a)}:"d"===a?function(i){return"d"===i?t(o("ando",{from:"d"}).addTildeBelow({from:"d"}),n,r):"j"===i?t(o("anga",{from:"dj"}),n,r):"z"===i&&e.tsdz?t(o("anga",{from:"dz"}),n,r):"h"===i?t(o("anto",{from:"dh"}),n,r):t(o("ando",{from:"d"}),n,r)(i)}:"b"===a?function(e){return"b"===e?t(o("umbar",{from:"b"}).addTildeBelow({from:"b"}),n,r):"bh"===e?t(o("ampa",{from:"bh (v)"}),n,r):t(o("umbar",{from:"b"}),n,r)(e)}:"g"===a?function(i){return"g"===i?t(o("ungwe",{from:"g"}).addTildeBelow({from:"g"}),n,r):"h"===i?"black-speech"===e.language?t(o("ungwe-extended",{from:"gh"}),n,r):t(o("unque",{from:"gh"}),n,r):t(o("ungwe",{from:"g"}),n,r)(i)}:"f"===a?function(e){return"f"===e?t(o("formen",{from:"f"}).addTildeBelow({from:"f"}),n,r):t(o("formen",{from:"f"}),n,r)(e)}:"v"===a?t(o("ampa",{from:"v"}),n,r):"j"===a?t(o("anca",{from:"j"}),n,r):"s"===a?function(a){return"s"===a?i.countPrimes(function(e){var i=o(e>0?"silme-nuquerna":"silme",{from:e>0?"s":"s"}).addTildeBelow({from:"s"});return 0===e&&i.varies(),e>1&&i.addError("Silme does not have this many alternate forms."),t(i,n,r)}):"h"===a?"black-speech"===e.language?t(o("calma-extended",{from:"sh"}),n,r):t(o("harma",{from:"sh"}),n,r):i.countPrimes(function(e){var i=o(e>0?"silme-nuquerna":"silme",{from:e>0?"s":"s"});return 0===e&&i.varies(),e>1&&i.addError("Silme does not have this many alternate forms."),t(i,n,r)})(a)}:"z"===a?function(e){return"z"===e?i.countPrimes(function(e){var i=o(e>0?"esse-nuquerna":"esse",{from:"z"}).addTildeBelow({from:"z"});return 0===e&&i.varies(),e>1&&i.addError("Esse does not have this many alternate forms."),t(i,n,r)}):i.countPrimes(function(e){var i=o(e>0?"esse-nuquerna":"esse",{from:"z"});return 0===e&&i.varies(),e>1&&i.addError("Silme does not have this many alternate forms."),t(i,n,r)})(e)}:"h"===a?function(e){return"w"===e?t(o("hwesta-sindarinwa",{from:"hw"}),n,r):t(o("hyarmen",{from:"h"}),n,r)(e)}:"r"===a?function(a){return"r"===a?t(o("romen",{from:"r"}).addTildeBelow({from:"r"}),n,r):"h"===a?t(o("arda",{from:"rh"}),n,r):i.isFinal(a)||e.medialOre&&-1===j.indexOf(a)?t(o("ore",{from:"r",final:!0}),n,r)(a):t(o("romen",{from:"r"}),n,r)(a)}:"l"===a?function(e){return"l"===e?t(o("lambe",{from:"l"}).addTildeBelow({from:"l"}),n,r):"h"===e?t(o("alda",{from:"lh"}),n,r):t(o("lambe",{from:"l"}),n,r)(e)}:"i"===a?t(o("anna",{from:"i",diphthong:!0}),n,r):"u"===a?t(o("vala",{from:"u",diphthong:!0}),n,r):"w"===a?function(e){return"h"===e?t(o("hwesta-sindarinwa",{from:"wh"}),n,r):t(o("vala",{from:"w",dipththong:!0}),n,r)(e)}:"e"!==a||n&&"a"!==n?""===a?t(o("short-carrier",{from:""}).addAbove("e",{from:"e"})):"y"===a?i.countPrimes(function(e){return 0===e?t(o("anna",{from:""}),n,r):1===e?t(o("long-carrier",{from:"y"}).addAbove("i",{from:""}),n,r):t(o("ure",{from:"y"}).addError("Consonantal Y only has one variation"))}):_[a]?t(k(a,a,e).addAbove(_[a],{from:""}),n,r):"'"===a&&"english"===e.language&&"e"===n?t(o("short-carrier",{from:""}).addAbove("e",{from:"e"})):""===a&&"english"===e.language&&"e"===n?t(o("short-carrier",{from:""}).addBelow("i-below",{from:"e",silent:!0}))(a):t(null,n,r)(a):t(o("yanta",{from:"e",diphthong:!0}),n,r)}}(function(r,a,u){return r?a?(n.reverseCurls&&(a=T[a]||a),n.swapDotSlash&&(a=S[a]||a),"silme"===r.tengwa&&a&&n.sHook?t([o("short-carrier",{from:""}).addAbove(a,{from:u}).addBelow("s",{from:"s"})]):"english"===n.language&&_[a]?t([o("long-carrier",{from:_[a]}).addAbove(_[a],{from:_[a]}),r]):function(t){return-1!==R.indexOf(t)}(a)&&r.canAddAbove(a)?(r.addAbove(a,{from:u}),M(function(e){return t([e])},r,e,n)):M(function(e){return t([k(a,u,n),e])},r,e,n)):M(function(e){return t([e])},r,e,n):a?(n.reverseCurls&&(a=T[a]||a),n.swapDotSlash&&(a=S[a]||a),M(function(e){return t([e])},k(a,u,n),e,n)):function(e){return i.isBreak(e)?t([]):/\d/.test(e)?l(t,n)(e):s[e]?t([o(s[e],{from:e})]):t([o("ure",{from:e}).addError("Cannot transcribe "+JSON.stringify(e)+" in General Use Mode")])}},n,r,a)},n)}(function(i){return i.length?t(e,n,r,o.concat(i),i[i.length-1]):e(o)},n,r)}(t,e,n,[])});function v(t){return t("umbar-extended",{from:"of"}).varies()}function m(t){return v(t).addAbove("o",{from:"o",silent:!0}).varies()}function y(t){return t("ando-extended",{from:"the"}).varies()}function b(t){return y(t).addBelow("i-below",{from:""}).varies()}function w(t){return t("thule",{from:"th"}).addBelow("i-below",{from:"e",silent:!0})}function O(t){return t("umbar-extended",{from:"of the"}).addTildeBelow({from:""})}function C(t){return t("ando",{from:"and"}).addTildeAbove({from:""})}function A(t){return C(t).addBelow("i-below",{from:""}).varies()}function E(t){return t("ando",{from:"d"}).addTildeAbove("n",{from:"n"}).addAbove("a",{from:"a"})}function k(t,e,n){var r=n.font.makeColumn;return""===t?r("wilya",{from:"a"}).addAbove("a",{from:"a"}):_[t]?r("long-carrier",{from:e}).addAbove(_[t],{from:""}):r("short-carrier",{from:e}).addAbove(t,{from:""})}var x="aeiou",B={a:"",e:"",i:"",o:"",u:""},P="aei",R="aeiou",j="aeiou",_={"":"a","":"e","":"i","":"o","":"u"},T={o:"u",u:"o","":"","":""},S={i:"e",e:"i"};function M(t,e,n,r){return function(t,e){return e.canAddAbove("w","w")?function(n){return"w"===n?t(e.addAbove("w",{from:"e"})):t(e)(n)}:t(e)}(function(e){return function(t,e,n,r){return function(o){return""===o&&"english"!==r.language&&(o="e"),"y"===o&&e.canAddBelow("y")?t(e.addBelow("y",{from:"y"})):"e"===o&&e.canAddBelow("i-below")?i.countPrimes(function(o){return function(a){return i.isFinal(a)&&"english"===r.language&&n>2?0===o?t(e.addBelow("i-below",{from:"e",silent:!0}).varies())(a):(o>1&&e.addError("Following E has only one variation."),t(e)("e")(a)):0===o?t(e.varies())("e")(a):(o>1&&e.addError("Following E has only one variation."),t(e.addBelow("i-below",{from:"e",eilent:!0}))(a))}}):t(e)(o)}}(function(e){return function(t,e){return function(n){return"s"===n?e.canAddBelow("s")?i.countPrimes(function(n,r){return 0===n?t(e.addBelow("s",{from:"s"}).varies()):n?(n>1&&e.addError("Only one alternate form for following S."),r(t(e)("s"))):void 0}):i.countPrimes(function(n,r){return function(o){if(i.isFinal(o)){if(e.canAddFollowing("s-final")&&0==n--)e.addFollowing("s-final",{from:"s"});else if(e.canAddFollowing("s-inverse")&&0==n--)e.addFollowing("s-inverse",{from:"s"}),e.canAddFollowing("s-final")&&e.varies();else if(e.canAddFollowing("s-extended")&&0==n--)e.addFollowing("s-extended",{from:"s"}),e.canAddFollowing("s-inverse")&&e.varies();else{if(!e.canAddFollowing("s-flourish")||0!=n--){for(var a=t(e)("s");n-- >0;)a=a("'");return a}e.addFollowing("s-flourish",{from:"s"}),e.canAddFollowing("s-extended")&&e.varies()}return t(e)(o)}return r(t(e)("s"))(o)}}):t(e)(n)}}(t,e)},e,n,r)},e)}e.parseTengwaAnnotations=M},function(t,e){t.exports=function t(e){var n=Object.keys(e);var r={value:void 0,children:{}};var o={};n.forEach(function(t){if(0===t.length)r.value=e[t];else{var n=t[0];o[n]||(o[n]={});var i=t.slice(1);o[n][i]=e[t]}});var i=Object.keys(o);i.forEach(function(e){r.children[e]=t(o[e])});return r}},function(t,e){t.exports=function t(e,n,r,o){var i={};var a=Object.keys(e.children);a.forEach(function(a){i[a]=t(e.children[a],n,r,o)});var u;e.value&&(u=n(e.value));return a.reduceRight(function(t,e){return function(n){return function(o){return o===e?r(i[o](n)):t(n)(o)}}},function(t){return u?r(u(t)):o(t)})}},function(t,e,n){var r=n(21),o=n(22),i=n(7),a=n(23),u=n(24),s=n(15),l=n(25);e.name="Classical Mode";var c={};function h(t){return{font:(t=t||c).font||r,block:t.block,plain:t.plain,vilya:t.vilya,harma:t.harma,classicalH:t.classicalH,classicalR:t.classicalR,swapDotSlash:t.swapDotSlash,reverseCurls:t.reverseCurls,iuRising:t.iuRising,longHalla:t.longHalla,duodecimal:t.duodecimal}}e.makeOptions=h,e.transcribe=function(t,e){return(e=h(e)).font.transcribe(f(t,e),e)},e.encode=function(t,e){return e=h(e),o.encode(f(t,e),e)};var f=e.parse=a(function(t,e){return u(function t(e,n,r,o){r=r||[];return function(t,e,n){var r=e.font.makeColumn;return function(t,e,n){var r=e.font.makeColumn;return function(o){return"n"===o?function(e){return"n"===e?t([r("numen",{from:"n"}).addTildeBelow({from:"n"})]):"t"===e?t([r("anto",{from:"nt"})]):"d"===e?t([r("ando",{from:"nd"})]):"g"===e?function(e){return"w"===e?t([r("ungwe",{from:"gw"})]):t([r("anga",{from:"g"})])(e)}:"c"===e?function(e){return"w"===e?t([r("unque",{from:"cw"})]):t([r("anca",{from:"c"})])(e)}:t([r("numen",{from:"n"})])(e)}:"m"===o?function(e){return"m"===e?t([r("malta",{from:"m"}).addTildeBelow({from:"m"})]):"p"===e?t([r("ampa",{from:"mp"})]):"b"===e?t([r("umbar",{from:"mb"})]):t([r("malta",{from:"m"})])(e)}:""===o?function(e){return"g"===e?function(e){return"w"===e?t([r("ungwe",{from:"gw"})]):t([r("anga",{from:"g"})])(e)}:"c"===e?function(e){return t("w"===e?[r("unque",{from:"cw"})]:[r("anca",{from:"c"})])}:t([r("noldo",{from:""})])(e)}:"t"===o?function(e){return"t"===e?function(e){return"y"===e?t([r("tinco",{from:"t"}).addBelow("y",{from:"y"}).addTildeBelow({from:"t"})]):t([r("tinco",{from:"t"}).addTildeBelow({from:"t"})])(e)}:"y"===e?t([r("tinco",{from:"t"}).addBelow("y",{from:"y"})]):"h"===e?t([r("thule",{from:"th"})]):"s"===e?function(e){return i.isFinal(e)?t([r("tinco",{from:"t"}).addFollowing("s",{from:"s"})])(e):t([r("tinco",{from:"t"}),r("silme",{from:"s"})])(e)}:t([r("tinco",{from:"t"})])(e)}:"p"===o?function(e){return"p"===e?function(e){return"y"===e?t([r("parma",{from:"p"}).addBelow("y",{from:"y"}).addTildeBelow({from:"p"})]):t([r("parma",{from:"p"}).addTildeBelow({from:"p"})])(e)}:"y"===e?t([r("parma",{from:"p"}).addBelow("y",{from:"y"})]):"s"===e?function(e){return i.isFinal(e)?t([r("parma",{from:"p"}).addFollowing("s",{from:"s"})])(e):t([r("parma",{from:"p"}),r("silme",{from:"s"})])(e)}:t([r("parma",{from:"p"})])(e)}:"c"===o?function(e){return"c"===e?t([r("calma",{from:"c"}).addTildeBelow({from:"c"})]):"s"===e?t([r("calma",{from:"s"}).addBelow("s",{from:"s"})]):"h"===e?t([r("harma",{from:"ch"})]):"w"===e?t([r("quesse",{from:"chw"})]):t([r("calma",{from:"c"})])(e)}:"f"===o?t([r("formen",{from:"f"})]):"v"===o?e.vilya?t([r("wilya",{from:"v",name:"vilya"})]):t([r("vala",{from:"v",name:"vala"})]):"w"===o?e.vilya?t([])("u"):t([r("wilya",{from:"w",name:"vilya"})]):"r"===o?function(o){if("d"===o)return t([r("arda",{from:"rd"})]);if("h"===o){var a="R should preceed H in the HR diagraph in Classical mode.";return t([r("halla",{from:"h"}).addError(a),r("romen",{from:"r"}).addError(a)])}return e.classicalR?n&&n.above&&!i.isFinal(o)&&-1!==p.indexOf(o)?t([r("ore",{from:"r"})])(o):t([r("romen",{from:"r"})])(o):i.isFinal(o)||-1===p.indexOf(o)?t([r("ore",{from:"r"})])(o):t([r("romen",{from:"r"})])(o)}:"l"===o?function(e){if("l"===e)return function(e){return"y"===e?t([r("lambe",{from:"l"}).addBelow("y",{from:"y"}).addTildeBelow({from:"l"})]):t([r("lambe",{from:"l"}).addTildeBelow({from:"y"})])(e)};if("y"===e)return t([r("lambe",{from:"l"}).addBelow("y",{from:"y"})]);if("h"===e){var n="L should preceed H in the HL diagraph in Classical mode.";return t([r("halla",{from:"h"}).addError(n),r("lambe",{from:"l"}).addError(n)])}return"d"===e?t([r("alda",{from:"ld"})]):"b"===e?t([r("lambe",{from:"l"}),r("umbar",{from:"b"})]):t([r("lambe",{from:"l"})])(e)}:"s"===o?function(e){return"s"===e?t([r("esse",{from:"ss"})]):t([r("silme",{from:"s"})])(e)}:"h"===o?function(o){return"l"===o?t([r("halla",{from:"h"}),r("lambe",{from:"l"})]):"r"===o?t([r("halla",{from:"h"}),r("romen",{from:"r"})]):"w"===o?t([r("hwesta",{from:"hw"})]):"t"===o?t([r("harma",{from:"ht"})]):"y"===o?e.classicalH&&!e.harma?t([r("hyarmen",{from:"hy"})]):t([r("hyarmen",{from:"hy"}).addBelow("y",{from:"y"})]):e.classicalH?e.harma?n?t([r("halla",{from:"h"})])(o):t([r("harma",{from:"h"})])(o):n?t([r("hyarmen",{from:"h"})])(o):t([r("halla",{from:"h"})])(o):t([r("hyarmen",{from:"h"})])(o)}:"d"===o?t([r("ando",{from:"d"}).addError("D cannot appear except after N, L, or R in Classical Mode")]):"b"===o?t([r("umbar",{from:"b"}).addError("B cannot appear except after M or L in Classical Mode")]):"g"===o?t([r("anga",{from:"g"}).addError("G cannot appear except after N or  in Classical Mode")]):"j"===o?t([r("ure",{from:"j"}).addError("J cannot be transcribed in Classical Mode")]):t([])(o)}}(function(n){var o=n.pop();return function t(e,n,r){var o=n.font;var i=o.makeColumn;return function(o){if("a"===o)return function(o){return"a"===o?t(e,n,r)(""):"i"===o?e([r,i("yanta",{from:"i",diphthong:!0}).addAbove("a",{from:"a"})]):"u"===o?e([r,i("ure",{from:"u",diphthong:!0}).addAbove("a",{from:"a"})]):r&&r.canAddAbove("a")?e([r.addAbove("a",{from:"a"})])(o):e([r,i("short-carrier",{from:"a"}).addAbove("a",{from:""})])(o)};if("e"===o||""===o){var a=m("e",n);return function(o){return"e"===o?t(e,n,r)(""):"u"===o?e([r,i("ure",{from:"u",diphthong:!0}).addAbove(a,{from:"e"})]):r&&r.canAddAbove("e")?e([r.addAbove(a,{from:"e"})])(o):e([r,i("short-carrier",{from:"e"}).addAbove(a,{from:""})])(o)}}if("i"===o){var u=m("i",n);return function(o){return"i"===o?t(e,n,r)(""):"u"===o?n.iuRising?e([r,i("anna",{from:"i",diphthong:!0}).addAbove(g("u",n),{from:"u"}).addBelow("y",{from:"y"})]):e([r,i("ure",{from:"u",diphthong:!0}).addAbove(u,{from:"i"})]):r&&r.canAddAbove(u)?e([r.addAbove(u,{from:"i"})])(o):e([r,i("short-carrier",{from:"i"}).addAbove(u,{from:""})])(o)}}if("o"===o)return function(o){return"o"===o?t(e,n,r)(""):"i"===o?e([r,i("yanta",{from:"i",diphthong:!0}).addAbove(g("o",n),{from:"o"})]):r&&r.canAddAbove("o")?e([r.addAbove(g("o",n),{from:"o"})])(o):e([r,i("short-carrier",{from:"o"}).addAbove(g("o",n),{from:""})])(o)};if("u"===o)return function(o){return"u"===o?t(e,n,r)(""):"i"===o?e([r,i("yanta",{from:"i",diphthong:!0}).addAbove(g("u",n),{from:"u"})]):r&&r.canAddAbove("u")?e([r.addAbove(g("u",n),{from:"u"})])(o):e([r,i("short-carrier",{from:"u"}).addAbove(g("u",n),{from:""})])(o)};if("y"===o){if(r&&r.canAddBelow("y"))return e([r.addBelow("y",{from:"y"})]);var s=i("anna",{from:""}).addBelow("y",{from:"y"});return t(function(t){return e([r].concat(t))},n,s)}return""===o?e([r,i("long-carrier",{from:""}).addAbove("a",{from:""})]):""===o?e([r,i("long-carrier",{from:""}).addAbove(m("e",n),{from:""})]):""===o?e([r,i("long-carrier",{from:""}).addAbove(m("i",n),{from:""})]):""===o?r&&r.canAddAbove("")?e([r.addAbove(g("",n),{from:""})]):e([r,i("long-carrier",{from:""}).addAbove(g("o",n),{from:""})]):""===o?r&&r.canAddAbove("")?e([r.addAbove(g("",n),{from:""})]):e([r,i("long-carrier",{from:""}).addAbove(g("u",n),{from:""})]):e([r])(o)}}(function(o){return(o=n.concat(o).filter(Boolean)).length?t(o):function(n){return i.isBreak(n)?t([])(n):/\d/.test(n)?l(t,e)(n):s[n]?t([r(s[n],{from:n})]):t([r("ure",{from:""}).addError("Cannot transcribe "+JSON.stringify(n)+" in Classical Mode")])}},e,o)},e,n)}(function(o){return o.length?t(e,n,r.concat(o),o[o.length-1]):e(r)},n,o)}(t,e))},h);var p="aeiouy";var d={o:"u",u:"o","":"","":""};function g(t,e){return e.reverseCurls&&(t=d[t]||t),t}var v={e:"i",i:"e"};function m(t,e){return e.swapDotSlash&&(t=v[t]||t),t}},function(t,e,n){var r=n(41),o=n(7),i=n(22),a=n(23),u=n(24),s=n(15),l=n(25);e.name="Mode of Beleriand";var c={};function h(t){return{font:(t=t||c).font||r,block:t.block,plain:t.plain,duodecimal:t.duodecimal}}e.makeOptions=h,e.transcribe=function(t,e){return(e=h(e)).font.transcribe(f(t,e),e)},e.encode=function(t,e){return e=h(e),i.encode(f(t,e),e)};var f=e.parse=a(function(t,e){return u(function t(e,n,r){r=r||[];return p(function(o){return o?t(e,n,r.concat([o])):function(o){return/\d/.test(o)?l(function(o){return t(e,n,r.concat(o))},n)(o):e(r)(o)}},n)}(t,e))},h);function p(t,e){return function t(e,n){var r=n.font;var i=r.makeColumn;return function(r){return"n"===r?function(r){return"t"===r||"d"===r?t(function(t){return e(t.addTildeAbove())},n)(r):"c"===r||"g"===r?t(e,n)("")(r):"n"===r?e(i("numen",{from:"nn"})):e(i("ore",{from:"n"}))(r)}:"t"===r?function(t){return"h"===t?e(i("thule",{from:"th"})):e(i("tinco",{from:"t"}))(t)}:"d"===r?function(t){return"h"===t?e(i("anto",{from:"dh"})):e(i("ando",{from:"d"}))(t)}:"m"===r?function(r){return"p"===r||"b"===r||"f"===r||"v"===r?t(function(t){return e(t.addTildeAbove({from:r}))},n)(r):"m"===r?e(i("malta",{from:"mm"})):e(i("vala",{from:"m"}))(r)}:"p"===r?e(i("parma",{from:"p"})):"b"===r?e(i("umbar",{from:"b"})):"f"===r?function(t){return o.isFinal(t)?e(i("ampa",{from:"f",final:!0}))(t):e(i("formen",{from:"f",medial:!0}))(t)}:"v"===r?e(i("ampa",{from:"v"})):""===r?function(r){return"c"===r||"g"===r?t(function(t){return"halla"===t.tengwa&&t.addError("Lenited G (halla) should not be nasalized with prefix N"),e(t.addTildeAbove({from:r}))},n)(r):e(i("noldo",{from:""}))(r)}:"c"===r?function(t){return"h"===t?function(t){return"w"===t?e(i("hwesta",{from:"chw"})):e(i("harma",{from:"ch"}))(t)}:"w"===t?e(i("quesse",{from:"cw"})):e(i("calma",{from:"c"}))(t)}:"g"===r?function(t){return"h"===t?function(t){return"w"===t?e(i("unque",{from:"ghw"})):e(i("anca",{from:"gh"}))(t)}:"w"===t?e(i("ungwe",{from:"gw"})):"'"===t?e(i("halla",{from:"g"})):e(i("anga",{from:"g"}).varies())(t)}:"r"===r?function(t){return"h"===t?e(i("arda",{from:"rh"})):e(i("romen",{from:"r"}))(t)}:"l"===r?function(t){return"h"===t?e(i("alda",{from:"lh"})):e(i("lambe",{from:"l"}))(t)}:"s"===r?e(i("silme",{from:"s"})):"a"===r?function(t){return"i"===t?e(i("round-carrier",{from:"a",diphthong:!0}).addAbove("",{from:"i"})):"u"===t?e(i("round-carrier",{from:"a",diphthong:!0}).addAbove("w",{from:"u"})):"'"===t?e(i("round-carrier",{from:"a"}).addAbove("i",{from:"a"})):"a"===t?e(i("round-carrier",{from:"a",long:!0}).addAbove("e",{from:"a"})):e(i("round-carrier",{from:"a"}).varies())(t)}:"e"===r||""===r?function(t){return"i"===t?e(i("yanta",{from:"e"}).addAbove("",{from:"i"})):"e"===t?e(i("yanta",{from:"e",long:!0}).addAbove("e",{from:"e"})):e(i("yanta",{from:"e"}))(t)}:"i"===r?function(t){return"i"===t?p(e,n)(""):o.countPrimes(function(t){return e(0===t?i("short-carrier",{from:"i"}).varies():1===t?i("short-carrier",{from:"i"}).addAbove("i",{from:""}).varies():2===t?i("long-carrier",{from:"i",long:!0}).addAbove("i",{from:""}).varies():3===t?i("long-carrier",{from:"i",long:!0}):i("long-carrier").addAbove("i").addError("I only has four variants between short or long and dotted or not."))})(t)}:"o"===r?function(t){return"o"===t?e(i("anna",{from:"o"}).addAbove("e",{from:"o"})):e(i("anna",{from:"o"}))(t)}:"u"===r?function(t){return"i"===t?e(i("ure",{from:"u",diphthong:!0}).addAbove("",{from:"i"})):"u"===t?e(i("ure",{from:"u",long:!0}).addAbove("e",{from:"u"})):e(i("ure",{from:"u"}))(t)}:"w"===r?function(t){return"w"===t?e(i("wilya",{from:"w"}).addAbove("e",{from:"w"})):e(i("wilya",{from:"w"}))(t)}:"y"===r?function(t){return"y"===t?e(i("silme-nuquerna",{from:"y"}).addAbove("e",{from:"y"})):e(i("silme-nuquerna",{from:"y"}))(t)}:""===r?e(i("round-carrier",{from:"a",long:!0}).addAbove("e",{from:"a"})):""===r?e(i("yanta",{from:""}).addAbove("e")):""===r?o.countPrimes(function(t){return e(0===t?i("short-carrier",{from:"i"}).addAbove("e",{from:"i"}).varies():1===t?i("long-carrier",{from:"",long:!0}).addAbove("e",{from:""}):i("long-carrier").addAbove("e").addError(" only has one variant."))}):""===r?e(i("anna",{from:"",long:!0}).addAbove("e",{from:""})):""===r?e(i("ure",{from:"",long:!0}).addAbove("e",{from:""})):"h"===r?function(t){return"w"===t?e(i("hwesta-sindarinwa",{from:"hw"})):e(i("hyarmen",{from:"h"}))(t)}:"z"===r?e(i("silme",{from:"z"}).addError("Z does not appear in the mode of Beleriand")):s[r]?e(i(s[r],{from:r})):o.isBreak(r)||/\d/.test(r)?e()(r):e(i("anna",{from:r}).addError("Unexpected character: "+JSON.stringify(r)))}}(function(e){return e?function(t,e){return function(n){return"s"===n?e.canAddBelow("s")?t(e.addBelow("s",{from:"s"})):o.countPrimes(function(n){return function(r){if(o.isFinal(r)){if(e.canAddFollowing("s-final")&&0==n--)e.addFollowing("s-final",{from:"s"});else if(e.canAddFollowing("s-inverse")&&0==n--)e.addFollowing("s-inverse");else if(e.canAddFollowing("s-extended")&&0==n--)e.addFollowing("s-extended",{from:"s"});else{if(!e.canAddFollowing("s-flourish"))return t(e)("s",{from:"s"})(r);e.addFollowing("s-flourish",{from:"s"}),n>0&&e.addError("Following S only has 3 alternate flourishes.")}return t(e)(r)}return t(e)("s",{from:"s"})(r)}}):t(e)(n)}}(t,e):t()},e)}},function(t,e,n){t.exports={parmaite:n(41),annatar:n(21)}}]);